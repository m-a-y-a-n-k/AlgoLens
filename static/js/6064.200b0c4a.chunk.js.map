{"version":3,"file":"static/js/6064.200b0c4a.chunk.js","mappings":"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","sources":["routing/site/physics/components/Optics/index.jsx"],"sourcesContent":["import React, { useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport Draggable from \"react-draggable\"\r\n\r\nconst Canvas = styled.div`\r\n  width: 100%;\r\n  height: 80vh;\r\n  background: #f0f0f0;\r\n  position: relative;\r\n  overflow: hidden;\r\n`\r\n\r\nconst MirrorStyled = styled.div`\r\n  width: 10px;\r\n  height: 100px;\r\n  background: #000;\r\n  position: absolute;\r\n`\r\n\r\nconst LensStyled = styled.div`\r\n  width: 10px;\r\n  height: 100px;\r\n  background: rgba(0, 0, 255, 0.5);\r\n  position: absolute;\r\n`\r\n\r\nconst RayStyled = styled.div`\r\n  position: absolute;\r\n  width: 5px;\r\n  background: yellow;\r\n  height: ${(props) => props.length}px;\r\n  transform: rotate(${(props) => props.angle}deg);\r\n  transform-origin: top left;\r\n`\r\n\r\nconst Panel = styled.div`\r\n  width: 100%;\r\n  height: 20vh;\r\n  background: #333;\r\n  color: #fff;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n    height: auto;\r\n  }\r\n`\r\n\r\nconst Button = styled.button`\r\n  background: #fff;\r\n  color: #333;\r\n  padding: 10px 20px;\r\n  border: none;\r\n  cursor: pointer;\r\n  margin: 5px;\r\n`\r\n\r\nconst Mirror = () => <MirrorStyled />\r\nconst Lens = () => <LensStyled />\r\n\r\nconst Ray = ({ startX, startY, endX, endY }) => {\r\n  const length = Math.sqrt((endX - startX) ** 2 + (endY - startY) ** 2)\r\n  const angle = Math.atan2(endY - startY, endX - startX) * (180 / Math.PI)\r\n\r\n  return (\r\n    <RayStyled\r\n      style={{ top: startY, left: startX }}\r\n      angle={angle}\r\n      length={length}\r\n    />\r\n  )\r\n}\r\n\r\n// Function to calculate intersection point of a ray with an element\r\nconst calculateIntersection = (rayStart, rayEnd, element) => {\r\n  const { x: x1, y: y1 } = rayStart\r\n  const { x: x2, y: y2 } = rayEnd\r\n  const { x: x3, y: y3, width, height } = element\r\n\r\n  const denominator =\r\n    (x1 - x2) * (y3 - y3 + height) - (y1 - y2) * (x3 - x3 + width)\r\n  if (denominator === 0) return null\r\n\r\n  const t1 =\r\n    ((x1 - x3) * (y3 - y3 + height) - (y1 - y3) * (x3 - x3 + width)) /\r\n    denominator\r\n  const t2 = ((x1 - x2) * (y1 - y3) - (y1 - y2) * (x1 - x3)) / denominator\r\n\r\n  if (t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1) {\r\n    return {\r\n      x: x1 + t1 * (x2 - x1),\r\n      y: y1 + t1 * (y2 - y1),\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\n// Function to calculate reflection or refraction of a ray at an element\r\nconst calculateReflectionOrRefraction = (ray, element) => {\r\n  const { width, height } = element\r\n  const { startX, startY, endX, endY } = ray\r\n\r\n  // Calculate normal vector of the element\r\n  const normalVector = {\r\n    x: height === 0 ? 1 : 0,\r\n    y: width === 0 ? 1 : 0,\r\n  }\r\n\r\n  // Calculate incident and reflected/refracted angles\r\n  const incidentAngle = Math.atan2(endY - startY, endX - startX)\r\n  const normalAngle = Math.atan2(normalVector.y, normalVector.x)\r\n  const angleOfIncidence = incidentAngle - normalAngle\r\n  const angleOfReflectionOrRefraction =\r\n    element.type === \"mirror\"\r\n      ? incidentAngle - 2 * angleOfIncidence\r\n      : incidentAngle + 2 * angleOfIncidence\r\n\r\n  // Calculate new endpoint based on angle of reflection/refraction\r\n  const length = ray.length\r\n  const newEndX = startX + length * Math.cos(angleOfReflectionOrRefraction)\r\n  const newEndY = startY + length * Math.sin(angleOfReflectionOrRefraction)\r\n\r\n  return {\r\n    ...ray,\r\n    endX: newEndX,\r\n    endY: newEndY,\r\n  }\r\n}\r\n\r\n// Function to check if a point is outside the canvas boundaries\r\nconst isOutsideCanvas = (x, y) => {\r\n  const canvasWidth = window.innerWidth\r\n  const canvasHeight = window.innerHeight\r\n  return x < 0 || x > canvasWidth || y < 0 || y > canvasHeight\r\n}\r\n\r\nconst calculateRay = (ray, elements) => {\r\n  let newRay = { ...ray }\r\n  let rayEndX = newRay.startX\r\n  let rayEndY = newRay.startY\r\n\r\n  for (let i = 0; i < 1000; i++) {\r\n    // Adjust maximum iterations as needed\r\n    const nextPoint = { x: rayEndX, y: rayEndY }\r\n\r\n    elements.forEach((element) => {\r\n      const intersection = calculateIntersection(\r\n        { x: newRay.startX, y: newRay.startY },\r\n        nextPoint,\r\n        element\r\n      )\r\n      if (intersection) {\r\n        newRay = calculateReflectionOrRefraction(newRay, element)\r\n        rayEndX = newRay.endX\r\n        rayEndY = newRay.endY\r\n      }\r\n    })\r\n\r\n    // Update ray length\r\n    newRay.length = Math.sqrt(\r\n      (newRay.endX - newRay.startX) ** 2 + (newRay.endY - newRay.startY) ** 2\r\n    )\r\n\r\n    // Break loop if ray has reached maximum length or reached canvas boundaries\r\n    if (\r\n      newRay.length >= ray.length ||\r\n      isOutsideCanvas(newRay.endX, newRay.endY)\r\n    ) {\r\n      break\r\n    }\r\n  }\r\n\r\n  return newRay\r\n}\r\n\r\nconst MirrorLensCanvas = ({ elements, rays, onDragElement, onDragRay }) => {\r\n  return (\r\n    <Canvas>\r\n      {elements.map((el, index) => (\r\n        <Draggable\r\n          key={index}\r\n          defaultPosition={{ x: el.x, y: el.y }}\r\n          onStop={(e, data) => onDragElement(index, data.x, data.y)}\r\n        >\r\n          <div style={{ position: \"absolute\", top: 0, left: 0 }}>\r\n            {el.type === \"mirror\" ? <Mirror /> : <Lens />}\r\n          </div>\r\n        </Draggable>\r\n      ))}\r\n      {rays.map((ray, index) => {\r\n        const calculatedRay = calculateRay(ray, elements)\r\n        return (\r\n          <Draggable\r\n            key={index}\r\n            defaultPosition={{\r\n              x: calculatedRay.startX,\r\n              y: calculatedRay.startY,\r\n            }}\r\n            onStop={(e, data) => onDragRay(index, data.x, data.y)}\r\n          >\r\n            <div style={{ position: \"absolute\", top: 0, left: 0 }}>\r\n              <Ray\r\n                startX={calculatedRay.startX}\r\n                startY={calculatedRay.startY}\r\n                endX={calculatedRay.endX}\r\n                endY={calculatedRay.endY}\r\n              />\r\n            </div>\r\n          </Draggable>\r\n        )\r\n      })}\r\n    </Canvas>\r\n  )\r\n}\r\n\r\nconst ControlPanel = ({ addElement, addRay }) => {\r\n  return (\r\n    <Panel>\r\n      <Button onClick={() => addElement(\"mirror\")}>Add Mirror</Button>\r\n      <Button onClick={() => addElement(\"lens\")}>Add Lens</Button>\r\n      <Button onClick={addRay}>Add Ray</Button>\r\n    </Panel>\r\n  )\r\n}\r\n\r\nconst AppContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n`\r\n\r\nfunction App() {\r\n  const [elements, setElements] = useState([])\r\n  const [rays, setRays] = useState([])\r\n\r\n  const addElement = (type) => {\r\n    setElements([...elements, { type, x: 100, y: 100 }])\r\n  }\r\n\r\n  const onDragElement = (index, x, y) => {\r\n    const updatedElements = [...elements]\r\n    updatedElements[index] = { ...updatedElements[index], x, y }\r\n    setElements(updatedElements)\r\n  }\r\n\r\n  const onDragRay = (index, x, y) => {\r\n    const updatedRays = [...rays]\r\n    const draggedRay = updatedRays[index]\r\n\r\n    if (draggedRay) {\r\n      const dx = x - draggedRay.startX\r\n      const dy = y - draggedRay.startY\r\n\r\n      updatedRays[index] = {\r\n        ...draggedRay,\r\n        startX: x,\r\n        startY: y,\r\n        endX: draggedRay.endX + dx,\r\n        endY: draggedRay.endY + dy,\r\n      }\r\n\r\n      setRays(updatedRays)\r\n    }\r\n  }\r\n\r\n  const addRay = () => {\r\n    setRays([...rays, { startX: 200, startY: 100, endX: 200, endY: 300 }])\r\n  }\r\n\r\n  return (\r\n    <AppContainer>\r\n      <MirrorLensCanvas\r\n        elements={elements}\r\n        onDragElement={onDragElement}\r\n        rays={rays}\r\n        onDragRay={onDragRay}\r\n      />\r\n      <ControlPanel addElement={addElement} addRay={addRay} />\r\n    </AppContainer>\r\n  )\r\n}\r\n\r\nexport default App\r\n"],"names":["Canvas","styled","MirrorStyled","LensStyled","RayStyled","props","length","angle","Panel","Button","Mirror","_jsx","Lens","Ray","_ref","startX","startY","endX","endY","Math","sqrt","atan2","PI","style","top","left","calculateIntersection","rayStart","rayEnd","element","x","x1","y","y1","x2","y2","x3","y3","width","height","denominator","t1","t2","calculateReflectionOrRefraction","ray","normalVector","incidentAngle","angleOfIncidence","angleOfReflectionOrRefraction","type","newEndX","cos","newEndY","sin","isOutsideCanvas","canvasWidth","window","innerWidth","canvasHeight","innerHeight","MirrorLensCanvas","_ref2","elements","rays","onDragElement","onDragRay","_jsxs","children","map","el","index","Draggable","defaultPosition","onStop","e","data","position","calculatedRay","calculateRay","newRay","rayEndX","rayEndY","i","nextPoint","forEach","ControlPanel","_ref3","addElement","addRay","onClick","AppContainer","setElements","useState","setRays","updatedElements","updatedRays","draggedRay","dx","dy"],"sourceRoot":""}