"use strict";(self.webpackChunkAlgoLens=self.webpackChunkAlgoLens||[]).push([[2679],{82679:(e,s,t)=>{t.r(s),t.d(s,{default:()=>V});var r=t(72791);const a="Tetris_wrapper__tyoUR",n="Tetris_header__kD4CI",i="Tetris_title__PkIlj",l="Tetris_controls__W9mJQ",c="Tetris_hud__PSxWK",o="Tetris_stat__+DQ84",h="Tetris_timerBar__0Ag8C",d="Tetris_timerFill__nD-BO",u="Tetris_timerText__EzvEJ",_="Tetris_bossBox__-H5xz",f="Tetris_bossName__Aai1I",m="Tetris_bossTaunt__WmmWl",x="Tetris_bonusPill__2fCAm",p="Tetris_stage__AhbU8",v="Tetris_board__atPc4",j="Tetris_row__oLaNW",y="Tetris_cell__w-NJA",g="Tetris_empty__uM6wR",N="Tetris_ghost__4yHN0",T="Tetris_filled__5zTmd",k="Tetris_sidebar__hK+mX",S="Tetris_panel__Ds7pd",b="Tetris_panelTitle__CkUU0",w="Tetris_panelBody__s2xo9",A="Tetris_tauntSm__6+Rfc",M="Tetris_metaRow__9AFuO",C="Tetris_nextList__g9jAi",I="Tetris_miniPiece__pvoxa",L="Tetris_miniRow__-p93T",E="Tetris_miniCell__5jYLo",P="Tetris_miniEmpty__M-iIQ",B="Tetris_miniFilled__VGPn6",R="Tetris_holdBox__oe6jD",D="Tetris_holdEmpty__EkU5W",$="Tetris_gameOver__xeJah",O="Tetris_victory__CzU6I";var U=t(80184);const W={I:{color:"#5ab3ff",shapes:[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]]},J:{color:"#7fb4ff",shapes:[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]]},L:{color:"#ffc857",shapes:[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]]},O:{color:"#ffb02e",shapes:[[[1,1],[1,1]]]},S:{color:"#4ad6a7",shapes:[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]]},T:{color:"#b694ff",shapes:[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]]},Z:{color:"#ff6b6b",shapes:[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]]}},z=Object.keys(W),J=()=>Array.from({length:20},(()=>Array(10).fill(0)));function F(){const e=[...z];for(let s=e.length-1;s>0;s--){const t=Math.floor(Math.random()*(s+1));[e[s],e[t]]=[e[t],e[s]]}return e}function H(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const t=e.length,r=Array.from({length:t},(()=>Array(t).fill(0)));for(let a=0;a<t;a++)for(let n=0;n<t;n++)s>0?r[n][t-1-a]=e[a][n]:r[t-1-n][a]=e[a][n];return r}const K=e=>e.map((e=>[...e]));function Q(e,s,t,r){for(let a=0;a<s.length;a++)for(let n=0;n<s[a].length;n++){if(!s[a][n])continue;const i=t+n,l=r+a;if(i<0||i>=10||l>=20)return!1;if(l>=0&&0!==e[l][i])return!1}return!0}function X(e){const s=W[e],t=s.shapes[0].map((e=>[...e])),r=t[0].length;return{key:e,color:s.color,rotationIndex:0,shape:t,x:Math.floor((10-r)/2),y:-2}}function Y(e,s){return s?Math.max(240,180-Math.floor(.6*e)):Math.max(360,360-2*e)}const Z=["Bitcrusher","Latency Lord","Null Pointer","Stack Smasher","Garbage Colossus","Packet Phantom","Heisen-Bug","Kernel Kraken","Cache Minotaur","Daemon Duke"],G=["Feel the overclock!","I throttle time itself.","Your stack will overflow.","My speed is inevitable.","I'll fragment your hopes.","Packets lost, dreams gone.","Observe non-determinism!","Segfaulting your plans.","Cache this L.","Daemon time!"];function V(){const[e,s]=(0,r.useState)(J()),[t,z]=(0,r.useState)(F()),[V,q]=(0,r.useState)(F()),[ee,se]=(0,r.useState)((()=>F())),[te,re]=(0,r.useState)((()=>X(ee[0]))),[ae,ne]=(0,r.useState)(null),[ie,le]=(0,r.useState)(!0),[ce,oe]=(0,r.useState)(1),[he,de]=(0,r.useState)(0),[ue,_e]=(0,r.useState)(0),[fe,me]=(0,r.useState)(Y(1,!1)),[xe,pe]=(0,r.useState)(!1),[ve,je]=(0,r.useState)(!1),[ye,ge]=(0,r.useState)(!1),[Ne,Te]=(0,r.useState)(!1),[ke,Se]=(0,r.useState)(!1),[be,we]=(0,r.useState)(!1),Ae=(0,r.useMemo)((()=>function(e){return Math.max(120,900-18*(e-1))}(ce)*(be?.5:1)),[ce,be]),Me=Ne?6:10;function Ce(){let e=[...ee],s=[...t],r=[...V],a=e.shift();return e.length<3&&(0===s.length&&(s=r,r=F()),e=[...e,...s.splice(0,Math.min(7,s.length))]),se(e),z(s),q(r),a}function Ie(e){const t=e%5===0;Te(t),Se(!1),de(0),s(J());const r=Ce();re(X(r)),me(Y(e,t)),pe(!1),je(!1),le(!0)}(0,r.useEffect)((()=>{Ie(1)}),[]),(0,r.useEffect)((()=>{if(xe||ve||ye)return;const t=setInterval((()=>{re((t=>{if(!t)return t;const r=t.y+1;if(Q(e,t.shape,t.x,r))return{...t,y:r};const a=function(e,s,t,r,a){const n=K(e);for(let i=0;i<s.length;i++)for(let e=0;e<s[i].length;e++){if(!s[i][e])continue;const l=t+e,c=r+i;c>=0&&(n[c][l]=a)}return n}(e,t.shape,t.x,t.y,t.color),{board:n,cleared:i}=function(e){const s=e.filter((e=>e.some((e=>0===e)))),t=20-s.length;return{board:[...Array.from({length:t},(()=>Array(10).fill(0))),...s],cleared:t}}(a);if(i>0){const e=[0,100,300,500,800][i],s=[0,2,5,8,12][i],t=Ne&&ke?2:1;_e((s=>s+e*ce*t)),de((e=>e+i)),me((e=>Math.min(Y(ce,Ne),e+s)))}s(n),le(!0);const l=X(Ce());return Q(n,l.shape,l.x,l.y)?l:(je(!0),t)}))}),Ae);return()=>clearInterval(t)}),[e,Ae,xe,ve,ye,Ne,ke,ce]),(0,r.useEffect)((()=>{if(xe||ve||ye)return;const e=setInterval((()=>{we(!0);const e=setTimeout((()=>we(!1)),4e3);return()=>clearTimeout(e)}),12e3);return()=>clearInterval(e)}),[xe,ve,ye,ce]),(0,r.useEffect)((()=>{if(xe||ve||ye)return;const e=setInterval((()=>{me((e=>e<=1?(je(!0),0):e-1))}),1e3);return()=>clearInterval(e)}),[xe,ve,ye]),(0,r.useEffect)((()=>{if(!ve&&!ye&&he>=Me){Ne&&Se(!0);const e=ce+1;if(e>50)return ge(!0),void pe(!0);oe(e),Ie(e)}}),[he]),(0,r.useEffect)((()=>{function s(s){if(!s.repeat){if("p"!==s.key&&"P"!==s.key)return"r"===s.key||"R"===s.key?(oe(1),_e(0),ge(!1),void Ie(1)):void(xe||ve||ye||re((t=>{if(!t)return t;const r=function(s,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.shape;return Q(e,a,s,r)?{...t,x:s,y:r,shape:a}:t};switch(s.key){case"ArrowLeft":case"a":case"A":return r(t.x-1,t.y);case"ArrowRight":case"d":case"D":return r(t.x+1,t.y);case"ArrowDown":case"s":case"S":return r(t.x,t.y+1);case"ArrowUp":case"w":case"W":{let s=H(t.shape,1);const r=[[0,0],[-1,0],[1,0],[0,-1],[-2,0],[2,0]];for(const[a,n]of r)if(Q(e,s,t.x+a,t.y+n))return{...t,shape:s,x:t.x+a,y:t.y+n};return t}case"z":case"Z":{const s=H(t.shape,-1);return Q(e,s,t.x,t.y)?{...t,shape:s}:t}case"x":case"X":{const s=H(t.shape,1);return Q(e,s,t.x,t.y)?{...t,shape:s}:t}case"c":case"C":if(!ie)return t;if(le(!1),ae){const s=ae.key;ne({key:t.key,color:t.color,shape:t.shape});const r=X(s);return Q(e,r.shape,r.x,r.y)?r:t}ne({key:t.key,color:t.color,shape:t.shape});return X(Ce());case" ":{let s=t.y;for(;Q(e,t.shape,t.x,s+1);)s++;return{...t,y:s}}default:return t}})));pe((e=>!e))}}return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)}),[e,xe,ve,ye,ie,ae]);const Le=(0,r.useMemo)((()=>{if(!te)return 0;let s=te.y;for(;Q(e,te.shape,te.x,s+1);)s++;return s}),[e,te]),Ee=(0,r.useMemo)((()=>ee.slice(0,5)),[ee]),Pe=(0,r.useMemo)((()=>{const s=K(e);if(te){for(let e=0;e<te.shape.length;e++)for(let t=0;t<te.shape[e].length;t++){if(!te.shape[e][t])continue;const r=te.x+t,a=Le+e;a>=0&&0===s[a][r]&&(s[a][r]="ghost")}for(let e=0;e<te.shape.length;e++)for(let t=0;t<te.shape[e].length;t++){if(!te.shape[e][t])continue;const r=te.x+t,a=te.y+e;a>=0&&(s[a][r]=te.color)}}return s}),[e,te,Le]),Be=`${Z[((Re=ce)-1)%Z.length]} v${Re}`;var Re;const De=(e=>G[(e-1)%G.length])(ce),$e=e=>{let{val:s}=e;return(0,U.jsx)("div",{className:`${y} ${0===s?g:"ghost"===s?N:T}`,style:s&&"ghost"!==s?{backgroundColor:s}:{}})};return(0,U.jsxs)("div",{className:a,children:[(0,U.jsxs)("div",{className:n,children:[(0,U.jsx)("div",{className:i,children:"Tetris: Boss Rush"}),(0,U.jsx)("div",{className:l,children:(0,U.jsx)("span",{children:"Controls: \u2190 \u2192 move \u2022 \u2193 soft drop \u2022 \u2191/Z/X rotate \u2022 Space hard drop \u2022 C hold \u2022 P pause \u2022 R restart"})})]}),(0,U.jsxs)("div",{className:c,children:[(0,U.jsxs)("div",{className:o,children:[(0,U.jsx)("span",{children:"Level"}),(0,U.jsx)("strong",{children:ce})]}),(0,U.jsxs)("div",{className:o,children:[(0,U.jsx)("span",{children:"Score"}),(0,U.jsx)("strong",{children:ue})]}),(0,U.jsxs)("div",{className:o,children:[(0,U.jsx)("span",{children:"Lines"}),(0,U.jsxs)("strong",{children:[he,"/",Me]})]}),(0,U.jsxs)("div",{className:h,children:[(0,U.jsx)("div",{className:d,style:{width:fe/Y(ce,Ne)*100+"%"}}),(0,U.jsxs)("div",{className:u,children:[fe,"s"]})]}),(0,U.jsxs)("div",{className:_,"data-rage":be?"1":"0",children:[(0,U.jsx)("div",{className:f,children:Be}),(0,U.jsx)("div",{className:m,children:De})]}),Ne&&(0,U.jsx)("div",{className:x,children:ke?"2x Active!":"Bonus Stage"})]}),(0,U.jsxs)("div",{className:p,children:[(0,U.jsx)("div",{className:v,children:Pe.map(((e,s)=>(0,U.jsx)("div",{className:j,children:e.map(((e,t)=>(0,U.jsx)($e,{val:e},`${t}-${s}`)))},s)))}),(0,U.jsxs)("aside",{className:k,children:[(0,U.jsxs)("div",{className:S,children:[(0,U.jsx)("div",{className:b,children:"Next"}),(0,U.jsx)("div",{className:C,children:Ee.map(((e,s)=>(0,U.jsx)("div",{className:I,children:W[e].shapes[0].map(((s,t)=>(0,U.jsx)("div",{className:L,children:s.map(((s,t)=>(0,U.jsx)("div",{className:`${E} ${s?B:P}`,style:s?{backgroundColor:W[e].color}:{}},t)))},t)))},s)))})]}),(0,U.jsxs)("div",{className:S,children:[(0,U.jsx)("div",{className:b,children:"Hold"}),(0,U.jsx)("div",{className:R,children:ae?W[ae.key].shapes[0].map(((e,s)=>(0,U.jsx)("div",{className:L,children:e.map(((e,s)=>(0,U.jsx)("div",{className:`${E} ${e?B:P}`,style:e?{backgroundColor:W[ae.key].color}:{}},s)))},s))):(0,U.jsx)("div",{className:D,children:"\u2014"})})]}),(0,U.jsxs)("div",{className:S,children:[(0,U.jsx)("div",{className:b,children:"Boss"}),(0,U.jsxs)("div",{className:w,children:[(0,U.jsx)("div",{children:(0,U.jsx)("strong",{children:Be})}),(0,U.jsx)("div",{className:A,children:De}),(0,U.jsxs)("div",{className:M,children:[(0,U.jsx)("span",{children:"Rage"}),(0,U.jsx)("span",{children:be?"ON":"off"})]}),(0,U.jsxs)("div",{className:M,children:[(0,U.jsx)("span",{children:"Stage"}),(0,U.jsx)("span",{children:Ne?"Bonus":"Normal"})]})]})]}),ve&&(0,U.jsx)("div",{className:$,children:"\u23f3 Time's up! Press R to retry"}),ye&&(0,U.jsxs)("div",{className:O,children:["\ud83c\udfc5 You cleared ",50," bosses! Medal unlocked!"]})]})]})]})}}}]);
//# sourceMappingURL=2679.bf58dc6f.chunk.js.map