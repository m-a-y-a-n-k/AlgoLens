"use strict";(self.webpackChunkAlgoLens=self.webpackChunkAlgoLens||[]).push([[8974],{8974:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(2791);const s="TrafficSimulation_container__3ZMg7",a="TrafficSimulation_button__NwgbJ",o="TrafficSimulation_road__K7gIT",l="TrafficSimulation_car__qEOJ9";var i=n(184);const c=(e,t,n)=>({id:e,lane:Math.floor(Math.random()*t),pos:0,speed:Math.floor(Math.random()*(n+1)),color:`hsl(${360*Math.random()}, 70%, 50%)`});function u(e){let{lanes:t=3,roadLength:n=60,carCount:u=8,vmax:d=5,p:h=.2,interval:f=500}=e;const p=(0,r.useRef)(null),[m,g]=(0,r.useState)({width:0,height:0}),[v,_]=(0,r.useState)(((e,t,n)=>{const r=[];for(let s=0;s<t;s++)r.push(c(s,e,n));return r})(t,u,d)),[w,M]=(0,r.useState)(!1),x=(0,r.useRef)(null),S=(0,r.useRef)(u),b=()=>{if(!p.current)return;const e=p.current.getBoundingClientRect();g({width:e.width,height:e.height})};(0,r.useLayoutEffect)((()=>(b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b))),[]);const k=()=>{_((e=>{let r=e.map((e=>({...e})));for(let o=0;o<t;o++){const e=r.filter((e=>e.lane===o)).sort(((e,t)=>e.pos-t.pos));for(let t=0;t<e.length;t++){const r=e[t];r.speed<d&&r.speed++;const s=e[t+1];let a=s?s.pos-r.pos-1:n;r.speed>a&&(r.speed=a),Math.random()<h&&r.speed>0&&r.speed--,r.pos+=r.speed}}const s=r.filter((e=>e.pos<n)),a=r.length-s.length;for(let n=0;n<a;n++)s.push(c(S.current++,t,d));return s}))};(0,r.useEffect)((()=>(w?x.current=setInterval(k,f):clearInterval(x.current),()=>clearInterval(x.current))),[w,f]);const C=Math.max(0,m.width-40),L=n>1?C/(n-1):0,T=t>1?Math.max(0,m.height-25)/(t-1):0;return(0,i.jsxs)("div",{className:s,children:[(0,i.jsx)("h3",{children:"Traffic Simulation"}),(0,i.jsx)("div",{className:o,ref:p,children:v.map((e=>{const t=Math.round(e.pos*L),n=Math.round(e.lane*T);return(0,i.jsx)("div",{className:l,style:{backgroundColor:e.color,transform:`translate(${t}px, ${n}px)`},children:"\ud83d\ude97"},e.id)}))}),(0,i.jsx)("button",{onClick:()=>M((e=>!e)),className:a,children:w?"Stop":"Start"})]})}}}]);
//# sourceMappingURL=8974.a7951081.chunk.js.map