"use strict";(self.webpackChunkAlgoLens=self.webpackChunkAlgoLens||[]).push([[8346],{8346:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});var n=s(2791),i=s(7776),r=s(8329),o=s(184);const a=()=>{const[e,t]=(0,n.useState)([{id:0,status:"thinking",leftChopstick:0,rightChopstick:1},{id:1,status:"thinking",leftChopstick:1,rightChopstick:2},{id:2,status:"thinking",leftChopstick:2,rightChopstick:3},{id:3,status:"thinking",leftChopstick:3,rightChopstick:4},{id:4,status:"thinking",leftChopstick:4,rightChopstick:0}]),[s,a]=(0,n.useState)([!0,!0,!0,!0,!0]),[l,c]=(0,n.useState)(["Simulation started. All philosophers are thinking."]),h=e=>{c((t=>[e,...t].slice(0,5)))};return(0,o.jsxs)("div",{className:"os-visualizer container py-4",children:[(0,o.jsxs)("div",{className:"text-center mb-5",children:[(0,o.jsx)("h2",{className:"display-6 fw-bold text-primary",children:"Dining Philosophers"}),(0,o.jsx)("p",{className:"text-muted",children:"A classic synchronization problem illustrating resource contention and deadlock."})]}),(0,o.jsxs)("div",{className:"row justify-content-center align-items-center",children:[(0,o.jsx)("div",{className:"col-lg-7 text-center",children:(0,o.jsxs)("div",{className:"table-wrapper",children:[(0,o.jsxs)("div",{className:"table-circle shadow",children:[(0,o.jsx)("span",{className:"table-label",children:"Shared Resources"}),s.map(((e,t)=>{const s=(72*t+36)*(Math.PI/180),n=50+35*Math.cos(s),r=50+35*Math.sin(s);return(0,o.jsx)(i.E.div,{className:"chopstick "+(e?"available":"taken"),style:{left:`${n}%`,top:`${r}%`,transform:`translate(-50%, -50%) rotate(${72*t+126}deg)`},animate:{scale:e?1:.8,opacity:e?1:.3}},`chopstick-${t}`)}))]}),e.map(((n,r)=>{const l=(72*r-90)*(Math.PI/180),c=50+45*Math.cos(l),d=50+45*Math.sin(l);return(0,o.jsxs)(i.E.div,{className:`philosopher-node shadow-sm ${n.status}`,style:{left:`${c}%`,top:`${d}%`},whileHover:{scale:1.1},onClick:()=>(n=>{const i=e[n];if("thinking"===i.status)if(s[i.leftChopstick]&&s[i.rightChopstick]){const r=[...s];r[i.leftChopstick]=!1,r[i.rightChopstick]=!1,a(r);const o=[...e];o[n].status="eating",t(o),h(`Philosopher ${n} is now eating.`)}else{h(`Philosopher ${n} is waiting for chopsticks.`);const s=[...e];s[n].status="hungry",t(s)}else if("eating"===i.status||"hungry"===i.status){if("eating"===i.status){const e=[...s];e[i.leftChopstick]=!0,e[i.rightChopstick]=!0,a(e),h(`Philosopher ${n} finished eating and is now thinking.`)}const r=[...e];r[n].status="thinking",t(r)}})(r),children:[(0,o.jsx)("div",{className:"phil-avatar",children:"eating"===n.status?"\ud83c\udf5c":"hungry"===n.status?"\ud83e\udd24":"\ud83e\udd14"}),(0,o.jsxs)("div",{className:"phil-id",children:["P",n.id]})]},`phil-${r}`)}))]})}),(0,o.jsx)("div",{className:"col-lg-5",children:(0,o.jsxs)("div",{className:"card border-0 shadow-sm p-4 h-100",children:[(0,o.jsx)("h5",{className:"fw-bold mb-3",children:"Philosopher Status"}),(0,o.jsxs)("div",{className:"status-legend mb-3",children:[(0,o.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,o.jsx)("span",{className:"legend-dot thinking"}),(0,o.jsx)("span",{className:"ms-2 small",children:"Thinking (Idle)"})]}),(0,o.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,o.jsx)("span",{className:"legend-dot hungry"}),(0,o.jsx)("span",{className:"ms-2 small",children:"Hungry (Waiting for keys/forks)"})]}),(0,o.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,o.jsx)("span",{className:"legend-dot eating"}),(0,o.jsx)("span",{className:"ms-2 small",children:"Eating (Holding resources)"})]})]}),(0,o.jsx)("div",{className:"instructions alert alert-info py-2",children:(0,o.jsx)("small",{children:"Click on a philosopher to toggle their state. Two adjacent philosophers cannot eat simultaneously."})}),(0,o.jsx)("h6",{className:"fw-bold mt-4",children:"Simulation Logs"}),(0,o.jsx)("div",{className:"log-container",children:(0,o.jsx)(r.M,{children:l.map(((e,t)=>(0,o.jsx)(i.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0},className:"log-entry",children:e},e+t)))})})]})})]})]})}},8329:(e,t,s)=>{s.d(t,{M:()=>v});var n=s(184),i=s(2791),r=s(7497),o=s(9829),a=s(2199),l=s(131),c=s(3592),h=s(9090);function d(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function u(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return e=>{let s=!1;const n=t.map((t=>{const n=d(t,e);return s||"function"!==typeof n||(s=!0),n}));if(s)return()=>{for(let e=0;e<n.length;e++){const s=n[e];"function"===typeof s?s():d(t[e],null)}}}}class p extends i.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,s=(0,c.R)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=s-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f(e){let{children:t,isPresent:s,anchorX:r,root:o}=e;const a=(0,i.useId)(),l=(0,i.useRef)(null),c=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,i.useContext)(h._),f=t.props?.ref??t?.ref,m=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i.useCallback(u(...t),t)}(l,f);return(0,i.useInsertionEffect)((()=>{const{width:e,height:t,top:n,left:i,right:h}=c.current;if(s||!l.current||!e||!t)return;const u="left"===r?`left: ${i}`:`right: ${h}`;l.current.dataset.motionPopId=a;const p=document.createElement("style");d&&(p.nonce=d);const f=o??document.head;return f.appendChild(p),p.sheet&&p.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${u}px !important;\n            top: ${n}px !important;\n          }\n        `),()=>{f.contains(p)&&f.removeChild(p)}}),[s]),(0,n.jsx)(p,{isPresent:s,childRef:l,sizeRef:c,children:i.cloneElement(t,{ref:m})})}const m=e=>{let{children:t,initial:s,isPresent:r,onExitComplete:a,custom:c,presenceAffectsLayout:h,mode:d,anchorX:u,root:p}=e;const m=(0,o.h)(g),x=(0,i.useId)();let k=!0,j=(0,i.useMemo)((()=>(k=!1,{id:x,initial:s,isPresent:r,custom:c,onExitComplete:e=>{m.set(e,!0);for(const t of m.values())if(!t)return;a&&a()},register:e=>(m.set(e,!1),()=>m.delete(e))})),[r,m,a]);return h&&k&&(j={...j}),(0,i.useMemo)((()=>{m.forEach(((e,t)=>m.set(t,!1)))}),[r]),i.useEffect((()=>{!r&&!m.size&&a&&a()}),[r]),"popLayout"===d&&(t=(0,n.jsx)(f,{isPresent:r,anchorX:u,root:p,children:t})),(0,n.jsx)(l.O.Provider,{value:j,children:t})};function g(){return new Map}var x=s(9278);const k=e=>e.key||"";function j(e){const t=[];return i.Children.forEach(e,(e=>{(0,i.isValidElement)(e)&&t.push(e)})),t}const v=e=>{let{children:t,custom:s,initial:l=!0,onExitComplete:c,presenceAffectsLayout:h=!0,mode:d="sync",propagate:u=!1,anchorX:p="left",root:f}=e;const[g,v]=(0,x.oO)(u),y=(0,i.useMemo)((()=>j(t)),[t]),C=u&&!g?[]:y.map(k),N=(0,i.useRef)(!0),w=(0,i.useRef)(y),b=(0,o.h)((()=>new Map)),P=(0,i.useRef)(new Set),[$,E]=(0,i.useState)(y),[M,R]=(0,i.useState)(y);(0,a.L)((()=>{N.current=!1,w.current=y;for(let e=0;e<M.length;e++){const t=k(M[e]);C.includes(t)?(b.delete(t),P.current.delete(t)):!0!==b.get(t)&&b.set(t,!1)}}),[M,C.length,C.join("-")]);const S=[];if(y!==$){let e=[...y];for(let t=0;t<M.length;t++){const s=M[t],n=k(s);C.includes(n)||(e.splice(t,0,s),S.push(s))}return"wait"===d&&S.length&&(e=S),R(j(e)),E(y),null}const{forceRender:A}=(0,i.useContext)(r.p);return(0,n.jsx)(n.Fragment,{children:M.map((e=>{const t=k(e),i=!(u&&!g)&&(y===M||C.includes(t));return(0,n.jsx)(m,{isPresent:i,initial:!(N.current&&!l)&&void 0,custom:s,presenceAffectsLayout:h,mode:d,root:f,onExitComplete:i?void 0:()=>{if(P.current.has(t))return;if(P.current.add(t),!b.has(t))return;b.set(t,!0);let e=!0;b.forEach((t=>{t||(e=!1)})),e&&(A?.(),R(w.current),u&&v?.(),c&&c())},anchorX:p,children:e},t)}))})}}}]);
//# sourceMappingURL=8346.c58c92ca.chunk.js.map