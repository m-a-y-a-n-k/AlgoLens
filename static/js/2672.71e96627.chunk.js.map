{"version":3,"file":"static/js/2672.71e96627.chunk.js","mappings":"wKAGA,MAAMA,EAASC,EAAAA,GAAAA,GAAW;;;;;;;;;;;EAapBC,EAAaD,EAAAA,GAAAA,GAAW;;;;;;;;;;EAYxBE,EAAaF,EAAAA,GAAAA,GAAW;;;;EAMxBG,EAASH,EAAAA,GAAAA,MAAc;;;;EAMvBI,EAAeJ,EAAAA,GAAAA,GAAW;;;;;;;EAS1BK,EAAQL,EAAAA,GAAAA,KAAa;;;;;;;EASrBM,EAAQN,EAAAA,GAAAA,IAAY;;;EAKpBO,EAASP,EAAAA,GAAAA,KAAa;;EAItBQ,EAAYR,EAAAA,GAAAA,GAAW;;;;;EAOvBS,EAAST,EAAAA,GAAAA,MAAc;;;;gBAIZU,GACbA,EAAEC,QACE,4CACA;WACID,GAAOA,EAAEC,QAAU,UAAY;;;;;;;;;;;;EAcrCC,EAAOZ,EAAAA,GAAAA,GAAW;;;;;EAOxB,SAASa,EAAMC,EAAGC,EAAGC,GACnB,OAAOC,KAAKC,IAAIH,EAAGE,KAAKE,IAAIH,EAAGF,GACjC,CAGA,SAASM,EAASC,GAEhB,MAAMC,GAAKD,EAAI,GAAK,EACpB,GAAIC,EAAI,GAAK,CAEX,MAAMC,EAAID,EAAI,GACd,MAAO,CACLL,KAAKO,MAAM,GAAK,GAAKD,GACrBN,KAAKO,MAAM,GAAK,IAAMD,GACtBN,KAAKO,MAAM,IAAM,IAAMD,GAE3B,CAEA,MAAMA,GAAKD,EAAI,IAAO,GACtB,MAAO,CACLL,KAAKO,MAAM,GAAK,IAAMD,GACtBN,KAAKO,MAAM,GAAK,IAAMD,GACtBN,KAAKO,MAAM,GAAK,GAAKD,GAEzB,CAEe,SAASE,IACtB,MAAMC,GAAYC,EAAAA,EAAAA,QAAO,MACnBC,GAAUD,EAAAA,EAAAA,QAAO,MACjBE,GAASF,EAAAA,EAAAA,QAAO,GAChBG,GAAUH,EAAAA,EAAAA,QAAO,IAEhBI,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAAYC,IAAiBF,EAAAA,EAAAA,UAAS,MACtCG,EAAYC,IAAiBJ,EAAAA,EAAAA,UAAS,MACtCK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,IAC5BO,EAAaC,IAAkBR,EAAAA,EAAAA,WAAS,IACxCS,EAAYC,IAAiBV,EAAAA,EAAAA,UAAS,MACtCW,EAAUC,IAAeZ,EAAAA,EAAAA,UAAS,MAEnCa,GAAUnB,EAAAA,EAAAA,QAAO,CACrBoB,EAAG,EACHC,EAAG,EACHC,UAAW,KACXC,KAAM,QAIRC,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAOxB,EAAQyB,QACfC,EAAS5B,EAAU2B,QACzB,IAAKD,IAASE,EAAQ,OAEtB,MAAMC,EAAK,IAAIC,gBAAe,KAC5B,MAAMC,EAAOL,EAAKM,wBACZC,EAAM9C,EAAM+C,OAAOC,kBAAoB,EAAG,EAAG,GAGnDP,EAAOQ,MAAQ7C,KAAKC,IAAI,EAAGD,KAAKO,MAAMiC,EAAKK,MAAQH,IACnDL,EAAOS,OAAS9C,KAAKC,IAAI,EAAGD,KAAKO,MAAMiC,EAAKM,OAASJ,IACrD,MAAMK,EAAMV,EAAOW,WAAW,MAC9BD,EAAIE,aAAaP,EAAK,EAAG,EAAGA,EAAK,EAAG,GAGpC,MAAMQ,EAAKlD,KAAKC,IAAI,GAAID,KAAKO,MAAMkB,IAC7B0B,EAAKnD,KAAKC,IAAI,GAAID,KAAKO,MAAMkB,IACnCI,EAAQO,QAAQN,EAAIoB,EACpBrB,EAAQO,QAAQL,EAAIoB,EACpBtB,EAAQO,QAAQJ,UAAYe,EAAIK,gBAAgBF,EAAIC,GACpDtB,EAAQO,QAAQH,KAAOJ,EAAQO,QAAQJ,UAAUC,IAAI,IAGvD,OADAK,EAAGe,QAAQlB,GACJ,IAAMG,EAAGgB,YAAY,GAC3B,CAAC7B,IAEJ,MAAM8B,GAAUC,EAAAA,EAAAA,UAAQ,IAEf,CACL,CAAEnD,EAAG,GAAMY,EAAa,EAAGwC,EAAG,IAC9B,CAAEpD,EAAG,GAAMY,EAAa,EAAGwC,EAAG,MAE/B,CAACxC,IAuFJ,OArFAiB,EAAAA,EAAAA,YAAU,KACR,MAAMG,EAAS5B,EAAU2B,QACzB,IAAKC,EAAQ,OACb,MAAMU,EAAMV,EAAOW,WAAW,MAExBU,EAASA,KAEb,GADA9C,EAAOwB,QAAUuB,sBAAsBD,IAClC7B,EAAQO,QAAQJ,UAAW,OAEhC,MAAMQ,EAAOH,EAAOI,wBACdX,EAAIU,EAAKK,MACTd,EAAIS,EAAKM,OAEXhC,IAASD,EAAQuB,SAAW,KAAQf,GACxC,MAAMf,EAAIO,EAAQuB,QAEZc,EAAKrB,EAAQO,QAAQN,EACrBqB,EAAKtB,EAAQO,QAAQL,EACrBE,EAAOJ,EAAQO,QAAQH,KAEvB2B,EAAK,EAAI5D,KAAK6D,GAAM7D,KAAKC,IAAI,KAAMkB,GACnC2C,EAAY,IAAJF,EAGd,IAAIG,EAAM,EACV,IAAK,IAAIC,EAAI,EAAGA,EAAIb,EAAIa,IAAK,CAC3B,MAAMP,EAAIO,GAAKb,EAAK,GACpB,IAAK,IAAIc,EAAI,EAAGA,EAAIf,EAAIe,IAAK,CAC3B,MAAM5D,EAAI4D,GAAKf,EAAK,GAEpB,IAAIpD,EAAI,EACR,IAAK,IAAIoE,EAAI,EAAGA,EAAIX,EAAQY,OAAQD,IAAK,CACvC,MAAME,EAAK/D,EAAIkD,EAAQW,GAAG7D,EACpBgE,EAAKZ,EAAIF,EAAQW,GAAGT,EACpBa,EAAItE,KAAKuE,KAAKH,EAAKA,EAAKC,EAAKA,GAC7BG,EAAQZ,EAAIU,EAAIR,EAAQxD,EAG9BR,GAFYE,KAAKyE,IAAID,IACTjD,EAAc,GAAK,EAAI,GAAK+C,GAAK,EAE/C,CAGA,IAAIlE,EAAIR,EAAME,EAAI,KAAM,EAAG,GAC3BM,EAAIJ,KAAK0E,KAAKtE,GAAKJ,KAAK2E,IAAI3E,KAAK4E,IAAIxE,GAAI,EAAIuB,GAE7C,MAAO2C,EAAGO,EAAG9E,GAAKI,EAASC,GAC3B6B,EAAK8B,KAASO,EACdrC,EAAK8B,KAASc,EACd5C,EAAK8B,KAAShE,EACdkC,EAAK8B,KAAS,GAChB,CACF,CAGAhB,EAAI+B,OACJ/B,EAAIgC,uBAAwB,EAC5BhC,EAAIiC,UAAU,EAAG,EAAGlD,EAAGC,GACvBgB,EAAIkC,aAAapD,EAAQO,QAAQJ,UAAW,EAAG,GAE/Ce,EAAImC,yBAA2B,cAC/BnC,EAAIoC,UAAU9C,EAAQ,EAAG,EAAGa,EAAIC,EAAI,EAAG,EAAGrB,EAAGC,GAG7CgB,EAAImC,yBAA2B,UAC/B3B,EAAQ6B,SAAQ,CAAClB,EAAGmB,KAClB,MAAMC,EAAKpB,EAAE7D,EAAIyB,EACXyD,EAAKrB,EAAET,EAAI1B,EACjBgB,EAAIyC,YACJzC,EAAI0C,IAAIH,EAAIC,EAAI,EAAG,EAAa,EAAVvF,KAAK6D,IAC3Bd,EAAI2C,UACM,IAARL,EAAY,yBAA2B,wBACzCtC,EAAI4C,OACJ5C,EAAIyC,YACJzC,EAAI0C,IAAIH,EAAIC,EAAI,GAAI,EAAa,EAAVvF,KAAK6D,IAC5Bd,EAAI6C,YAAc,yBAClB7C,EAAI8C,UAAY,EAChB9C,EAAI+C,QAAQ,IAEd/C,EAAIgD,SAAS,EAIf,OADAnF,EAAOwB,QAAUuB,sBAAsBD,GAChC,IAAMsC,qBAAqBpF,EAAOwB,QAAQ,GAChD,CAACb,EAAaI,EAAUb,EAASyC,EAASlC,EAAOF,KAGlD8E,EAAAA,EAAAA,MAACnH,EAAM,CAAAoH,SAAA,EACLC,EAAAA,EAAAA,KAACnH,EAAU,CAAAkH,UACTC,EAAAA,EAAAA,KAAClH,EAAU,CAACmH,IAAKzF,EAAQuF,UACvBC,EAAAA,EAAAA,KAACjH,EAAM,CAACkH,IAAK3F,SAIjBwF,EAAAA,EAAAA,MAAC9G,EAAY,CAAA+G,SAAA,EACXD,EAAAA,EAAAA,MAAC1G,EAAS,CAAA2G,SAAA,EACRC,EAAAA,EAAAA,KAAC3G,EAAM,CAACE,SAAO,EAAC2G,QAASA,IAAMtF,GAAYX,IAAOA,IAAG8F,SAClDpF,EAAU,QAAU,UAEvBqF,EAAAA,EAAAA,KAAC3G,EAAM,CACL6G,QAASA,KACPxF,EAAQuB,QAAU,CAAC,EACnB8D,SACH,mBAKHD,EAAAA,EAAAA,MAAC7G,EAAK,CAAA8G,SAAA,CAAC,sBACaC,EAAAA,EAAAA,KAAC9G,EAAK,CAAA6G,SAAEjF,EAAWqF,QAAQ,SAE/CH,EAAAA,EAAAA,KAAC7G,EAAM,CACLiH,KAAK,QACLrG,IAAI,OACJD,IAAI,OACJuG,KAAK,OACLC,MAAOxF,EACPyF,SAAWC,GAAMzF,EAAc0F,WAAWD,EAAEE,OAAOJ,WAGrDR,EAAAA,EAAAA,MAAC7G,EAAK,CAAA8G,SAAA,CAAC,eACMC,EAAAA,EAAAA,KAAC9G,EAAK,CAAA6G,SAAE/E,EAAWmF,QAAQ,SAExCH,EAAAA,EAAAA,KAAC7G,EAAM,CACLiH,KAAK,QACLrG,IAAI,OACJD,IAAI,OACJuG,KAAK,QACLC,MAAOtF,EACPuF,SAAWC,GAAMvF,EAAcwF,WAAWD,EAAEE,OAAOJ,WAGrDR,EAAAA,EAAAA,MAAC7G,EAAK,CAAA8G,SAAA,CAAC,UACCD,EAAAA,EAAAA,MAAC5G,EAAK,CAAA6G,SAAA,CAAE7E,EAAMiF,QAAQ,GAAG,cAEjCH,EAAAA,EAAAA,KAAC7G,EAAM,CACLiH,KAAK,QACLrG,IAAI,MACJD,IAAI,MACJuG,KAAK,OACLC,MAAOpF,EACPqF,SAAWC,GAAMrF,EAASsF,WAAWD,EAAEE,OAAOJ,WAGhDR,EAAAA,EAAAA,MAAC7G,EAAK,CAAA8G,SAAA,CAAC,aACIC,EAAAA,EAAAA,KAAC9G,EAAK,CAAA6G,SAAEvE,EAAS2E,QAAQ,SAEpCH,EAAAA,EAAAA,KAAC7G,EAAM,CACLiH,KAAK,QACLrG,IAAI,MACJD,IAAI,MACJuG,KAAK,OACLC,MAAO9E,EACP+E,SAAWC,GAAM/E,EAAYgF,WAAWD,EAAEE,OAAOJ,WAGnDR,EAAAA,EAAAA,MAAC7G,EAAK,CAAA8G,SAAA,CAAC,sBACaD,EAAAA,EAAAA,MAAC5G,EAAK,CAAA6G,SAAA,CAAEzE,EAAW,YAEvC0E,EAAAA,EAAAA,KAAC7G,EAAM,CACLiH,KAAK,QACLrG,IAAI,MACJD,IAAI,MACJuG,KAAK,KACLC,MAAOhF,EACPiF,SAAWC,GAAMjF,EAAcoF,SAASH,EAAEE,OAAOJ,MAAO,QAG1DN,EAAAA,EAAAA,KAAC5G,EAAS,CAACwH,MAAO,CAAEC,UAAW,IAAKd,UAClCD,EAAAA,EAAAA,MAACzG,EAAM,CAAC6G,QAASA,IAAM7E,GAAgBpB,IAAOA,IAAG8F,SAAA,CAAC,gBAClC3E,EAAc,KAAO,YAIvC0E,EAAAA,EAAAA,MAACtG,EAAI,CAAAuG,SAAA,CAAC,kDAEJC,EAAAA,EAAAA,KAAA,SAAM,4DACNA,EAAAA,EAAAA,KAAA,SAAM,6DAKhB,CC3WA,MAAMc,EAAgBlI,EAAAA,GAAAA,GAAW;;;;;;;;EAU3BmI,EAAUnI,EAAAA,GAAAA,EAAU;;;;;;EAQpBoI,EAAapI,EAAAA,GAAAA,CAAS;;;;;;EAQb,SAASqI,IACtB,OACEnB,EAAAA,EAAAA,MAACgB,EAAa,CAAAf,SAAA,EACZC,EAAAA,EAAAA,KAACe,EAAO,CAAAhB,SAAC,uBACTC,EAAAA,EAAAA,KAACgB,EAAU,CAAAjB,SAAC,yJAKZC,EAAAA,EAAAA,KAAC3F,EAAgB,MAGvB,C","sources":["routing/site/physics/components/WaveInterference/WaveInterference.jsx","routing/site/physics/components/WaveInterference/index.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\n\r\nconst Layout = styled.div`\r\n  width: 100%;\r\n  max-width: 1100px;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 16px;\r\n\r\n  @media (min-width: 980px) {\r\n    grid-template-columns: 1fr 340px;\r\n    align-items: start;\r\n  }\r\n`\r\n\r\nconst CanvasCard = styled.div`\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 16px;\r\n  background: linear-gradient(\r\n    180deg,\r\n    rgba(255, 255, 255, 0.06),\r\n    rgba(255, 255, 255, 0.02)\r\n  );\r\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.45);\r\n  overflow: hidden;\r\n`\r\n\r\nconst CanvasWrap = styled.div`\r\n  width: 100%;\r\n  aspect-ratio: 1;\r\n  position: relative;\r\n`\r\n\r\nconst Canvas = styled.canvas`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: block;\r\n`\r\n\r\nconst ControlsCard = styled.div`\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 16px;\r\n  background: rgba(0, 0, 0, 0.35);\r\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.35);\r\n  padding: 14px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n`\r\n\r\nconst Label = styled.label`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 10px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  font-size: 0.9rem;\r\n  margin-bottom: 6px;\r\n`\r\n\r\nconst Value = styled.span`\r\n  color: rgba(255, 255, 255, 0.65);\r\n  font-variant-numeric: tabular-nums;\r\n`\r\n\r\nconst Slider = styled.input`\r\n  width: 100%;\r\n`\r\n\r\nconst ButtonRow = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n  margin-bottom: 12px;\r\n`\r\n\r\nconst Button = styled.button`\r\n  padding: 10px 12px;\r\n  border-radius: 10px;\r\n  border: 1px solid rgba(255, 255, 255, 0.14);\r\n  background: ${(p) =>\r\n    p.primary\r\n      ? \"linear-gradient(180deg, #7fe7ff, #2dd4ff)\"\r\n      : \"rgba(255, 255, 255, 0.06)\"};\r\n  color: ${(p) => (p.primary ? \"#041014\" : \"rgba(255, 255, 255, 0.9)\")};\r\n  font-weight: 700;\r\n  cursor: pointer;\r\n  transition: transform 0.15s ease;\r\n  min-width: 110px;\r\n\r\n  &:hover {\r\n    transform: translateY(-1px);\r\n  }\r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n`\r\n\r\nconst Help = styled.div`\r\n  margin-top: 10px;\r\n  font-size: 0.85rem;\r\n  color: rgba(255, 255, 255, 0.65);\r\n  line-height: 1.35;\r\n`\r\n\r\nfunction clamp(n, a, b) {\r\n  return Math.max(a, Math.min(b, n))\r\n}\r\n\r\n// Diverging palette: blue -> black -> orange (high contrast)\r\nfunction colorMap(v) {\r\n  // v expected in [-1, 1]\r\n  const x = (v + 1) / 2\r\n  if (x < 0.5) {\r\n    // blue side\r\n    const t = x / 0.5\r\n    return [\r\n      Math.floor(20 + 40 * t),\r\n      Math.floor(80 + 120 * t),\r\n      Math.floor(120 + 135 * t),\r\n    ]\r\n  }\r\n  // orange side\r\n  const t = (x - 0.5) / 0.5\r\n  return [\r\n    Math.floor(35 + 220 * t),\r\n    Math.floor(35 + 140 * t),\r\n    Math.floor(40 + 60 * t),\r\n  ]\r\n}\r\n\r\nexport default function WaveInterference() {\r\n  const canvasRef = useRef(null)\r\n  const wrapRef = useRef(null)\r\n  const rafRef = useRef(0)\r\n  const timeRef = useRef(0)\r\n\r\n  const [running, setRunning] = useState(true)\r\n  const [separation, setSeparation] = useState(0.45) // normalized\r\n  const [wavelength, setWavelength] = useState(0.12) // normalized\r\n  const [speed, setSpeed] = useState(1.0)\r\n  const [attenuation, setAttenuation] = useState(true)\r\n  const [resolution, setResolution] = useState(220) // internal render res\r\n  const [contrast, setContrast] = useState(1.25)\r\n\r\n  const buffers = useRef({\r\n    w: 0,\r\n    h: 0,\r\n    imageData: null,\r\n    data: null,\r\n  })\r\n\r\n  // Resize backing buffer (fast: render at internal resolution, scale up)\r\n  useEffect(() => {\r\n    const wrap = wrapRef.current\r\n    const canvas = canvasRef.current\r\n    if (!wrap || !canvas) return\r\n\r\n    const ro = new ResizeObserver(() => {\r\n      const rect = wrap.getBoundingClientRect()\r\n      const dpr = clamp(window.devicePixelRatio || 1, 1, 2)\r\n\r\n      // canvas in device pixels for crisp UI overlays; drawing uses logical pixels\r\n      canvas.width = Math.max(1, Math.floor(rect.width * dpr))\r\n      canvas.height = Math.max(1, Math.floor(rect.height * dpr))\r\n      const ctx = canvas.getContext(\"2d\")\r\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0)\r\n\r\n      // internal low-res buffer (square-ish)\r\n      const iw = Math.max(60, Math.floor(resolution))\r\n      const ih = Math.max(60, Math.floor(resolution))\r\n      buffers.current.w = iw\r\n      buffers.current.h = ih\r\n      buffers.current.imageData = ctx.createImageData(iw, ih)\r\n      buffers.current.data = buffers.current.imageData.data\r\n    })\r\n    ro.observe(wrap)\r\n    return () => ro.disconnect()\r\n  }, [resolution])\r\n\r\n  const sources = useMemo(() => {\r\n    // two sources centered horizontally\r\n    return [\r\n      { x: 0.5 - separation / 2, y: 0.5 },\r\n      { x: 0.5 + separation / 2, y: 0.5 },\r\n    ]\r\n  }, [separation])\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    if (!canvas) return\r\n    const ctx = canvas.getContext(\"2d\")\r\n\r\n    const render = () => {\r\n      rafRef.current = requestAnimationFrame(render)\r\n      if (!buffers.current.imageData) return\r\n\r\n      const rect = canvas.getBoundingClientRect()\r\n      const w = rect.width\r\n      const h = rect.height\r\n\r\n      if (running) timeRef.current += 0.016 * speed\r\n      const t = timeRef.current\r\n\r\n      const iw = buffers.current.w\r\n      const ih = buffers.current.h\r\n      const data = buffers.current.data\r\n\r\n      const k = (2 * Math.PI) / Math.max(1e-4, wavelength)\r\n      const omega = k * 0.35 // visually nice; not physical units\r\n\r\n      // field\r\n      let ptr = 0\r\n      for (let j = 0; j < ih; j++) {\r\n        const y = j / (ih - 1)\r\n        for (let i = 0; i < iw; i++) {\r\n          const x = i / (iw - 1)\r\n\r\n          let a = 0\r\n          for (let s = 0; s < sources.length; s++) {\r\n            const dx = x - sources[s].x\r\n            const dy = y - sources[s].y\r\n            const r = Math.sqrt(dx * dx + dy * dy)\r\n            const phase = k * r - omega * t\r\n            const amp = Math.sin(phase)\r\n            const att = attenuation ? 1 / (1 + 12 * r) : 1\r\n            a += amp * att\r\n          }\r\n\r\n          // normalize to [-1, 1], then apply contrast curve\r\n          let v = clamp(a / 1.6, -1, 1)\r\n          v = Math.sign(v) * Math.pow(Math.abs(v), 1 / contrast)\r\n\r\n          const [r, g, b] = colorMap(v)\r\n          data[ptr++] = r\r\n          data[ptr++] = g\r\n          data[ptr++] = b\r\n          data[ptr++] = 255\r\n        }\r\n      }\r\n\r\n      // draw scaled\r\n      ctx.save()\r\n      ctx.imageSmoothingEnabled = true\r\n      ctx.clearRect(0, 0, w, h)\r\n      ctx.putImageData(buffers.current.imageData, 0, 0)\r\n      // scale low-res image to full canvas\r\n      ctx.globalCompositeOperation = \"source-over\"\r\n      ctx.drawImage(canvas, 0, 0, iw, ih, 0, 0, w, h)\r\n\r\n      // draw sources markers\r\n      ctx.globalCompositeOperation = \"lighter\"\r\n      sources.forEach((s, idx) => {\r\n        const sx = s.x * w\r\n        const sy = s.y * h\r\n        ctx.beginPath()\r\n        ctx.arc(sx, sy, 6, 0, Math.PI * 2)\r\n        ctx.fillStyle =\r\n          idx === 0 ? \"rgba(127,231,255,0.85)\" : \"rgba(251,172,97,0.85)\"\r\n        ctx.fill()\r\n        ctx.beginPath()\r\n        ctx.arc(sx, sy, 12, 0, Math.PI * 2)\r\n        ctx.strokeStyle = \"rgba(255,255,255,0.35)\"\r\n        ctx.lineWidth = 1\r\n        ctx.stroke()\r\n      })\r\n      ctx.restore()\r\n    }\r\n\r\n    rafRef.current = requestAnimationFrame(render)\r\n    return () => cancelAnimationFrame(rafRef.current)\r\n  }, [attenuation, contrast, running, sources, speed, wavelength])\r\n\r\n  return (\r\n    <Layout>\r\n      <CanvasCard>\r\n        <CanvasWrap ref={wrapRef}>\r\n          <Canvas ref={canvasRef} />\r\n        </CanvasWrap>\r\n      </CanvasCard>\r\n\r\n      <ControlsCard>\r\n        <ButtonRow>\r\n          <Button primary onClick={() => setRunning((v) => !v)}>\r\n            {running ? \"Pause\" : \"Play\"}\r\n          </Button>\r\n          <Button\r\n            onClick={() => {\r\n              timeRef.current = 0\r\n            }}\r\n          >\r\n            Reset Time\r\n          </Button>\r\n        </ButtonRow>\r\n\r\n        <Label>\r\n          Source separation <Value>{separation.toFixed(2)}</Value>\r\n        </Label>\r\n        <Slider\r\n          type=\"range\"\r\n          min=\"0.10\"\r\n          max=\"0.80\"\r\n          step=\"0.01\"\r\n          value={separation}\r\n          onChange={(e) => setSeparation(parseFloat(e.target.value))}\r\n        />\r\n\r\n        <Label>\r\n          Wavelength <Value>{wavelength.toFixed(2)}</Value>\r\n        </Label>\r\n        <Slider\r\n          type=\"range\"\r\n          min=\"0.05\"\r\n          max=\"0.25\"\r\n          step=\"0.005\"\r\n          value={wavelength}\r\n          onChange={(e) => setWavelength(parseFloat(e.target.value))}\r\n        />\r\n\r\n        <Label>\r\n          Speed <Value>{speed.toFixed(2)}Ã—</Value>\r\n        </Label>\r\n        <Slider\r\n          type=\"range\"\r\n          min=\"0.2\"\r\n          max=\"3.0\"\r\n          step=\"0.05\"\r\n          value={speed}\r\n          onChange={(e) => setSpeed(parseFloat(e.target.value))}\r\n        />\r\n\r\n        <Label>\r\n          Contrast <Value>{contrast.toFixed(2)}</Value>\r\n        </Label>\r\n        <Slider\r\n          type=\"range\"\r\n          min=\"0.8\"\r\n          max=\"2.0\"\r\n          step=\"0.05\"\r\n          value={contrast}\r\n          onChange={(e) => setContrast(parseFloat(e.target.value))}\r\n        />\r\n\r\n        <Label>\r\n          Render resolution <Value>{resolution}px</Value>\r\n        </Label>\r\n        <Slider\r\n          type=\"range\"\r\n          min=\"120\"\r\n          max=\"340\"\r\n          step=\"10\"\r\n          value={resolution}\r\n          onChange={(e) => setResolution(parseInt(e.target.value, 10))}\r\n        />\r\n\r\n        <ButtonRow style={{ marginTop: 12 }}>\r\n          <Button onClick={() => setAttenuation((v) => !v)}>\r\n            Attenuation: {attenuation ? \"On\" : \"Off\"}\r\n          </Button>\r\n        </ButtonRow>\r\n\r\n        <Help>\r\n          - Blue/orange regions indicate opposite phase.\r\n          <br />- High contrast makes nodes (quiet bands) easier to see.\r\n          <br />- Lower resolution improves performance on mobile.\r\n        </Help>\r\n      </ControlsCard>\r\n    </Layout>\r\n  )\r\n}\r\n","import React from \"react\"\r\nimport styled from \"styled-components\"\r\nimport WaveInterference from \"./WaveInterference\"\r\n\r\nconst MainContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px;\r\n  background-color: #05060b;\r\n  min-height: 100vh;\r\n  color: white;\r\n`\r\n\r\nconst Heading = styled.h1`\r\n  font-size: clamp(1.6rem, 3vw, 2.4rem);\r\n  color: #7fe7ff;\r\n  margin-bottom: 14px;\r\n  text-align: center;\r\n  text-shadow: 0 0 14px rgba(127, 231, 255, 0.35);\r\n`\r\n\r\nconst Subheading = styled.p`\r\n  margin: 0 0 18px 0;\r\n  text-align: center;\r\n  color: rgba(255, 255, 255, 0.72);\r\n  max-width: 900px;\r\n  font-size: 0.95rem;\r\n`\r\n\r\nexport default function Main() {\r\n  return (\r\n    <MainContainer>\r\n      <Heading>Wave Interference</Heading>\r\n      <Subheading>\r\n        Two sources emit waves and create an interference pattern. Adjust source\r\n        separation, wavelength, and speed to see constructive/destructive\r\n        regions.\r\n      </Subheading>\r\n      <WaveInterference />\r\n    </MainContainer>\r\n  )\r\n}\r\n"],"names":["Layout","styled","CanvasCard","CanvasWrap","Canvas","ControlsCard","Label","Value","Slider","ButtonRow","Button","p","primary","Help","clamp","n","a","b","Math","max","min","colorMap","v","x","t","floor","WaveInterference","canvasRef","useRef","wrapRef","rafRef","timeRef","running","setRunning","useState","separation","setSeparation","wavelength","setWavelength","speed","setSpeed","attenuation","setAttenuation","resolution","setResolution","contrast","setContrast","buffers","w","h","imageData","data","useEffect","wrap","current","canvas","ro","ResizeObserver","rect","getBoundingClientRect","dpr","window","devicePixelRatio","width","height","ctx","getContext","setTransform","iw","ih","createImageData","observe","disconnect","sources","useMemo","y","render","requestAnimationFrame","k","PI","omega","ptr","j","i","s","length","dx","dy","r","sqrt","phase","sin","sign","pow","abs","g","save","imageSmoothingEnabled","clearRect","putImageData","globalCompositeOperation","drawImage","forEach","idx","sx","sy","beginPath","arc","fillStyle","fill","strokeStyle","lineWidth","stroke","restore","cancelAnimationFrame","_jsxs","children","_jsx","ref","onClick","toFixed","type","step","value","onChange","e","parseFloat","target","parseInt","style","marginTop","MainContainer","Heading","Subheading","Main"],"sourceRoot":""}