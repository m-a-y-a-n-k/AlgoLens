{"version":3,"file":"static/js/8738.0ea38595.chunk.js","mappings":"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","sources":["common/components/FavoriteButton.jsx","common/hooks/useTrackView.jsx","routing/site/games/components/ConnectFour/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport { FaStar, FaRegStar } from \"react-icons/fa\"\r\nimport { useUser } from \"common/context/UserContext\"\r\nimport \"./FavoriteButton.css\"\r\n\r\nconst FavoriteButton = ({ topic }) => {\r\n  const { addFavorite, removeFavorite, isFavorite } = useUser()\r\n  const [favorited, setFavorited] = useState(false)\r\n  const [showToast, setShowToast] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setFavorited(isFavorite(topic.id))\r\n  }, [topic.id, isFavorite])\r\n\r\n  const handleToggleFavorite = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    if (favorited) {\r\n      removeFavorite(topic.id)\r\n      setFavorited(false)\r\n    } else {\r\n      addFavorite(topic)\r\n      setFavorited(true)\r\n      setShowToast(true)\r\n      setTimeout(() => setShowToast(false), 2000)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        className={`favorite-button ${favorited ? \"favorited\" : \"\"}`}\r\n        onClick={handleToggleFavorite}\r\n        title={favorited ? \"Remove from favorites\" : \"Add to favorites\"}\r\n        aria-label={favorited ? \"Remove from favorites\" : \"Add to favorites\"}\r\n      >\r\n        {favorited ? <FaStar /> : <FaRegStar />}\r\n        <span className=\"favorite-text\">\r\n          {favorited ? \"Favorited\" : \"Favorite\"}\r\n        </span>\r\n      </button>\r\n\r\n      {showToast && (\r\n        <div className=\"favorite-toast\">\r\n          <FaStar /> Added to favorites!\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default FavoriteButton\r\n","import { useEffect } from \"react\"\r\nimport { useUser } from \"common/context/UserContext\"\r\n\r\nconst useTrackView = (topicData) => {\r\n  const { addToRecentlyViewed } = useUser()\r\n\r\n  useEffect(() => {\r\n    if (topicData && topicData.id) {\r\n      addToRecentlyViewed(topicData)\r\n    }\r\n  }, [topicData, addToRecentlyViewed])\r\n}\r\n\r\nexport default useTrackView\r\n","import React, { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport { motion } from \"framer-motion\"\r\nimport { FaRedo, FaUser, FaRobot } from \"react-icons/fa\"\r\nimport FavoriteButton from \"common/components/FavoriteButton\"\r\nimport useTrackView from \"common/hooks/useTrackView\"\r\nimport \"./ConnectFour.css\"\r\n\r\nconst ROWS = 6\r\nconst COLS = 7\r\nconst EMPTY = 0\r\nconst PLAYER = 1\r\nconst AI = 2\r\n\r\nconst getEmptyBoard = () =>\r\n  Array(ROWS)\r\n    .fill()\r\n    .map(() => Array(COLS).fill(EMPTY))\r\n\r\nconst getDropRow = (board, col) => {\r\n  for (let row = ROWS - 1; row >= 0; row--) {\r\n    if (board[row][col] === EMPTY) return row\r\n  }\r\n  return -1\r\n}\r\n\r\nconst ConnectFour = () => {\r\n  const [board, setBoard] = useState(getEmptyBoard)\r\n  const [currentPlayer, setCurrentPlayer] = useState(PLAYER)\r\n  const [winner, setWinner] = useState(null)\r\n  const [winningCells, setWinningCells] = useState([])\r\n  const [gameMode, setGameMode] = useState(\"ai\") // 'ai' or '2player'\r\n  const [scores, setScores] = useState({ player: 0, ai: 0, ties: 0 })\r\n  const [isAIThinking, setIsAIThinking] = useState(false)\r\n  const [hoverCol, setHoverCol] = useState(null)\r\n\r\n  const boardRef = useRef(board)\r\n  const aiTimeoutRef = useRef(null)\r\n\r\n  useEffect(() => {\r\n    boardRef.current = board\r\n  }, [board])\r\n\r\n  useTrackView({\r\n    id: \"games-connect-four\",\r\n    label: \"Connect Four\",\r\n    category: \"Game Zone\",\r\n    route: \"/games/ConnectFour\",\r\n  })\r\n\r\n  useEffect(() => {\r\n    // Prevent double-scheduling in React 18 StrictMode and ensure latest board is used.\r\n    if (aiTimeoutRef.current) {\r\n      clearTimeout(aiTimeoutRef.current)\r\n      aiTimeoutRef.current = null\r\n    }\r\n\r\n    if (gameMode !== \"ai\" || winner || currentPlayer !== AI) return\r\n    if (isAIThinking) return\r\n\r\n    setIsAIThinking(true)\r\n    aiTimeoutRef.current = setTimeout(() => {\r\n      makeAIMove(boardRef.current)\r\n      setIsAIThinking(false)\r\n      aiTimeoutRef.current = null\r\n    }, 450)\r\n\r\n    return () => {\r\n      if (aiTimeoutRef.current) {\r\n        clearTimeout(aiTimeoutRef.current)\r\n        aiTimeoutRef.current = null\r\n      }\r\n    }\r\n  }, [currentPlayer, gameMode, winner, isAIThinking])\r\n\r\n  const checkWinner = (board) => {\r\n    // Check horizontal\r\n    for (let row = 0; row < ROWS; row++) {\r\n      for (let col = 0; col < COLS - 3; col++) {\r\n        if (\r\n          board[row][col] !== EMPTY &&\r\n          board[row][col] === board[row][col + 1] &&\r\n          board[row][col] === board[row][col + 2] &&\r\n          board[row][col] === board[row][col + 3]\r\n        ) {\r\n          return {\r\n            winner: board[row][col],\r\n            cells: [\r\n              [row, col],\r\n              [row, col + 1],\r\n              [row, col + 2],\r\n              [row, col + 3],\r\n            ],\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Check vertical\r\n    for (let col = 0; col < COLS; col++) {\r\n      for (let row = 0; row < ROWS - 3; row++) {\r\n        if (\r\n          board[row][col] !== EMPTY &&\r\n          board[row][col] === board[row + 1][col] &&\r\n          board[row][col] === board[row + 2][col] &&\r\n          board[row][col] === board[row + 3][col]\r\n        ) {\r\n          return {\r\n            winner: board[row][col],\r\n            cells: [\r\n              [row, col],\r\n              [row + 1, col],\r\n              [row + 2, col],\r\n              [row + 3, col],\r\n            ],\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Check diagonal (down-right)\r\n    for (let row = 0; row < ROWS - 3; row++) {\r\n      for (let col = 0; col < COLS - 3; col++) {\r\n        if (\r\n          board[row][col] !== EMPTY &&\r\n          board[row][col] === board[row + 1][col + 1] &&\r\n          board[row][col] === board[row + 2][col + 2] &&\r\n          board[row][col] === board[row + 3][col + 3]\r\n        ) {\r\n          return {\r\n            winner: board[row][col],\r\n            cells: [\r\n              [row, col],\r\n              [row + 1, col + 1],\r\n              [row + 2, col + 2],\r\n              [row + 3, col + 3],\r\n            ],\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Check diagonal (up-right)\r\n    for (let row = 3; row < ROWS; row++) {\r\n      for (let col = 0; col < COLS - 3; col++) {\r\n        if (\r\n          board[row][col] !== EMPTY &&\r\n          board[row][col] === board[row - 1][col + 1] &&\r\n          board[row][col] === board[row - 2][col + 2] &&\r\n          board[row][col] === board[row - 3][col + 3]\r\n        ) {\r\n          return {\r\n            winner: board[row][col],\r\n            cells: [\r\n              [row, col],\r\n              [row - 1, col + 1],\r\n              [row - 2, col + 2],\r\n              [row - 3, col + 3],\r\n            ],\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Check for tie\r\n    if (board.every((row) => row.every((cell) => cell !== EMPTY))) {\r\n      return { winner: \"tie\", cells: [] }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  const applyMove = (col, player) => {\r\n    const current = boardRef.current\r\n    const row = getDropRow(current, col)\r\n    if (row === -1) return false\r\n\r\n    const next = current.map((r) => [...r])\r\n    next[row][col] = player\r\n    setBoard(next)\r\n\r\n    const result = checkWinner(next)\r\n    if (result) {\r\n      setWinner(result.winner)\r\n      setWinningCells(result.cells)\r\n\r\n      if (result.winner === PLAYER) {\r\n        setScores((s) => ({ ...s, player: s.player + 1 }))\r\n      } else if (result.winner === AI) {\r\n        setScores((s) => ({ ...s, ai: s.ai + 1 }))\r\n      } else if (result.winner === \"tie\") {\r\n        setScores((s) => ({ ...s, ties: s.ties + 1 }))\r\n      }\r\n    } else {\r\n      setCurrentPlayer(player === PLAYER ? AI : PLAYER)\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  const canInteract = useMemo(() => {\r\n    if (winner) return false\r\n    if (gameMode === \"ai\" && currentPlayer === AI) return false\r\n    if (isAIThinking) return false\r\n    return true\r\n  }, [winner, gameMode, currentPlayer, isAIThinking])\r\n\r\n  const handleColumnClick = (col) => {\r\n    if (!canInteract) return\r\n    applyMove(col, currentPlayer)\r\n  }\r\n\r\n  const makeAIMove = (boardState) => {\r\n    const validColumns = []\r\n    for (let col = 0; col < COLS; col++) {\r\n      if (boardState[0][col] === EMPTY) {\r\n        validColumns.push(col)\r\n      }\r\n    }\r\n\r\n    if (validColumns.length === 0) return\r\n\r\n    // Simple AI: Try to win, block player, or random\r\n    let bestCol = null\r\n\r\n    // Check if AI can win\r\n    for (const col of validColumns) {\r\n      const testBoard = boardState.map((r) => [...r])\r\n      for (let row = ROWS - 1; row >= 0; row--) {\r\n        if (testBoard[row][col] === EMPTY) {\r\n          testBoard[row][col] = AI\r\n          if (checkWinner(testBoard)?.winner === AI) {\r\n            bestCol = col\r\n          }\r\n          break\r\n        }\r\n      }\r\n      if (bestCol !== null) break\r\n    }\r\n\r\n    // Check if need to block player\r\n    if (bestCol === null) {\r\n      for (const col of validColumns) {\r\n        const testBoard = boardState.map((r) => [...r])\r\n        for (let row = ROWS - 1; row >= 0; row--) {\r\n          if (testBoard[row][col] === EMPTY) {\r\n            testBoard[row][col] = PLAYER\r\n            if (checkWinner(testBoard)?.winner === PLAYER) {\r\n              bestCol = col\r\n            }\r\n            break\r\n          }\r\n        }\r\n        if (bestCol !== null) break\r\n      }\r\n    }\r\n\r\n    // Otherwise pick center or random\r\n    if (bestCol === null) {\r\n      const centerCol = Math.floor(COLS / 2)\r\n      if (validColumns.includes(centerCol)) {\r\n        bestCol = centerCol\r\n      } else {\r\n        bestCol = validColumns[Math.floor(Math.random() * validColumns.length)]\r\n      }\r\n    }\r\n\r\n    applyMove(bestCol, AI)\r\n  }\r\n\r\n  const resetGame = () => {\r\n    setBoard(getEmptyBoard())\r\n    setCurrentPlayer(PLAYER)\r\n    setWinner(null)\r\n    setWinningCells([])\r\n    setIsAIThinking(false)\r\n    setHoverCol(null)\r\n    if (aiTimeoutRef.current) {\r\n      clearTimeout(aiTimeoutRef.current)\r\n      aiTimeoutRef.current = null\r\n    }\r\n  }\r\n\r\n  const isWinningCell = (row, col) => {\r\n    return winningCells.some(([r, c]) => r === row && c === col)\r\n  }\r\n\r\n  return (\r\n    <div className=\"connect-four-container\">\r\n      <div className=\"connect-four-header\">\r\n        <h1>Connect Four üî¥üü°</h1>\r\n        <p>Connect four discs in a row to win!</p>\r\n        <div className=\"header-buttons\">\r\n          <FavoriteButton\r\n            topic={{\r\n              id: \"games-connect-four\",\r\n              label: \"Connect Four\",\r\n              category: \"Game Zone\",\r\n              route: \"/games/ConnectFour\",\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"connect-four-content\">\r\n        <div className=\"game-controls\">\r\n          <div className=\"mode-selector\">\r\n            <button\r\n              className={`mode-btn ${gameMode === \"ai\" ? \"active\" : \"\"}`}\r\n              onClick={() => {\r\n                setGameMode(\"ai\")\r\n                resetGame()\r\n              }}\r\n            >\r\n              <FaRobot /> vs AI\r\n            </button>\r\n            <button\r\n              className={`mode-btn ${gameMode === \"2player\" ? \"active\" : \"\"}`}\r\n              onClick={() => {\r\n                setGameMode(\"2player\")\r\n                resetGame()\r\n              }}\r\n            >\r\n              <FaUser /> 2 Players\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"scores\">\r\n            <div className=\"score-box player\">\r\n              <div className=\"score-label\">\r\n                {gameMode === \"ai\" ? \"You\" : \"Player 1\"}\r\n              </div>\r\n              <div className=\"score-value\">{scores.player}</div>\r\n            </div>\r\n            <div className=\"score-box ties\">\r\n              <div className=\"score-label\">Ties</div>\r\n              <div className=\"score-value\">{scores.ties}</div>\r\n            </div>\r\n            <div className=\"score-box ai\">\r\n              <div className=\"score-label\">\r\n                {gameMode === \"ai\" ? \"AI\" : \"Player 2\"}\r\n              </div>\r\n              <div className=\"score-value\">{scores.ai}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"game-status\">\r\n            {winner ? (\r\n              <div className=\"winner-message\">\r\n                {winner === \"tie\"\r\n                  ? \"It's a Tie! ü§ù\"\r\n                  : winner === PLAYER\r\n                  ? `${gameMode === \"ai\" ? \"You\" : \"Player 1\"} Win! üéâ`\r\n                  : `${gameMode === \"ai\" ? \"AI\" : \"Player 2\"} Wins! üéâ`}\r\n              </div>\r\n            ) : (\r\n              <div className=\"turn-indicator\">\r\n                {currentPlayer === PLAYER ? (\r\n                  <span className=\"player-turn\">\r\n                    {gameMode === \"ai\" ? \"Your\" : \"Player 1's\"} Turn\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"ai-turn\">\r\n                    {gameMode === \"ai\" ? \"AI\" : \"Player 2\"}&apos;s Turn\r\n                    {isAIThinking && \" ü§î\"}\r\n                  </span>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <button className=\"reset-btn\" onClick={resetGame}>\r\n            <FaRedo /> New Game\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"board-container\">\r\n          <div className=\"connect-four-board-wrap\">\r\n            <div\r\n              className=\"column-select\"\r\n              role=\"group\"\r\n              aria-label=\"Choose column\"\r\n            >\r\n              {Array.from({ length: COLS }).map((_, col) => {\r\n                const full = getDropRow(board, col) === -1\r\n                const disabled = full || !canInteract\r\n                const isActive = hoverCol === col\r\n\r\n                return (\r\n                  <button\r\n                    key={col}\r\n                    className={`col-btn ${isActive ? \"active\" : \"\"}`}\r\n                    disabled={disabled}\r\n                    onMouseEnter={() => setHoverCol(col)}\r\n                    onMouseLeave={() => setHoverCol(null)}\r\n                    onFocus={() => setHoverCol(col)}\r\n                    onBlur={() => setHoverCol(null)}\r\n                    onClick={() => handleColumnClick(col)}\r\n                    aria-label={`Drop in column ${col + 1}`}\r\n                  >\r\n                    <span\r\n                      className={`preview-disc ${\r\n                        currentPlayer === PLAYER ? \"player\" : \"ai\"\r\n                      } ${disabled ? \"disabled\" : \"\"}`}\r\n                    />\r\n                  </button>\r\n                )\r\n              })}\r\n            </div>\r\n\r\n            <div className=\"connect-four-board\">\r\n              {board.map((row, rowIndex) =>\r\n                row.map((cell, colIndex) => (\r\n                  <div\r\n                    key={`${rowIndex}-${colIndex}`}\r\n                    className={`cell ${\r\n                      canInteract && getDropRow(board, colIndex) !== -1\r\n                        ? \"clickable\"\r\n                        : \"\"\r\n                    }`}\r\n                    onClick={() => handleColumnClick(colIndex)}\r\n                    onMouseEnter={() => setHoverCol(colIndex)}\r\n                    onMouseLeave={() => setHoverCol(null)}\r\n                    role=\"button\"\r\n                    tabIndex={-1}\r\n                  >\r\n                    {cell !== EMPTY && (\r\n                      <motion.div\r\n                        className={`disc ${cell === PLAYER ? \"player\" : \"ai\"} ${\r\n                          isWinningCell(rowIndex, colIndex) ? \"winning\" : \"\"\r\n                        }`}\r\n                        initial={{ y: -220, scale: 0.9 }}\r\n                        animate={{ y: 0, scale: 1 }}\r\n                        transition={{\r\n                          type: \"spring\",\r\n                          stiffness: 420,\r\n                          damping: 24,\r\n                        }}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"instructions\">\r\n          <h3>How to Play:</h3>\r\n          <ul>\r\n            <li>Click on a column to drop your disc</li>\r\n            <li>Connect 4 discs horizontally, vertically, or diagonally</li>\r\n            <li>Block your opponent from getting 4 in a row</li>\r\n            <li>\r\n              {gameMode === \"ai\"\r\n                ? \"Beat the AI to prove your strategy!\"\r\n                : \"Take turns with your friend!\"}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ConnectFour\r\n"],"names":["_ref","topic","addFavorite","removeFavorite","isFavorite","useUser","favorited","setFavorited","useState","showToast","setShowToast","useEffect","id","_jsxs","_Fragment","children","className","onClick","e","preventDefault","stopPropagation","setTimeout","title","_jsx","FaStar","FaRegStar","topicData","addToRecentlyViewed","getEmptyBoard","Array","fill","map","getDropRow","board","col","row","ROWS","ConnectFour","setBoard","currentPlayer","setCurrentPlayer","winner","setWinner","winningCells","setWinningCells","gameMode","setGameMode","scores","setScores","player","ai","ties","isAIThinking","setIsAIThinking","hoverCol","setHoverCol","boardRef","useRef","aiTimeoutRef","current","useTrackView","label","category","route","clearTimeout","makeAIMove","checkWinner","COLS","cells","every","cell","applyMove","next","r","result","s","canInteract","useMemo","handleColumnClick","boardState","validColumns","push","length","bestCol","testBoard","_checkWinner","_checkWinner2","centerCol","Math","floor","includes","random","resetGame","isWinningCell","some","c","FavoriteButton","FaRobot","FaUser","FaRedo","role","from","_","disabled","isActive","onMouseEnter","onMouseLeave","onFocus","onBlur","rowIndex","colIndex","tabIndex","motion","initial","y","scale","animate","transition","type","stiffness","damping"],"sourceRoot":""}