{"version":3,"file":"static/js/8974.9e0b4805.chunk.js","mappings":"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","sources":["webpack://AlgoLens/./src/routing/site/algo/components/TrafficSimulation/TrafficSimulation.module.css?cac6","routing/site/algo/components/TrafficSimulation/index.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"TrafficSimulation_container__bY5x8\",\"button\":\"TrafficSimulation_button__MtNoA\",\"road\":\"TrafficSimulation_road__vHzh9\",\"car\":\"TrafficSimulation_car__dZt0y\"};","// RealisticTrafficSimulation.jsx\nimport React, { useState, useEffect, useRef, useLayoutEffect } from \"react\"\nimport styles from \"./TrafficSimulation.module.css\"\n\nconst CAR_WIDTH = 40\nconst CAR_HEIGHT = 25\n\nconst makeCar = (id, lanes, vmax) => ({\n  id,\n  lane: Math.floor(Math.random() * lanes), // random lane\n  pos: 0, // always start at beginning\n  speed: Math.floor(Math.random() * (vmax + 1)),\n  color: `hsl(${Math.random() * 360}, 70%, 50%)`,\n})\n\nconst createCars = (lanes, carCount, vmax) => {\n  const cars = []\n  for (let i = 0; i < carCount; i++) {\n    cars.push(makeCar(i, lanes, vmax))\n  }\n  return cars\n}\n\nexport default function RealisticTrafficSimulation({\n  lanes = 3,\n  roadLength = 60, // number of discrete cells\n  carCount = 8,\n  vmax = 5,\n  p = 0.2,\n  interval = 500,\n}) {\n  const roadRef = useRef(null)\n  const [dims, setDims] = useState({ width: 0, height: 0 })\n  const [cars, setCars] = useState(createCars(lanes, carCount, vmax))\n  const [running, setRunning] = useState(false)\n  const intervalRef = useRef(null)\n  const nextId = useRef(carCount)\n\n  const measure = () => {\n    if (!roadRef.current) return\n    const rect = roadRef.current.getBoundingClientRect()\n    setDims({ width: rect.width, height: rect.height })\n  }\n\n  useLayoutEffect(() => {\n    measure()\n    window.addEventListener(\"resize\", measure)\n    return () => window.removeEventListener(\"resize\", measure)\n  }, [])\n\n  const stepSimulation = () => {\n    setCars((prev) => {\n      let next = prev.map((c) => ({ ...c }))\n\n      // update speeds & positions\n      for (let lane = 0; lane < lanes; lane++) {\n        const laneCars = next\n          .filter((c) => c.lane === lane)\n          .sort((a, b) => a.pos - b.pos)\n\n        for (let i = 0; i < laneCars.length; i++) {\n          const car = laneCars[i]\n\n          // accelerate\n          if (car.speed < vmax) car.speed++\n\n          // distance to next car\n          const nextCar = laneCars[i + 1]\n          let gap = nextCar ? nextCar.pos - car.pos - 1 : roadLength\n\n          if (car.speed > gap) car.speed = gap\n\n          // random slowdown\n          if (Math.random() < p && car.speed > 0) car.speed--\n\n          // move forward\n          car.pos += car.speed\n        }\n      }\n\n      // remove cars that reached end\n      const survivors = next.filter((c) => c.pos < roadLength)\n\n      // spawn new cars for removed ones\n      const removedCount = next.length - survivors.length\n      for (let i = 0; i < removedCount; i++) {\n        survivors.push(makeCar(nextId.current++, lanes, vmax))\n      }\n\n      return survivors\n    })\n  }\n\n  useEffect(() => {\n    if (running) {\n      intervalRef.current = setInterval(stepSimulation, interval)\n    } else {\n      clearInterval(intervalRef.current)\n    }\n    return () => clearInterval(intervalRef.current)\n  }, [running, interval])\n\n  // map discrete pos -> pixels\n  const usableWidth = Math.max(0, dims.width - CAR_WIDTH)\n  const cellWidth = roadLength > 1 ? usableWidth / (roadLength - 1) : 0\n  const laneGap =\n    lanes > 1 ? Math.max(0, dims.height - CAR_HEIGHT) / (lanes - 1) : 0\n\n  return (\n    <div className={styles.container}>\n      <h3>Traffic Simulation</h3>\n\n      <div className={styles.road} ref={roadRef}>\n        {cars.map((car) => {\n          const xPx = Math.round(car.pos * cellWidth)\n          const yPx = Math.round(car.lane * laneGap)\n\n          return (\n            <div\n              key={car.id}\n              className={styles.car}\n              style={{\n                backgroundColor: car.color,\n                transform: `translate(${xPx}px, ${yPx}px)`,\n              }}\n            >\n              ðŸš—\n            </div>\n          )\n        })}\n      </div>\n      <button onClick={() => setRunning((r) => !r)} className={styles.button}>\n        {running ? \"Stop\" : \"Start\"}\n      </button>\n    </div>\n  )\n}\n"],"names":["makeCar","id","lanes","vmax","lane","Math","floor","random","pos","speed","color","concat","RealisticTrafficSimulation","_ref","roadLength","carCount","p","interval","roadRef","useRef","dims","setDims","useState","width","height","cars","setCars","createCars","i","push","running","setRunning","intervalRef","nextId","measure","current","rect","getBoundingClientRect","useLayoutEffect","window","addEventListener","removeEventListener","stepSimulation","prev","next","map","c","_objectSpread","laneCars","filter","sort","a","b","length","car","nextCar","gap","survivors","removedCount","useEffect","setInterval","clearInterval","usableWidth","max","cellWidth","laneGap","_jsxs","className","styles","children","_jsx","ref","xPx","round","yPx","style","backgroundColor","transform","onClick","r"],"sourceRoot":""}