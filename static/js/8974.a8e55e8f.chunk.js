"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8974],{8974:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(72791);const a="TrafficSimulation_container__gdybJ",s="TrafficSimulation_button__NKTLd",o="TrafficSimulation_road__W9YYp",l="TrafficSimulation_car__Xg-ri";var i=r(80184);const c=(e,t,r)=>({id:e,lane:Math.floor(Math.random()*t),pos:0,speed:Math.floor(Math.random()*(r+1)),color:`hsl(${360*Math.random()}, 70%, 50%)`});function u(e){let{lanes:t=3,roadLength:r=60,carCount:u=8,vmax:d=5,p:h=.2,interval:f=500}=e;const p=(0,n.useRef)(null),[m,g]=(0,n.useState)({width:0,height:0}),[v,_]=(0,n.useState)(((e,t,r)=>{const n=[];for(let a=0;a<t;a++)n.push(c(a,e,r));return n})(t,u,d)),[w,x]=(0,n.useState)(!1),M=(0,n.useRef)(null),S=(0,n.useRef)(u),b=()=>{if(!p.current)return;const e=p.current.getBoundingClientRect();g({width:e.width,height:e.height})};(0,n.useLayoutEffect)((()=>(b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b))),[]);const k=()=>{_((e=>{let n=e.map((e=>({...e})));for(let o=0;o<t;o++){const e=n.filter((e=>e.lane===o)).sort(((e,t)=>e.pos-t.pos));for(let t=0;t<e.length;t++){const n=e[t];n.speed<d&&n.speed++;const a=e[t+1];let s=a?a.pos-n.pos-1:r;n.speed>s&&(n.speed=s),Math.random()<h&&n.speed>0&&n.speed--,n.pos+=n.speed}}const a=n.filter((e=>e.pos<r)),s=n.length-a.length;for(let r=0;r<s;r++)a.push(c(S.current++,t,d));return a}))};(0,n.useEffect)((()=>(w?M.current=setInterval(k,f):clearInterval(M.current),()=>clearInterval(M.current))),[w,f]);const C=Math.max(0,m.width-40),T=r>1?C/(r-1):0,j=t>1?Math.max(0,m.height-25)/(t-1):0;return(0,i.jsxs)("div",{className:a,children:[(0,i.jsx)("h3",{children:"Traffic Simulation"}),(0,i.jsx)("div",{className:o,ref:p,children:v.map((e=>{const t=Math.round(e.pos*T),r=Math.round(e.lane*j);return(0,i.jsx)("div",{className:l,style:{backgroundColor:e.color,transform:`translate(${t}px, ${r}px)`},children:"\ud83d\ude97"},e.id)}))}),(0,i.jsx)("button",{onClick:()=>x((e=>!e)),className:s,children:w?"Stop":"Start"})]})}}}]);
//# sourceMappingURL=8974.a8e55e8f.chunk.js.map