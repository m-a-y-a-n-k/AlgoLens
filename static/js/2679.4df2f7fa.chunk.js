"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2679],{82679:(e,s,t)=>{t.r(s),t.d(s,{default:()=>J});var r=t(72791);const a="Tetris_wrapper__uawXh",n="Tetris_header__h0tPk",i="Tetris_title__EJhxR",l="Tetris_controls__qKpmH",c="Tetris_hud__DcURo",o="Tetris_stat__kcHd4",h="Tetris_timerBar__8ShTi",d="Tetris_timerFill__XzwsF",u="Tetris_timerText__zIU7A",_="Tetris_bossBox__-O7Mb",f="Tetris_bossName__CskHG",m="Tetris_bossTaunt__92t7R",x="Tetris_bonusPill__Yu197",p="Tetris_stage__VrwAF",v="Tetris_board__QGoPI",j="Tetris_row__3cjJ+",y="Tetris_cell__XZ2xT",g="Tetris_empty__DVMvN",N="Tetris_ghost__2QLrn",T="Tetris_filled__WdcGV",k="Tetris_sidebar__h4CIk",S="Tetris_panel__nKxHu",w="Tetris_panelTitle__YhhBv",b="Tetris_panelBody__xmdtF",M="Tetris_tauntSm__ww3Hy",A="Tetris_metaRow__hB-vY",C="Tetris_nextList__utyMh",I="Tetris_miniPiece__l7qcV",E="Tetris_miniRow__EOHNE",B="Tetris_miniCell__uKekQ",L="Tetris_miniEmpty__gsIQm",P="Tetris_miniFilled__VuZzj",R="Tetris_holdBox__UZ6R2",$="Tetris_holdEmpty__hbnLd",H="Tetris_gameOver__dmqPm",D="Tetris_victory__-gpXq";var O=t(80184);const F={I:{color:"#5ab3ff",shapes:[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]]},J:{color:"#7fb4ff",shapes:[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]]},L:{color:"#ffc857",shapes:[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]]},O:{color:"#ffb02e",shapes:[[[1,1],[1,1]]]},S:{color:"#4ad6a7",shapes:[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]]},T:{color:"#b694ff",shapes:[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]]},Z:{color:"#ff6b6b",shapes:[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]]}},X=Object.keys(F),Z=()=>Array.from({length:20},(()=>Array(10).fill(0)));function K(){const e=[...X];for(let s=e.length-1;s>0;s--){const t=Math.floor(Math.random()*(s+1));[e[s],e[t]]=[e[t],e[s]]}return e}function V(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const t=e.length,r=Array.from({length:t},(()=>Array(t).fill(0)));for(let a=0;a<t;a++)for(let n=0;n<t;n++)s>0?r[n][t-1-a]=e[a][n]:r[t-1-n][a]=e[a][n];return r}const Y=e=>e.map((e=>[...e]));function q(e,s,t,r){for(let a=0;a<s.length;a++)for(let n=0;n<s[a].length;n++){if(!s[a][n])continue;const i=t+n,l=r+a;if(i<0||i>=10||l>=20)return!1;if(l>=0&&0!==e[l][i])return!1}return!0}function z(e){const s=F[e],t=s.shapes[0].map((e=>[...e])),r=t[0].length;return{key:e,color:s.color,rotationIndex:0,shape:t,x:Math.floor((10-r)/2),y:-2}}function G(e,s){return s?Math.max(240,180-Math.floor(.6*e)):Math.max(360,360-2*e)}const Q=["Bitcrusher","Latency Lord","Null Pointer","Stack Smasher","Garbage Colossus","Packet Phantom","Heisen-Bug","Kernel Kraken","Cache Minotaur","Daemon Duke"],U=["Feel the overclock!","I throttle time itself.","Your stack will overflow.","My speed is inevitable.","I'll fragment your hopes.","Packets lost, dreams gone.","Observe non-determinism!","Segfaulting your plans.","Cache this L.","Daemon time!"];function J(){const[e,s]=(0,r.useState)(Z()),[t,X]=(0,r.useState)(K()),[J,W]=(0,r.useState)(K()),[ee,se]=(0,r.useState)((()=>K())),[te,re]=(0,r.useState)((()=>z(ee[0]))),[ae,ne]=(0,r.useState)(null),[ie,le]=(0,r.useState)(!0),[ce,oe]=(0,r.useState)(1),[he,de]=(0,r.useState)(0),[ue,_e]=(0,r.useState)(0),[fe,me]=(0,r.useState)(G(1,!1)),[xe,pe]=(0,r.useState)(!1),[ve,je]=(0,r.useState)(!1),[ye,ge]=(0,r.useState)(!1),[Ne,Te]=(0,r.useState)(!1),[ke,Se]=(0,r.useState)(!1),[we,be]=(0,r.useState)(!1),Me=(0,r.useMemo)((()=>function(e){return Math.max(120,900-18*(e-1))}(ce)*(we?.5:1)),[ce,we]),Ae=Ne?6:10;function Ce(){let e=[...ee],s=[...t],r=[...J],a=e.shift();return e.length<3&&(0===s.length&&(s=r,r=K()),e=[...e,...s.splice(0,Math.min(7,s.length))]),se(e),X(s),W(r),a}function Ie(e){const t=e%5===0;Te(t),Se(!1),de(0),s(Z());const r=Ce();re(z(r)),me(G(e,t)),pe(!1),je(!1),le(!0)}(0,r.useEffect)((()=>{Ie(1)}),[]),(0,r.useEffect)((()=>{if(xe||ve||ye)return;const t=setInterval((()=>{re((t=>{if(!t)return t;const r=t.y+1;if(q(e,t.shape,t.x,r))return{...t,y:r};const a=function(e,s,t,r,a){const n=Y(e);for(let i=0;i<s.length;i++)for(let e=0;e<s[i].length;e++){if(!s[i][e])continue;const l=t+e,c=r+i;c>=0&&(n[c][l]=a)}return n}(e,t.shape,t.x,t.y,t.color),{board:n,cleared:i}=function(e){const s=e.filter((e=>e.some((e=>0===e)))),t=20-s.length;return{board:[...Array.from({length:t},(()=>Array(10).fill(0))),...s],cleared:t}}(a);if(i>0){const e=[0,100,300,500,800][i],s=[0,2,5,8,12][i],t=Ne&&ke?2:1;_e((s=>s+e*ce*t)),de((e=>e+i)),me((e=>Math.min(G(ce,Ne),e+s)))}s(n),le(!0);const l=z(Ce());return q(n,l.shape,l.x,l.y)?l:(je(!0),t)}))}),Me);return()=>clearInterval(t)}),[e,Me,xe,ve,ye,Ne,ke,ce]),(0,r.useEffect)((()=>{if(xe||ve||ye)return;const e=setInterval((()=>{be(!0);const e=setTimeout((()=>be(!1)),4e3);return()=>clearTimeout(e)}),12e3);return()=>clearInterval(e)}),[xe,ve,ye,ce]),(0,r.useEffect)((()=>{if(xe||ve||ye)return;const e=setInterval((()=>{me((e=>e<=1?(je(!0),0):e-1))}),1e3);return()=>clearInterval(e)}),[xe,ve,ye]),(0,r.useEffect)((()=>{if(!ve&&!ye&&he>=Ae){Ne&&Se(!0);const e=ce+1;if(e>50)return ge(!0),void pe(!0);oe(e),Ie(e)}}),[he]),(0,r.useEffect)((()=>{function s(s){if(!s.repeat){if("p"!==s.key&&"P"!==s.key)return"r"===s.key||"R"===s.key?(oe(1),_e(0),ge(!1),void Ie(1)):void(xe||ve||ye||re((t=>{if(!t)return t;const r=function(s,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.shape;return q(e,a,s,r)?{...t,x:s,y:r,shape:a}:t};switch(s.key){case"ArrowLeft":case"a":case"A":return r(t.x-1,t.y);case"ArrowRight":case"d":case"D":return r(t.x+1,t.y);case"ArrowDown":case"s":case"S":return r(t.x,t.y+1);case"ArrowUp":case"w":case"W":{let s=V(t.shape,1);const r=[[0,0],[-1,0],[1,0],[0,-1],[-2,0],[2,0]];for(const[a,n]of r)if(q(e,s,t.x+a,t.y+n))return{...t,shape:s,x:t.x+a,y:t.y+n};return t}case"z":case"Z":{const s=V(t.shape,-1);return q(e,s,t.x,t.y)?{...t,shape:s}:t}case"x":case"X":{const s=V(t.shape,1);return q(e,s,t.x,t.y)?{...t,shape:s}:t}case"c":case"C":if(!ie)return t;if(le(!1),ae){const s=ae.key;ne({key:t.key,color:t.color,shape:t.shape});const r=z(s);return q(e,r.shape,r.x,r.y)?r:t}ne({key:t.key,color:t.color,shape:t.shape});return z(Ce());case" ":{let s=t.y;for(;q(e,t.shape,t.x,s+1);)s++;return{...t,y:s}}default:return t}})));pe((e=>!e))}}return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)}),[e,xe,ve,ye,ie,ae]);const Ee=(0,r.useMemo)((()=>{if(!te)return 0;let s=te.y;for(;q(e,te.shape,te.x,s+1);)s++;return s}),[e,te]),Be=(0,r.useMemo)((()=>ee.slice(0,5)),[ee]),Le=(0,r.useMemo)((()=>{const s=Y(e);if(te){for(let e=0;e<te.shape.length;e++)for(let t=0;t<te.shape[e].length;t++){if(!te.shape[e][t])continue;const r=te.x+t,a=Ee+e;a>=0&&0===s[a][r]&&(s[a][r]="ghost")}for(let e=0;e<te.shape.length;e++)for(let t=0;t<te.shape[e].length;t++){if(!te.shape[e][t])continue;const r=te.x+t,a=te.y+e;a>=0&&(s[a][r]=te.color)}}return s}),[e,te,Ee]),Pe=`${Q[((Re=ce)-1)%Q.length]} v${Re}`;var Re;const $e=(e=>U[(e-1)%U.length])(ce),He=e=>{let{val:s}=e;return(0,O.jsx)("div",{className:`${y} ${0===s?g:"ghost"===s?N:T}`,style:s&&"ghost"!==s?{backgroundColor:s}:{}})};return(0,O.jsxs)("div",{className:a,children:[(0,O.jsxs)("div",{className:n,children:[(0,O.jsx)("div",{className:i,children:"Tetris: Boss Rush"}),(0,O.jsx)("div",{className:l,children:(0,O.jsx)("span",{children:"Controls: \u2190 \u2192 move \u2022 \u2193 soft drop \u2022 \u2191/Z/X rotate \u2022 Space hard drop \u2022 C hold \u2022 P pause \u2022 R restart"})})]}),(0,O.jsxs)("div",{className:c,children:[(0,O.jsxs)("div",{className:o,children:[(0,O.jsx)("span",{children:"Level"}),(0,O.jsx)("strong",{children:ce})]}),(0,O.jsxs)("div",{className:o,children:[(0,O.jsx)("span",{children:"Score"}),(0,O.jsx)("strong",{children:ue})]}),(0,O.jsxs)("div",{className:o,children:[(0,O.jsx)("span",{children:"Lines"}),(0,O.jsxs)("strong",{children:[he,"/",Ae]})]}),(0,O.jsxs)("div",{className:h,children:[(0,O.jsx)("div",{className:d,style:{width:fe/G(ce,Ne)*100+"%"}}),(0,O.jsxs)("div",{className:u,children:[fe,"s"]})]}),(0,O.jsxs)("div",{className:_,"data-rage":we?"1":"0",children:[(0,O.jsx)("div",{className:f,children:Pe}),(0,O.jsx)("div",{className:m,children:$e})]}),Ne&&(0,O.jsx)("div",{className:x,children:ke?"2x Active!":"Bonus Stage"})]}),(0,O.jsxs)("div",{className:p,children:[(0,O.jsx)("div",{className:v,children:Le.map(((e,s)=>(0,O.jsx)("div",{className:j,children:e.map(((e,t)=>(0,O.jsx)(He,{val:e},`${t}-${s}`)))},s)))}),(0,O.jsxs)("aside",{className:k,children:[(0,O.jsxs)("div",{className:S,children:[(0,O.jsx)("div",{className:w,children:"Next"}),(0,O.jsx)("div",{className:C,children:Be.map(((e,s)=>(0,O.jsx)("div",{className:I,children:F[e].shapes[0].map(((s,t)=>(0,O.jsx)("div",{className:E,children:s.map(((s,t)=>(0,O.jsx)("div",{className:`${B} ${s?P:L}`,style:s?{backgroundColor:F[e].color}:{}},t)))},t)))},s)))})]}),(0,O.jsxs)("div",{className:S,children:[(0,O.jsx)("div",{className:w,children:"Hold"}),(0,O.jsx)("div",{className:R,children:ae?F[ae.key].shapes[0].map(((e,s)=>(0,O.jsx)("div",{className:E,children:e.map(((e,s)=>(0,O.jsx)("div",{className:`${B} ${e?P:L}`,style:e?{backgroundColor:F[ae.key].color}:{}},s)))},s))):(0,O.jsx)("div",{className:$,children:"\u2014"})})]}),(0,O.jsxs)("div",{className:S,children:[(0,O.jsx)("div",{className:w,children:"Boss"}),(0,O.jsxs)("div",{className:b,children:[(0,O.jsx)("div",{children:(0,O.jsx)("strong",{children:Pe})}),(0,O.jsx)("div",{className:M,children:$e}),(0,O.jsxs)("div",{className:A,children:[(0,O.jsx)("span",{children:"Rage"}),(0,O.jsx)("span",{children:we?"ON":"off"})]}),(0,O.jsxs)("div",{className:A,children:[(0,O.jsx)("span",{children:"Stage"}),(0,O.jsx)("span",{children:Ne?"Bonus":"Normal"})]})]})]}),ve&&(0,O.jsx)("div",{className:H,children:"\u23f3 Time's up! Press R to retry"}),ye&&(0,O.jsxs)("div",{className:D,children:["\ud83c\udfc5 You cleared ",50," bosses! Medal unlocked!"]})]})]})]})}}}]);
//# sourceMappingURL=2679.4df2f7fa.chunk.js.map