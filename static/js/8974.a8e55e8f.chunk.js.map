{"version":3,"file":"static/js/8974.a8e55e8f.chunk.js","mappings":"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","sources":["webpack://app/./src/routing/site/algo/components/TrafficSimulation/TrafficSimulation.module.css?cac6","routing/site/algo/components/TrafficSimulation/index.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"TrafficSimulation_container__gdybJ\",\"button\":\"TrafficSimulation_button__NKTLd\",\"road\":\"TrafficSimulation_road__W9YYp\",\"car\":\"TrafficSimulation_car__Xg-ri\"};","// RealisticTrafficSimulation.jsx\r\nimport React, { useState, useEffect, useRef, useLayoutEffect } from \"react\"\r\nimport styles from \"./TrafficSimulation.module.css\"\r\n\r\nconst CAR_WIDTH = 40\r\nconst CAR_HEIGHT = 25\r\n\r\nconst makeCar = (id, lanes, vmax) => ({\r\n  id,\r\n  lane: Math.floor(Math.random() * lanes), // random lane\r\n  pos: 0, // always start at beginning\r\n  speed: Math.floor(Math.random() * (vmax + 1)),\r\n  color: `hsl(${Math.random() * 360}, 70%, 50%)`,\r\n})\r\n\r\nconst createCars = (lanes, carCount, vmax) => {\r\n  const cars = []\r\n  for (let i = 0; i < carCount; i++) {\r\n    cars.push(makeCar(i, lanes, vmax))\r\n  }\r\n  return cars\r\n}\r\n\r\nexport default function RealisticTrafficSimulation({\r\n  lanes = 3,\r\n  roadLength = 60, // number of discrete cells\r\n  carCount = 8,\r\n  vmax = 5,\r\n  p = 0.2,\r\n  interval = 500,\r\n}) {\r\n  const roadRef = useRef(null)\r\n  const [dims, setDims] = useState({ width: 0, height: 0 })\r\n  const [cars, setCars] = useState(createCars(lanes, carCount, vmax))\r\n  const [running, setRunning] = useState(false)\r\n  const intervalRef = useRef(null)\r\n  const nextId = useRef(carCount)\r\n\r\n  const measure = () => {\r\n    if (!roadRef.current) return\r\n    const rect = roadRef.current.getBoundingClientRect()\r\n    setDims({ width: rect.width, height: rect.height })\r\n  }\r\n\r\n  useLayoutEffect(() => {\r\n    measure()\r\n    window.addEventListener(\"resize\", measure)\r\n    return () => window.removeEventListener(\"resize\", measure)\r\n  }, [])\r\n\r\n  const stepSimulation = () => {\r\n    setCars((prev) => {\r\n      let next = prev.map((c) => ({ ...c }))\r\n\r\n      // update speeds & positions\r\n      for (let lane = 0; lane < lanes; lane++) {\r\n        const laneCars = next\r\n          .filter((c) => c.lane === lane)\r\n          .sort((a, b) => a.pos - b.pos)\r\n\r\n        for (let i = 0; i < laneCars.length; i++) {\r\n          const car = laneCars[i]\r\n\r\n          // accelerate\r\n          if (car.speed < vmax) car.speed++\r\n\r\n          // distance to next car\r\n          const nextCar = laneCars[i + 1]\r\n          let gap = nextCar ? nextCar.pos - car.pos - 1 : roadLength\r\n\r\n          if (car.speed > gap) car.speed = gap\r\n\r\n          // random slowdown\r\n          if (Math.random() < p && car.speed > 0) car.speed--\r\n\r\n          // move forward\r\n          car.pos += car.speed\r\n        }\r\n      }\r\n\r\n      // remove cars that reached end\r\n      const survivors = next.filter((c) => c.pos < roadLength)\r\n\r\n      // spawn new cars for removed ones\r\n      const removedCount = next.length - survivors.length\r\n      for (let i = 0; i < removedCount; i++) {\r\n        survivors.push(makeCar(nextId.current++, lanes, vmax))\r\n      }\r\n\r\n      return survivors\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (running) {\r\n      intervalRef.current = setInterval(stepSimulation, interval)\r\n    } else {\r\n      clearInterval(intervalRef.current)\r\n    }\r\n    return () => clearInterval(intervalRef.current)\r\n  }, [running, interval])\r\n\r\n  // map discrete pos -> pixels\r\n  const usableWidth = Math.max(0, dims.width - CAR_WIDTH)\r\n  const cellWidth = roadLength > 1 ? usableWidth / (roadLength - 1) : 0\r\n  const laneGap =\r\n    lanes > 1 ? Math.max(0, dims.height - CAR_HEIGHT) / (lanes - 1) : 0\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h3>Traffic Simulation</h3>\r\n\r\n      <div className={styles.road} ref={roadRef}>\r\n        {cars.map((car) => {\r\n          const xPx = Math.round(car.pos * cellWidth)\r\n          const yPx = Math.round(car.lane * laneGap)\r\n\r\n          return (\r\n            <div\r\n              key={car.id}\r\n              className={styles.car}\r\n              style={{\r\n                backgroundColor: car.color,\r\n                transform: `translate(${xPx}px, ${yPx}px)`,\r\n              }}\r\n            >\r\n              ðŸš—\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n      <button onClick={() => setRunning((r) => !r)} className={styles.button}>\r\n        {running ? \"Stop\" : \"Start\"}\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["makeCar","id","lanes","vmax","lane","Math","floor","random","pos","speed","color","RealisticTrafficSimulation","_ref","roadLength","carCount","p","interval","roadRef","useRef","dims","setDims","useState","width","height","cars","setCars","createCars","i","push","running","setRunning","intervalRef","nextId","measure","current","rect","getBoundingClientRect","useLayoutEffect","window","addEventListener","removeEventListener","stepSimulation","prev","next","map","c","laneCars","filter","sort","a","b","length","car","nextCar","gap","survivors","removedCount","useEffect","setInterval","clearInterval","usableWidth","max","cellWidth","laneGap","_jsxs","className","styles","children","_jsx","ref","xPx","round","yPx","style","backgroundColor","transform","onClick","r"],"sourceRoot":""}