"use strict";(self.webpackChunkAlgoLens=self.webpackChunkAlgoLens||[]).push([[6064],{6064:(n,t,e)=>{e.r(t),e.d(t,{default:()=>R});var r,s,a,o,d,i,l,h=e(1413),c=e(168),x=e(2791),u=e(7884),g=e(9962),p=e.n(g),f=e(184);const y=u.ZP.div(r||(r=(0,c.Z)(["\n  width: 100%;\n  height: 80vh;\n  background: #f0f0f0;\n  position: relative;\n  overflow: hidden;\n"]))),X=u.ZP.div(s||(s=(0,c.Z)(["\n  width: 10px;\n  height: 100px;\n  background: #000;\n  position: absolute;\n"]))),Y=u.ZP.div(a||(a=(0,c.Z)(["\n  width: 10px;\n  height: 100px;\n  background: rgba(0, 0, 255, 0.5);\n  position: absolute;\n"]))),Z=u.ZP.div(o||(o=(0,c.Z)(["\n  position: absolute;\n  width: 5px;\n  background: yellow;\n  height: ","px;\n  transform: rotate(","deg);\n  transform-origin: top left;\n"])),(n=>n.length),(n=>n.angle)),j=u.ZP.div(d||(d=(0,c.Z)(["\n  width: 100%;\n  height: 20vh;\n  background: #333;\n  color: #fff;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  @media (max-width: 768px) {\n    flex-direction: column;\n    height: auto;\n  }\n"]))),m=u.ZP.button(i||(i=(0,c.Z)(["\n  background: #fff;\n  color: #333;\n  padding: 10px 20px;\n  border: none;\n  cursor: pointer;\n  margin: 5px;\n"]))),b=()=>(0,f.jsx)(X,{}),w=()=>(0,f.jsx)(Y,{}),k=n=>{let{startX:t,startY:e,endX:r,endY:s}=n;const a=Math.sqrt((r-t)**2+(s-e)**2),o=Math.atan2(s-e,r-t)*(180/Math.PI);return(0,f.jsx)(Z,{style:{top:e,left:t},angle:o,length:a})},v=(n,t,e)=>{const{x:r,y:s}=n,{x:a,y:o}=t,{x:d,y:i,width:l,height:h}=e,c=(r-a)*(i-i+h)-(s-o)*(d-d+l);if(0===c)return null;const x=((r-d)*(i-i+h)-(s-i)*(d-d+l))/c,u=((r-a)*(s-i)-(s-o)*(r-d))/c;return x>=0&&x<=1&&u>=0&&u<=1?{x:r+x*(a-r),y:s+x*(o-s)}:null},P=(n,t)=>{const{width:e,height:r}=t,{startX:s,startY:a,endX:o,endY:d}=n,i={x:0===r?1:0,y:0===e?1:0},l=Math.atan2(d-a,o-s),c=l-Math.atan2(i.y,i.x),x="mirror"===t.type?l-2*c:l+2*c,u=n.length,g=s+u*Math.cos(x),p=a+u*Math.sin(x);return(0,h.Z)((0,h.Z)({},n),{},{endX:g,endY:p})},M=(n,t)=>{const e=window.innerWidth,r=window.innerHeight;return n<0||n>e||t<0||t>r},A=n=>{let{elements:t,rays:e,onDragElement:r,onDragRay:s}=n;return(0,f.jsxs)(y,{children:[t.map(((n,t)=>(0,f.jsx)(p(),{defaultPosition:{x:n.x,y:n.y},onStop:(n,e)=>r(t,e.x,e.y),children:(0,f.jsx)("div",{style:{position:"absolute",top:0,left:0},children:"mirror"===n.type?(0,f.jsx)(b,{}):(0,f.jsx)(w,{})})},t))),e.map(((n,e)=>{const r=((n,t)=>{let e=(0,h.Z)({},n),r=e.startX,s=e.startY;for(let a=0;a<1e3;a++){const a={x:r,y:s};if(t.forEach((n=>{v({x:e.startX,y:e.startY},a,n)&&(e=P(e,n),r=e.endX,s=e.endY)})),e.length=Math.sqrt((e.endX-e.startX)**2+(e.endY-e.startY)**2),e.length>=n.length||M(e.endX,e.endY))break}return e})(n,t);return(0,f.jsx)(p(),{defaultPosition:{x:r.startX,y:r.startY},onStop:(n,t)=>s(e,t.x,t.y),children:(0,f.jsx)("div",{style:{position:"absolute",top:0,left:0},children:(0,f.jsx)(k,{startX:r.startX,startY:r.startY,endX:r.endX,endY:r.endY})})},e)}))]})},C=n=>{let{addElement:t,addRay:e}=n;return(0,f.jsxs)(j,{children:[(0,f.jsx)(m,{onClick:()=>t("mirror"),children:"Add Mirror"}),(0,f.jsx)(m,{onClick:()=>t("lens"),children:"Add Lens"}),(0,f.jsx)(m,{onClick:e,children:"Add Ray"})]})},E=u.ZP.div(l||(l=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n"])));const R=function(){const[n,t]=(0,x.useState)([]),[e,r]=(0,x.useState)([]);return(0,f.jsxs)(E,{children:[(0,f.jsx)(A,{elements:n,onDragElement:(e,r,s)=>{const a=[...n];a[e]=(0,h.Z)((0,h.Z)({},a[e]),{},{x:r,y:s}),t(a)},rays:e,onDragRay:(n,t,s)=>{const a=[...e],o=a[n];if(o){const e=t-o.startX,d=s-o.startY;a[n]=(0,h.Z)((0,h.Z)({},o),{},{startX:t,startY:s,endX:o.endX+e,endY:o.endY+d}),r(a)}}}),(0,f.jsx)(C,{addElement:e=>{t([...n,{type:e,x:100,y:100}])},addRay:()=>{r([...e,{startX:200,startY:100,endX:200,endY:300}])}})]})}}}]);
//# sourceMappingURL=6064.3d415b27.chunk.js.map