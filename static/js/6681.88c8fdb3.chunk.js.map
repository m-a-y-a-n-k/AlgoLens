{"version":3,"file":"static/js/6681.88c8fdb3.chunk.js","mappings":"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","sources":["routing/site/math/components/TaylorSeries/TaylorSeriesExplorer.jsx","routing/site/math/components/TaylorSeries/index.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\"\nimport styled from \"styled-components\"\n\nconst Layout = styled.div`\n  width: 100%;\n  max-width: 1100px;\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 16px;\n\n  @media (min-width: 980px) {\n    grid-template-columns: 1fr 360px;\n    align-items: start;\n  }\n`\n\nconst Card = styled.div`\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 16px;\n  background: linear-gradient(\n    180deg,\n    rgba(255, 255, 255, 0.06),\n    rgba(255, 255, 255, 0.02)\n  );\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.45);\n  overflow: hidden;\n`\n\nconst PlotWrap = styled.div`\n  width: 100%;\n  aspect-ratio: 16 / 10;\n  position: relative;\n`\n\nconst Canvas = styled.canvas`\n  width: 100%;\n  height: 100%;\n  display: block;\n`\n\nconst Controls = styled.div`\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 16px;\n  background: rgba(0, 0, 0, 0.35);\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.35);\n  padding: 14px;\n  color: rgba(255, 255, 255, 0.9);\n`\n\nconst Select = styled.select`\n  width: 100%;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.35);\n  color: rgba(255, 255, 255, 0.92);\n  border: 1px solid rgba(255, 255, 255, 0.14);\n  border-radius: 10px;\n  cursor: pointer;\n`\n\nconst Label = styled.label`\n  display: flex;\n  justify-content: space-between;\n  gap: 10px;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 0.9rem;\n  margin: 12px 0 6px;\n`\n\nconst Value = styled.span`\n  color: rgba(255, 255, 255, 0.65);\n  font-variant-numeric: tabular-nums;\n`\n\nconst Slider = styled.input`\n  width: 100%;\n`\n\nconst Legend = styled.div`\n  margin-top: 12px;\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n  font-size: 0.85rem;\n  color: rgba(255, 255, 255, 0.75);\n`\n\nconst Dot = styled.span`\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 999px;\n  background: ${(p) => p.color};\n  box-shadow: 0 0 12px ${(p) => p.color};\n  margin-right: 6px;\n`\n\nfunction clamp(n, a, b) {\n  return Math.max(a, Math.min(b, n))\n}\n\nfunction factorial(n) {\n  let r = 1\n  for (let i = 2; i <= n; i++) r *= i\n  return r\n}\n\nfunction safePow(x, n) {\n  // Avoid huge numbers for large x-range\n  const v = Math.pow(x, n)\n  if (!Number.isFinite(v)) return v > 0 ? Number.MAX_VALUE : -Number.MAX_VALUE\n  return v\n}\n\n// Derivatives at a for supported functions\nfunction derivativesAt(fnKey, a, maxN) {\n  const out = new Array(maxN + 1)\n  if (fnKey === \"sin\") {\n    // sin derivatives cycle: sin, cos, -sin, -cos\n    for (let n = 0; n <= maxN; n++) {\n      const k = n % 4\n      if (k === 0) out[n] = Math.sin(a)\n      else if (k === 1) out[n] = Math.cos(a)\n      else if (k === 2) out[n] = -Math.sin(a)\n      else out[n] = -Math.cos(a)\n    }\n    return out\n  }\n  if (fnKey === \"cos\") {\n    // cos derivatives cycle: cos, -sin, -cos, sin\n    for (let n = 0; n <= maxN; n++) {\n      const k = n % 4\n      if (k === 0) out[n] = Math.cos(a)\n      else if (k === 1) out[n] = -Math.sin(a)\n      else if (k === 2) out[n] = -Math.cos(a)\n      else out[n] = Math.sin(a)\n    }\n    return out\n  }\n  if (fnKey === \"exp\") {\n    const ea = Math.exp(a)\n    for (let n = 0; n <= maxN; n++) out[n] = ea\n    return out\n  }\n  if (fnKey === \"ln1p\") {\n    // f(x)=ln(1+x); derivatives: f'(x)=1/(1+x), f''=-1/(1+x)^2, ...\n    // f^(n)(x) = (-1)^{n-1} (n-1)! / (1+x)^n  for n>=1\n    out[0] = Math.log(1 + a)\n    const denom = 1 + a\n    for (let n = 1; n <= maxN; n++) {\n      out[n] = (Math.pow(-1, n - 1) * factorial(n - 1)) / safePow(denom, n)\n    }\n    return out\n  }\n  // default fallback (shouldn't happen)\n  for (let n = 0; n <= maxN; n++) out[n] = 0\n  return out\n}\n\nfunction f(fnKey, x) {\n  if (fnKey === \"sin\") return Math.sin(x)\n  if (fnKey === \"cos\") return Math.cos(x)\n  if (fnKey === \"exp\") return Math.exp(x)\n  if (fnKey === \"ln1p\") return Math.log(1 + x)\n  return x\n}\n\nfunction taylorValue(fnKey, x, a, n, derivs) {\n  let sum = 0\n  const dx = x - a\n  for (let k = 0; k <= n; k++) {\n    sum += (derivs[k] * safePow(dx, k)) / factorial(k)\n  }\n  return sum\n}\n\nexport default function TaylorSeriesExplorer() {\n  const canvasRef = useRef(null)\n  const wrapRef = useRef(null)\n\n  const [fnKey, setFnKey] = useState(\"sin\")\n  const [order, setOrder] = useState(5)\n  const [center, setCenter] = useState(0)\n  const [xRange, setXRange] = useState(8) // shows [-range/2, range/2]\n  const [yAuto, setYAuto] = useState(true)\n\n  // Resize canvas\n  useEffect(() => {\n    const wrap = wrapRef.current\n    const canvas = canvasRef.current\n    if (!wrap || !canvas) return\n\n    const ro = new ResizeObserver(() => {\n      const rect = wrap.getBoundingClientRect()\n      const dpr = clamp(window.devicePixelRatio || 1, 1, 2)\n      canvas.width = Math.max(1, Math.floor(rect.width * dpr))\n      canvas.height = Math.max(1, Math.floor(rect.height * dpr))\n      const ctx = canvas.getContext(\"2d\")\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0)\n    })\n    ro.observe(wrap)\n    return () => ro.disconnect()\n  }, [])\n\n  const derivs = useMemo(() => derivativesAt(fnKey, center, order), [\n    fnKey,\n    center,\n    order,\n  ])\n\n  const samples = useMemo(() => {\n    const N = 700\n    const half = xRange / 2\n    const xMin = -half\n    const xMax = half\n\n    // Keep ln(1+x) domain safe\n    const safeMin = fnKey === \"ln1p\" ? Math.max(xMin, -0.99) : xMin\n    const safeMax = xMax\n\n    const xs = new Array(N)\n    const ys = new Array(N)\n    const ts = new Array(N)\n\n    let yMin = Infinity\n    let yMax = -Infinity\n\n    for (let i = 0; i < N; i++) {\n      const t = i / (N - 1)\n      const x = safeMin + (safeMax - safeMin) * t\n      const y = f(fnKey, x)\n      const p = taylorValue(fnKey, x, center, order, derivs)\n      xs[i] = x\n      ys[i] = y\n      ts[i] = p\n      yMin = Math.min(yMin, y, p)\n      yMax = Math.max(yMax, y, p)\n    }\n\n    // pad for readability\n    const pad = (yMax - yMin) * 0.12 || 1\n    return {\n      xs,\n      ys,\n      ts,\n      xMin: safeMin,\n      xMax: safeMax,\n      yMin: yMin - pad,\n      yMax: yMax + pad,\n    }\n  }, [derivs, fnKey, order, center, xRange])\n\n  // Draw on param change\n  useEffect(() => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n    const rect = canvas.getBoundingClientRect()\n    const w = rect.width\n    const h = rect.height\n\n    // background\n    const bg = ctx.createLinearGradient(0, 0, 0, h)\n    bg.addColorStop(0, \"rgba(2,6,23,1)\")\n    bg.addColorStop(1, \"rgba(0,0,0,1)\")\n    ctx.fillStyle = bg\n    ctx.fillRect(0, 0, w, h)\n\n    const margin = { l: 44, r: 16, t: 18, b: 36 }\n    const pw = w - margin.l - margin.r\n    const ph = h - margin.t - margin.b\n\n    const xMin = samples.xMin\n    const xMax = samples.xMax\n\n    let yMin = -4\n    let yMax = 4\n    if (yAuto) {\n      yMin = samples.yMin\n      yMax = samples.yMax\n    }\n\n    const xToPx = (x) => margin.l + ((x - xMin) / (xMax - xMin)) * pw\n    const yToPx = (y) => margin.t + (1 - (y - yMin) / (yMax - yMin)) * ph\n\n    // grid\n    ctx.save()\n    ctx.strokeStyle = \"rgba(255,255,255,0.08)\"\n    ctx.lineWidth = 1\n    for (let i = 0; i <= 8; i++) {\n      const x = margin.l + (pw * i) / 8\n      ctx.beginPath()\n      ctx.moveTo(x, margin.t)\n      ctx.lineTo(x, margin.t + ph)\n      ctx.stroke()\n    }\n    for (let i = 0; i <= 6; i++) {\n      const y = margin.t + (ph * i) / 6\n      ctx.beginPath()\n      ctx.moveTo(margin.l, y)\n      ctx.lineTo(margin.l + pw, y)\n      ctx.stroke()\n    }\n    ctx.restore()\n\n    // axes (if within range)\n    ctx.save()\n    ctx.strokeStyle = \"rgba(255,255,255,0.22)\"\n    ctx.lineWidth = 1.5\n    if (0 >= xMin && 0 <= xMax) {\n      const x0 = xToPx(0)\n      ctx.beginPath()\n      ctx.moveTo(x0, margin.t)\n      ctx.lineTo(x0, margin.t + ph)\n      ctx.stroke()\n    }\n    if (0 >= yMin && 0 <= yMax) {\n      const y0 = yToPx(0)\n      ctx.beginPath()\n      ctx.moveTo(margin.l, y0)\n      ctx.lineTo(margin.l + pw, y0)\n      ctx.stroke()\n    }\n    ctx.restore()\n\n    // center marker line at x=a\n    ctx.save()\n    ctx.strokeStyle = \"rgba(251,172,97,0.35)\"\n    ctx.setLineDash([6, 6])\n    ctx.lineWidth = 1.5\n    if (center >= xMin && center <= xMax) {\n      const xa = xToPx(center)\n      ctx.beginPath()\n      ctx.moveTo(xa, margin.t)\n      ctx.lineTo(xa, margin.t + ph)\n      ctx.stroke()\n    }\n    ctx.restore()\n\n    // plot function\n    drawCurve(ctx, samples.xs, samples.ys, xToPx, yToPx, {\n      color: \"rgba(127,231,255,0.95)\",\n      width: 3,\n      glow: \"rgba(127,231,255,0.35)\",\n    })\n\n    // plot taylor polynomial\n    drawCurve(ctx, samples.xs, samples.ts, xToPx, yToPx, {\n      color: \"rgba(251,172,97,0.95)\",\n      width: 3,\n      glow: \"rgba(251,172,97,0.35)\",\n    })\n\n    // labels\n    ctx.save()\n    ctx.fillStyle = \"rgba(255,255,255,0.75)\"\n    ctx.font =\n      \"12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace\"\n    ctx.fillText(`f(x) vs Taylorₙ(x)`, margin.l, 14)\n    ctx.fillText(`n=${order}   a=${center.toFixed(2)}`, margin.l, h - 10)\n    ctx.restore()\n  }, [samples, order, center, yAuto])\n\n  return (\n    <Layout>\n      <Card>\n        <PlotWrap ref={wrapRef}>\n          <Canvas ref={canvasRef} />\n        </PlotWrap>\n      </Card>\n\n      <Controls>\n        <Label>\n          Function <Value>{prettyFn(fnKey)}</Value>\n        </Label>\n        <Select value={fnKey} onChange={(e) => setFnKey(e.target.value)}>\n          <option value=\"sin\">sin(x)</option>\n          <option value=\"cos\">cos(x)</option>\n          <option value=\"exp\">e^x</option>\n          <option value=\"ln1p\">ln(1 + x)</option>\n        </Select>\n\n        <Label>\n          Order n <Value>{order}</Value>\n        </Label>\n        <Slider\n          type=\"range\"\n          min=\"0\"\n          max=\"18\"\n          step=\"1\"\n          value={order}\n          onChange={(e) => setOrder(parseInt(e.target.value, 10))}\n        />\n\n        <Label>\n          Center a <Value>{center.toFixed(2)}</Value>\n        </Label>\n        <Slider\n          type=\"range\"\n          min={fnKey === \"ln1p\" ? \"-0.9\" : \"-4\"}\n          max=\"4\"\n          step=\"0.05\"\n          value={center}\n          onChange={(e) => setCenter(parseFloat(e.target.value))}\n        />\n\n        <Label>\n          X range <Value>{xRange.toFixed(1)}</Value>\n        </Label>\n        <Slider\n          type=\"range\"\n          min=\"2\"\n          max=\"16\"\n          step=\"0.5\"\n          value={xRange}\n          onChange={(e) => setXRange(parseFloat(e.target.value))}\n        />\n\n        <Label>\n          Y scale <Value>{yAuto ? \"Auto\" : \"Fixed\"}</Value>\n        </Label>\n        <Slider\n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"1\"\n          value={yAuto ? 1 : 0}\n          onChange={(e) => setYAuto(e.target.value === \"1\")}\n        />\n\n        <Legend>\n          <span>\n            <Dot color=\"rgba(127,231,255,0.95)\" />\n            f(x)\n          </span>\n          <span>\n            <Dot color=\"rgba(251,172,97,0.95)\" />\n            Taylorₙ(x)\n          </span>\n          <span>\n            <Dot color=\"rgba(251,172,97,0.45)\" /> x = a\n          </span>\n        </Legend>\n      </Controls>\n    </Layout>\n  )\n}\n\nfunction prettyFn(fnKey) {\n  if (fnKey === \"sin\") return \"sin(x)\"\n  if (fnKey === \"cos\") return \"cos(x)\"\n  if (fnKey === \"exp\") return \"e^x\"\n  if (fnKey === \"ln1p\") return \"ln(1+x)\"\n  return fnKey\n}\n\nfunction drawCurve(ctx, xs, ys, xToPx, yToPx, style) {\n  ctx.save()\n  ctx.lineWidth = style.width\n  ctx.strokeStyle = style.color\n  ctx.shadowBlur = 10\n  ctx.shadowColor = style.glow\n  ctx.lineJoin = \"round\"\n  ctx.lineCap = \"round\"\n\n  ctx.beginPath()\n  for (let i = 0; i < xs.length; i++) {\n    const x = xToPx(xs[i])\n    const y = yToPx(ys[i])\n    if (i === 0) ctx.moveTo(x, y)\n    else ctx.lineTo(x, y)\n  }\n  ctx.stroke()\n  ctx.restore()\n}\n","import React from \"react\"\nimport styled from \"styled-components\"\nimport TaylorSeriesExplorer from \"./TaylorSeriesExplorer\"\n\nconst MainContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  background: radial-gradient(\n    circle at 30% 10%,\n    #0f172a 0%,\n    #0b1020 45%,\n    #000 100%\n  );\n  min-height: 100vh;\n  color: #eef2ff;\n`\n\nconst Heading = styled.h1`\n  font-size: clamp(1.6rem, 3vw, 2.4rem);\n  color: #fbac61;\n  margin: 0 0 10px 0;\n  text-align: center;\n  text-shadow: 0 0 14px rgba(251, 172, 97, 0.35);\n`\n\nconst Subheading = styled.p`\n  margin: 0 0 18px 0;\n  text-align: center;\n  color: rgba(255, 255, 255, 0.72);\n  max-width: 900px;\n  font-size: 0.95rem;\n`\n\nexport default function Main() {\n  return (\n    <MainContainer>\n      <Heading>Taylor Series Explorer</Heading>\n      <Subheading>\n        Compare a function to its Taylor polynomial around a center point \\(a\\).\n        Increase the order to see the approximation improve near \\(a\\).\n      </Subheading>\n      <TaylorSeriesExplorer />\n    </MainContainer>\n  )\n}\n"],"names":["Layout","styled","Card","PlotWrap","Canvas","Controls","Select","Label","Value","Slider","Legend","Dot","p","color","factorial","n","r","i","safePow","x","v","Math","pow","Number","isFinite","MAX_VALUE","f","fnKey","sin","cos","exp","log","taylorValue","a","derivs","sum","dx","k","TaylorSeriesExplorer","canvasRef","useRef","wrapRef","setFnKey","useState","order","setOrder","center","setCenter","xRange","setXRange","yAuto","setYAuto","useEffect","wrap","current","canvas","ro","ResizeObserver","rect","getBoundingClientRect","dpr","window","devicePixelRatio","b","max","min","width","floor","height","getContext","setTransform","observe","disconnect","useMemo","maxN","out","Array","ea","denom","derivativesAt","samples","N","half","xMin","xMax","safeMin","safeMax","xs","ys","ts","yMin","Infinity","yMax","y","pad","ctx","w","h","bg","createLinearGradient","addColorStop","fillStyle","fillRect","margin","pw","ph","xToPx","yToPx","save","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","restore","x0","y0","setLineDash","xa","drawCurve","glow","font","fillText","toFixed","_jsxs","children","_jsx","ref","prettyFn","value","onChange","e","target","type","step","parseInt","parseFloat","style","shadowBlur","shadowColor","lineJoin","lineCap","length","MainContainer","Heading","Subheading","Main"],"sourceRoot":""}