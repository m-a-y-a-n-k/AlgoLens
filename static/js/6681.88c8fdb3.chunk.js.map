{"version":3,"file":"static/js/6681.88c8fdb3.chunk.js","mappings":"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","sources":["routing/site/math/components/TaylorSeries/TaylorSeriesExplorer.jsx","routing/site/math/components/TaylorSeries/index.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\n\r\nconst Layout = styled.div`\r\n  width: 100%;\r\n  max-width: 1100px;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 16px;\r\n\r\n  @media (min-width: 980px) {\r\n    grid-template-columns: 1fr 360px;\r\n    align-items: start;\r\n  }\r\n`\r\n\r\nconst Card = styled.div`\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 16px;\r\n  background: linear-gradient(\r\n    180deg,\r\n    rgba(255, 255, 255, 0.06),\r\n    rgba(255, 255, 255, 0.02)\r\n  );\r\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.45);\r\n  overflow: hidden;\r\n`\r\n\r\nconst PlotWrap = styled.div`\r\n  width: 100%;\r\n  aspect-ratio: 16 / 10;\r\n  position: relative;\r\n`\r\n\r\nconst Canvas = styled.canvas`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: block;\r\n`\r\n\r\nconst Controls = styled.div`\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 16px;\r\n  background: rgba(0, 0, 0, 0.35);\r\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.35);\r\n  padding: 14px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n`\r\n\r\nconst Select = styled.select`\r\n  width: 100%;\r\n  padding: 10px;\r\n  background: rgba(0, 0, 0, 0.35);\r\n  color: rgba(255, 255, 255, 0.92);\r\n  border: 1px solid rgba(255, 255, 255, 0.14);\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n`\r\n\r\nconst Label = styled.label`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 10px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  font-size: 0.9rem;\r\n  margin: 12px 0 6px;\r\n`\r\n\r\nconst Value = styled.span`\r\n  color: rgba(255, 255, 255, 0.65);\r\n  font-variant-numeric: tabular-nums;\r\n`\r\n\r\nconst Slider = styled.input`\r\n  width: 100%;\r\n`\r\n\r\nconst Legend = styled.div`\r\n  margin-top: 12px;\r\n  display: flex;\r\n  gap: 12px;\r\n  flex-wrap: wrap;\r\n  font-size: 0.85rem;\r\n  color: rgba(255, 255, 255, 0.75);\r\n`\r\n\r\nconst Dot = styled.span`\r\n  display: inline-block;\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 999px;\r\n  background: ${(p) => p.color};\r\n  box-shadow: 0 0 12px ${(p) => p.color};\r\n  margin-right: 6px;\r\n`\r\n\r\nfunction clamp(n, a, b) {\r\n  return Math.max(a, Math.min(b, n))\r\n}\r\n\r\nfunction factorial(n) {\r\n  let r = 1\r\n  for (let i = 2; i <= n; i++) r *= i\r\n  return r\r\n}\r\n\r\nfunction safePow(x, n) {\r\n  // Avoid huge numbers for large x-range\r\n  const v = Math.pow(x, n)\r\n  if (!Number.isFinite(v)) return v > 0 ? Number.MAX_VALUE : -Number.MAX_VALUE\r\n  return v\r\n}\r\n\r\n// Derivatives at a for supported functions\r\nfunction derivativesAt(fnKey, a, maxN) {\r\n  const out = new Array(maxN + 1)\r\n  if (fnKey === \"sin\") {\r\n    // sin derivatives cycle: sin, cos, -sin, -cos\r\n    for (let n = 0; n <= maxN; n++) {\r\n      const k = n % 4\r\n      if (k === 0) out[n] = Math.sin(a)\r\n      else if (k === 1) out[n] = Math.cos(a)\r\n      else if (k === 2) out[n] = -Math.sin(a)\r\n      else out[n] = -Math.cos(a)\r\n    }\r\n    return out\r\n  }\r\n  if (fnKey === \"cos\") {\r\n    // cos derivatives cycle: cos, -sin, -cos, sin\r\n    for (let n = 0; n <= maxN; n++) {\r\n      const k = n % 4\r\n      if (k === 0) out[n] = Math.cos(a)\r\n      else if (k === 1) out[n] = -Math.sin(a)\r\n      else if (k === 2) out[n] = -Math.cos(a)\r\n      else out[n] = Math.sin(a)\r\n    }\r\n    return out\r\n  }\r\n  if (fnKey === \"exp\") {\r\n    const ea = Math.exp(a)\r\n    for (let n = 0; n <= maxN; n++) out[n] = ea\r\n    return out\r\n  }\r\n  if (fnKey === \"ln1p\") {\r\n    // f(x)=ln(1+x); derivatives: f'(x)=1/(1+x), f''=-1/(1+x)^2, ...\r\n    // f^(n)(x) = (-1)^{n-1} (n-1)! / (1+x)^n  for n>=1\r\n    out[0] = Math.log(1 + a)\r\n    const denom = 1 + a\r\n    for (let n = 1; n <= maxN; n++) {\r\n      out[n] = (Math.pow(-1, n - 1) * factorial(n - 1)) / safePow(denom, n)\r\n    }\r\n    return out\r\n  }\r\n  // default fallback (shouldn't happen)\r\n  for (let n = 0; n <= maxN; n++) out[n] = 0\r\n  return out\r\n}\r\n\r\nfunction f(fnKey, x) {\r\n  if (fnKey === \"sin\") return Math.sin(x)\r\n  if (fnKey === \"cos\") return Math.cos(x)\r\n  if (fnKey === \"exp\") return Math.exp(x)\r\n  if (fnKey === \"ln1p\") return Math.log(1 + x)\r\n  return x\r\n}\r\n\r\nfunction taylorValue(fnKey, x, a, n, derivs) {\r\n  let sum = 0\r\n  const dx = x - a\r\n  for (let k = 0; k <= n; k++) {\r\n    sum += (derivs[k] * safePow(dx, k)) / factorial(k)\r\n  }\r\n  return sum\r\n}\r\n\r\nexport default function TaylorSeriesExplorer() {\r\n  const canvasRef = useRef(null)\r\n  const wrapRef = useRef(null)\r\n\r\n  const [fnKey, setFnKey] = useState(\"sin\")\r\n  const [order, setOrder] = useState(5)\r\n  const [center, setCenter] = useState(0)\r\n  const [xRange, setXRange] = useState(8) // shows [-range/2, range/2]\r\n  const [yAuto, setYAuto] = useState(true)\r\n\r\n  // Resize canvas\r\n  useEffect(() => {\r\n    const wrap = wrapRef.current\r\n    const canvas = canvasRef.current\r\n    if (!wrap || !canvas) return\r\n\r\n    const ro = new ResizeObserver(() => {\r\n      const rect = wrap.getBoundingClientRect()\r\n      const dpr = clamp(window.devicePixelRatio || 1, 1, 2)\r\n      canvas.width = Math.max(1, Math.floor(rect.width * dpr))\r\n      canvas.height = Math.max(1, Math.floor(rect.height * dpr))\r\n      const ctx = canvas.getContext(\"2d\")\r\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0)\r\n    })\r\n    ro.observe(wrap)\r\n    return () => ro.disconnect()\r\n  }, [])\r\n\r\n  const derivs = useMemo(() => derivativesAt(fnKey, center, order), [\r\n    fnKey,\r\n    center,\r\n    order,\r\n  ])\r\n\r\n  const samples = useMemo(() => {\r\n    const N = 700\r\n    const half = xRange / 2\r\n    const xMin = -half\r\n    const xMax = half\r\n\r\n    // Keep ln(1+x) domain safe\r\n    const safeMin = fnKey === \"ln1p\" ? Math.max(xMin, -0.99) : xMin\r\n    const safeMax = xMax\r\n\r\n    const xs = new Array(N)\r\n    const ys = new Array(N)\r\n    const ts = new Array(N)\r\n\r\n    let yMin = Infinity\r\n    let yMax = -Infinity\r\n\r\n    for (let i = 0; i < N; i++) {\r\n      const t = i / (N - 1)\r\n      const x = safeMin + (safeMax - safeMin) * t\r\n      const y = f(fnKey, x)\r\n      const p = taylorValue(fnKey, x, center, order, derivs)\r\n      xs[i] = x\r\n      ys[i] = y\r\n      ts[i] = p\r\n      yMin = Math.min(yMin, y, p)\r\n      yMax = Math.max(yMax, y, p)\r\n    }\r\n\r\n    // pad for readability\r\n    const pad = (yMax - yMin) * 0.12 || 1\r\n    return {\r\n      xs,\r\n      ys,\r\n      ts,\r\n      xMin: safeMin,\r\n      xMax: safeMax,\r\n      yMin: yMin - pad,\r\n      yMax: yMax + pad,\r\n    }\r\n  }, [derivs, fnKey, order, center, xRange])\r\n\r\n  // Draw on param change\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    if (!canvas) return\r\n    const ctx = canvas.getContext(\"2d\")\r\n    const rect = canvas.getBoundingClientRect()\r\n    const w = rect.width\r\n    const h = rect.height\r\n\r\n    // background\r\n    const bg = ctx.createLinearGradient(0, 0, 0, h)\r\n    bg.addColorStop(0, \"rgba(2,6,23,1)\")\r\n    bg.addColorStop(1, \"rgba(0,0,0,1)\")\r\n    ctx.fillStyle = bg\r\n    ctx.fillRect(0, 0, w, h)\r\n\r\n    const margin = { l: 44, r: 16, t: 18, b: 36 }\r\n    const pw = w - margin.l - margin.r\r\n    const ph = h - margin.t - margin.b\r\n\r\n    const xMin = samples.xMin\r\n    const xMax = samples.xMax\r\n\r\n    let yMin = -4\r\n    let yMax = 4\r\n    if (yAuto) {\r\n      yMin = samples.yMin\r\n      yMax = samples.yMax\r\n    }\r\n\r\n    const xToPx = (x) => margin.l + ((x - xMin) / (xMax - xMin)) * pw\r\n    const yToPx = (y) => margin.t + (1 - (y - yMin) / (yMax - yMin)) * ph\r\n\r\n    // grid\r\n    ctx.save()\r\n    ctx.strokeStyle = \"rgba(255,255,255,0.08)\"\r\n    ctx.lineWidth = 1\r\n    for (let i = 0; i <= 8; i++) {\r\n      const x = margin.l + (pw * i) / 8\r\n      ctx.beginPath()\r\n      ctx.moveTo(x, margin.t)\r\n      ctx.lineTo(x, margin.t + ph)\r\n      ctx.stroke()\r\n    }\r\n    for (let i = 0; i <= 6; i++) {\r\n      const y = margin.t + (ph * i) / 6\r\n      ctx.beginPath()\r\n      ctx.moveTo(margin.l, y)\r\n      ctx.lineTo(margin.l + pw, y)\r\n      ctx.stroke()\r\n    }\r\n    ctx.restore()\r\n\r\n    // axes (if within range)\r\n    ctx.save()\r\n    ctx.strokeStyle = \"rgba(255,255,255,0.22)\"\r\n    ctx.lineWidth = 1.5\r\n    if (0 >= xMin && 0 <= xMax) {\r\n      const x0 = xToPx(0)\r\n      ctx.beginPath()\r\n      ctx.moveTo(x0, margin.t)\r\n      ctx.lineTo(x0, margin.t + ph)\r\n      ctx.stroke()\r\n    }\r\n    if (0 >= yMin && 0 <= yMax) {\r\n      const y0 = yToPx(0)\r\n      ctx.beginPath()\r\n      ctx.moveTo(margin.l, y0)\r\n      ctx.lineTo(margin.l + pw, y0)\r\n      ctx.stroke()\r\n    }\r\n    ctx.restore()\r\n\r\n    // center marker line at x=a\r\n    ctx.save()\r\n    ctx.strokeStyle = \"rgba(251,172,97,0.35)\"\r\n    ctx.setLineDash([6, 6])\r\n    ctx.lineWidth = 1.5\r\n    if (center >= xMin && center <= xMax) {\r\n      const xa = xToPx(center)\r\n      ctx.beginPath()\r\n      ctx.moveTo(xa, margin.t)\r\n      ctx.lineTo(xa, margin.t + ph)\r\n      ctx.stroke()\r\n    }\r\n    ctx.restore()\r\n\r\n    // plot function\r\n    drawCurve(ctx, samples.xs, samples.ys, xToPx, yToPx, {\r\n      color: \"rgba(127,231,255,0.95)\",\r\n      width: 3,\r\n      glow: \"rgba(127,231,255,0.35)\",\r\n    })\r\n\r\n    // plot taylor polynomial\r\n    drawCurve(ctx, samples.xs, samples.ts, xToPx, yToPx, {\r\n      color: \"rgba(251,172,97,0.95)\",\r\n      width: 3,\r\n      glow: \"rgba(251,172,97,0.35)\",\r\n    })\r\n\r\n    // labels\r\n    ctx.save()\r\n    ctx.fillStyle = \"rgba(255,255,255,0.75)\"\r\n    ctx.font =\r\n      \"12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace\"\r\n    ctx.fillText(`f(x) vs Taylorₙ(x)`, margin.l, 14)\r\n    ctx.fillText(`n=${order}   a=${center.toFixed(2)}`, margin.l, h - 10)\r\n    ctx.restore()\r\n  }, [samples, order, center, yAuto])\r\n\r\n  return (\r\n    <Layout>\r\n      <Card>\r\n        <PlotWrap ref={wrapRef}>\r\n          <Canvas ref={canvasRef} />\r\n        </PlotWrap>\r\n      </Card>\r\n\r\n      <Controls>\r\n        <Label>\r\n          Function <Value>{prettyFn(fnKey)}</Value>\r\n        </Label>\r\n        <Select value={fnKey} onChange={(e) => setFnKey(e.target.value)}>\r\n          <option value=\"sin\">sin(x)</option>\r\n          <option value=\"cos\">cos(x)</option>\r\n          <option value=\"exp\">e^x</option>\r\n          <option value=\"ln1p\">ln(1 + x)</option>\r\n        </Select>\r\n\r\n        <Label>\r\n          Order n <Value>{order}</Value>\r\n        </Label>\r\n        <Slider\r\n          type=\"range\"\r\n          min=\"0\"\r\n          max=\"18\"\r\n          step=\"1\"\r\n          value={order}\r\n          onChange={(e) => setOrder(parseInt(e.target.value, 10))}\r\n        />\r\n\r\n        <Label>\r\n          Center a <Value>{center.toFixed(2)}</Value>\r\n        </Label>\r\n        <Slider\r\n          type=\"range\"\r\n          min={fnKey === \"ln1p\" ? \"-0.9\" : \"-4\"}\r\n          max=\"4\"\r\n          step=\"0.05\"\r\n          value={center}\r\n          onChange={(e) => setCenter(parseFloat(e.target.value))}\r\n        />\r\n\r\n        <Label>\r\n          X range <Value>{xRange.toFixed(1)}</Value>\r\n        </Label>\r\n        <Slider\r\n          type=\"range\"\r\n          min=\"2\"\r\n          max=\"16\"\r\n          step=\"0.5\"\r\n          value={xRange}\r\n          onChange={(e) => setXRange(parseFloat(e.target.value))}\r\n        />\r\n\r\n        <Label>\r\n          Y scale <Value>{yAuto ? \"Auto\" : \"Fixed\"}</Value>\r\n        </Label>\r\n        <Slider\r\n          type=\"range\"\r\n          min=\"0\"\r\n          max=\"1\"\r\n          step=\"1\"\r\n          value={yAuto ? 1 : 0}\r\n          onChange={(e) => setYAuto(e.target.value === \"1\")}\r\n        />\r\n\r\n        <Legend>\r\n          <span>\r\n            <Dot color=\"rgba(127,231,255,0.95)\" />\r\n            f(x)\r\n          </span>\r\n          <span>\r\n            <Dot color=\"rgba(251,172,97,0.95)\" />\r\n            Taylorₙ(x)\r\n          </span>\r\n          <span>\r\n            <Dot color=\"rgba(251,172,97,0.45)\" /> x = a\r\n          </span>\r\n        </Legend>\r\n      </Controls>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nfunction prettyFn(fnKey) {\r\n  if (fnKey === \"sin\") return \"sin(x)\"\r\n  if (fnKey === \"cos\") return \"cos(x)\"\r\n  if (fnKey === \"exp\") return \"e^x\"\r\n  if (fnKey === \"ln1p\") return \"ln(1+x)\"\r\n  return fnKey\r\n}\r\n\r\nfunction drawCurve(ctx, xs, ys, xToPx, yToPx, style) {\r\n  ctx.save()\r\n  ctx.lineWidth = style.width\r\n  ctx.strokeStyle = style.color\r\n  ctx.shadowBlur = 10\r\n  ctx.shadowColor = style.glow\r\n  ctx.lineJoin = \"round\"\r\n  ctx.lineCap = \"round\"\r\n\r\n  ctx.beginPath()\r\n  for (let i = 0; i < xs.length; i++) {\r\n    const x = xToPx(xs[i])\r\n    const y = yToPx(ys[i])\r\n    if (i === 0) ctx.moveTo(x, y)\r\n    else ctx.lineTo(x, y)\r\n  }\r\n  ctx.stroke()\r\n  ctx.restore()\r\n}\r\n","import React from \"react\"\r\nimport styled from \"styled-components\"\r\nimport TaylorSeriesExplorer from \"./TaylorSeriesExplorer\"\r\n\r\nconst MainContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px;\r\n  background: radial-gradient(\r\n    circle at 30% 10%,\r\n    #0f172a 0%,\r\n    #0b1020 45%,\r\n    #000 100%\r\n  );\r\n  min-height: 100vh;\r\n  color: #eef2ff;\r\n`\r\n\r\nconst Heading = styled.h1`\r\n  font-size: clamp(1.6rem, 3vw, 2.4rem);\r\n  color: #fbac61;\r\n  margin: 0 0 10px 0;\r\n  text-align: center;\r\n  text-shadow: 0 0 14px rgba(251, 172, 97, 0.35);\r\n`\r\n\r\nconst Subheading = styled.p`\r\n  margin: 0 0 18px 0;\r\n  text-align: center;\r\n  color: rgba(255, 255, 255, 0.72);\r\n  max-width: 900px;\r\n  font-size: 0.95rem;\r\n`\r\n\r\nexport default function Main() {\r\n  return (\r\n    <MainContainer>\r\n      <Heading>Taylor Series Explorer</Heading>\r\n      <Subheading>\r\n        Compare a function to its Taylor polynomial around a center point \\(a\\).\r\n        Increase the order to see the approximation improve near \\(a\\).\r\n      </Subheading>\r\n      <TaylorSeriesExplorer />\r\n    </MainContainer>\r\n  )\r\n}\r\n"],"names":["Layout","styled","Card","PlotWrap","Canvas","Controls","Select","Label","Value","Slider","Legend","Dot","p","color","factorial","n","r","i","safePow","x","v","Math","pow","Number","isFinite","MAX_VALUE","f","fnKey","sin","cos","exp","log","taylorValue","a","derivs","sum","dx","k","TaylorSeriesExplorer","canvasRef","useRef","wrapRef","setFnKey","useState","order","setOrder","center","setCenter","xRange","setXRange","yAuto","setYAuto","useEffect","wrap","current","canvas","ro","ResizeObserver","rect","getBoundingClientRect","dpr","window","devicePixelRatio","b","max","min","width","floor","height","getContext","setTransform","observe","disconnect","useMemo","maxN","out","Array","ea","denom","derivativesAt","samples","N","half","xMin","xMax","safeMin","safeMax","xs","ys","ts","yMin","Infinity","yMax","y","pad","ctx","w","h","bg","createLinearGradient","addColorStop","fillStyle","fillRect","margin","pw","ph","xToPx","yToPx","save","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","restore","x0","y0","setLineDash","xa","drawCurve","glow","font","fillText","toFixed","_jsxs","children","_jsx","ref","prettyFn","value","onChange","e","target","type","step","parseInt","parseFloat","style","shadowBlur","shadowColor","lineJoin","lineCap","length","MainContainer","Heading","Subheading","Main"],"sourceRoot":""}