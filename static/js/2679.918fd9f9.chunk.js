"use strict";(self.webpackChunkAlgoLens=self.webpackChunkAlgoLens||[]).push([[2679],{82679:(e,s,t)=>{t.r(s),t.d(s,{default:()=>V});var r=t(72791);const a="Tetris_wrapper__5suX7",n="Tetris_header__G3RWI",i="Tetris_title__S-cQo",l="Tetris_controls__-y6wh",c="Tetris_hud__AD12U",o="Tetris_stat__4-UVO",h="Tetris_timerBar__y98SI",d="Tetris_timerFill__4wjYJ",u="Tetris_timerText__8c-iZ",_="Tetris_bossBox__w+PKv",f="Tetris_bossName__MW9Ax",m="Tetris_bossTaunt__hrWyY",x="Tetris_bonusPill__X81dh",p="Tetris_stage__VBIO4",v="Tetris_board__-yy+p",y="Tetris_row__3gKFT",j="Tetris_cell__Lpib0",g="Tetris_empty__nUiwQ",T="Tetris_ghost__QcqJ8",N="Tetris_filled__45+4t",k="Tetris_sidebar__XC1Sy",S="Tetris_panel__4rhdP",w="Tetris_panelTitle__rFnsc",b="Tetris_panelBody__htytz",M="Tetris_tauntSm__YocHf",A="Tetris_metaRow__TjJFv",B="Tetris_nextList__geigP",I="Tetris_miniPiece__7xIyH",L="Tetris_miniRow__LEuhw",C="Tetris_miniCell__OuRTu",P="Tetris_miniEmpty__MBiJx",E="Tetris_miniFilled__pyXRM",R="Tetris_holdBox__BSmJt",$="Tetris_holdEmpty__ZFB23",O="Tetris_gameOver__tPzh1",F="Tetris_victory__ZiWnl";var D=t(80184);const J={I:{color:"#5ab3ff",shapes:[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]]},J:{color:"#7fb4ff",shapes:[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]]},L:{color:"#ffc857",shapes:[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]]},O:{color:"#ffb02e",shapes:[[[1,1],[1,1]]]},S:{color:"#4ad6a7",shapes:[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]]},T:{color:"#b694ff",shapes:[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]]},Z:{color:"#ff6b6b",shapes:[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]]}},X=Object.keys(J),Z=()=>Array.from({length:20},(()=>Array(10).fill(0)));function W(){const e=[...X];for(let s=e.length-1;s>0;s--){const t=Math.floor(Math.random()*(s+1));[e[s],e[t]]=[e[t],e[s]]}return e}function Y(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const t=e.length,r=Array.from({length:t},(()=>Array(t).fill(0)));for(let a=0;a<t;a++)for(let n=0;n<t;n++)s>0?r[n][t-1-a]=e[a][n]:r[t-1-n][a]=e[a][n];return r}const H=e=>e.map((e=>[...e]));function K(e,s,t,r){for(let a=0;a<s.length;a++)for(let n=0;n<s[a].length;n++){if(!s[a][n])continue;const i=t+n,l=r+a;if(i<0||i>=10||l>=20)return!1;if(l>=0&&0!==e[l][i])return!1}return!0}function U(e){const s=J[e],t=s.shapes[0].map((e=>[...e])),r=t[0].length;return{key:e,color:s.color,rotationIndex:0,shape:t,x:Math.floor((10-r)/2),y:-2}}function z(e,s){return s?Math.max(240,180-Math.floor(.6*e)):Math.max(360,360-2*e)}const Q=["Bitcrusher","Latency Lord","Null Pointer","Stack Smasher","Garbage Colossus","Packet Phantom","Heisen-Bug","Kernel Kraken","Cache Minotaur","Daemon Duke"],G=["Feel the overclock!","I throttle time itself.","Your stack will overflow.","My speed is inevitable.","I'll fragment your hopes.","Packets lost, dreams gone.","Observe non-determinism!","Segfaulting your plans.","Cache this L.","Daemon time!"];function V(){const[e,s]=(0,r.useState)(Z()),[t,X]=(0,r.useState)(W()),[V,q]=(0,r.useState)(W()),[ee,se]=(0,r.useState)((()=>W())),[te,re]=(0,r.useState)((()=>U(ee[0]))),[ae,ne]=(0,r.useState)(null),[ie,le]=(0,r.useState)(!0),[ce,oe]=(0,r.useState)(1),[he,de]=(0,r.useState)(0),[ue,_e]=(0,r.useState)(0),[fe,me]=(0,r.useState)(z(1,!1)),[xe,pe]=(0,r.useState)(!1),[ve,ye]=(0,r.useState)(!1),[je,ge]=(0,r.useState)(!1),[Te,Ne]=(0,r.useState)(!1),[ke,Se]=(0,r.useState)(!1),[we,be]=(0,r.useState)(!1),Me=(0,r.useMemo)((()=>function(e){return Math.max(120,900-18*(e-1))}(ce)*(we?.5:1)),[ce,we]),Ae=Te?6:10;function Be(){let e=[...ee],s=[...t],r=[...V],a=e.shift();return e.length<3&&(0===s.length&&(s=r,r=W()),e=[...e,...s.splice(0,Math.min(7,s.length))]),se(e),X(s),q(r),a}function Ie(e){const t=e%5===0;Ne(t),Se(!1),de(0),s(Z());const r=Be();re(U(r)),me(z(e,t)),pe(!1),ye(!1),le(!0)}(0,r.useEffect)((()=>{Ie(1)}),[]),(0,r.useEffect)((()=>{if(xe||ve||je)return;const t=setInterval((()=>{re((t=>{if(!t)return t;const r=t.y+1;if(K(e,t.shape,t.x,r))return{...t,y:r};const a=function(e,s,t,r,a){const n=H(e);for(let i=0;i<s.length;i++)for(let e=0;e<s[i].length;e++){if(!s[i][e])continue;const l=t+e,c=r+i;c>=0&&(n[c][l]=a)}return n}(e,t.shape,t.x,t.y,t.color),{board:n,cleared:i}=function(e){const s=e.filter((e=>e.some((e=>0===e)))),t=20-s.length;return{board:[...Array.from({length:t},(()=>Array(10).fill(0))),...s],cleared:t}}(a);if(i>0){const e=[0,100,300,500,800][i],s=[0,2,5,8,12][i],t=Te&&ke?2:1;_e((s=>s+e*ce*t)),de((e=>e+i)),me((e=>Math.min(z(ce,Te),e+s)))}s(n),le(!0);const l=U(Be());return K(n,l.shape,l.x,l.y)?l:(ye(!0),t)}))}),Me);return()=>clearInterval(t)}),[e,Me,xe,ve,je,Te,ke,ce]),(0,r.useEffect)((()=>{if(xe||ve||je)return;const e=setInterval((()=>{be(!0);const e=setTimeout((()=>be(!1)),4e3);return()=>clearTimeout(e)}),12e3);return()=>clearInterval(e)}),[xe,ve,je,ce]),(0,r.useEffect)((()=>{if(xe||ve||je)return;const e=setInterval((()=>{me((e=>e<=1?(ye(!0),0):e-1))}),1e3);return()=>clearInterval(e)}),[xe,ve,je]),(0,r.useEffect)((()=>{if(!ve&&!je&&he>=Ae){Te&&Se(!0);const e=ce+1;if(e>50)return ge(!0),void pe(!0);oe(e),Ie(e)}}),[he]),(0,r.useEffect)((()=>{function s(s){if(!s.repeat){if("p"!==s.key&&"P"!==s.key)return"r"===s.key||"R"===s.key?(oe(1),_e(0),ge(!1),void Ie(1)):void(xe||ve||je||re((t=>{if(!t)return t;const r=function(s,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.shape;return K(e,a,s,r)?{...t,x:s,y:r,shape:a}:t};switch(s.key){case"ArrowLeft":case"a":case"A":return r(t.x-1,t.y);case"ArrowRight":case"d":case"D":return r(t.x+1,t.y);case"ArrowDown":case"s":case"S":return r(t.x,t.y+1);case"ArrowUp":case"w":case"W":{let s=Y(t.shape,1);const r=[[0,0],[-1,0],[1,0],[0,-1],[-2,0],[2,0]];for(const[a,n]of r)if(K(e,s,t.x+a,t.y+n))return{...t,shape:s,x:t.x+a,y:t.y+n};return t}case"z":case"Z":{const s=Y(t.shape,-1);return K(e,s,t.x,t.y)?{...t,shape:s}:t}case"x":case"X":{const s=Y(t.shape,1);return K(e,s,t.x,t.y)?{...t,shape:s}:t}case"c":case"C":if(!ie)return t;if(le(!1),ae){const s=ae.key;ne({key:t.key,color:t.color,shape:t.shape});const r=U(s);return K(e,r.shape,r.x,r.y)?r:t}ne({key:t.key,color:t.color,shape:t.shape});return U(Be());case" ":{let s=t.y;for(;K(e,t.shape,t.x,s+1);)s++;return{...t,y:s}}default:return t}})));pe((e=>!e))}}return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)}),[e,xe,ve,je,ie,ae]);const Le=(0,r.useMemo)((()=>{if(!te)return 0;let s=te.y;for(;K(e,te.shape,te.x,s+1);)s++;return s}),[e,te]),Ce=(0,r.useMemo)((()=>ee.slice(0,5)),[ee]),Pe=(0,r.useMemo)((()=>{const s=H(e);if(te){for(let e=0;e<te.shape.length;e++)for(let t=0;t<te.shape[e].length;t++){if(!te.shape[e][t])continue;const r=te.x+t,a=Le+e;a>=0&&0===s[a][r]&&(s[a][r]="ghost")}for(let e=0;e<te.shape.length;e++)for(let t=0;t<te.shape[e].length;t++){if(!te.shape[e][t])continue;const r=te.x+t,a=te.y+e;a>=0&&(s[a][r]=te.color)}}return s}),[e,te,Le]),Ee=`${Q[((Re=ce)-1)%Q.length]} v${Re}`;var Re;const $e=(e=>G[(e-1)%G.length])(ce),Oe=e=>{let{val:s}=e;return(0,D.jsx)("div",{className:`${j} ${0===s?g:"ghost"===s?T:N}`,style:s&&"ghost"!==s?{backgroundColor:s}:{}})};return(0,D.jsxs)("div",{className:a,children:[(0,D.jsxs)("div",{className:n,children:[(0,D.jsx)("div",{className:i,children:"Tetris: Boss Rush"}),(0,D.jsx)("div",{className:l,children:(0,D.jsx)("span",{children:"Controls: \u2190 \u2192 move \u2022 \u2193 soft drop \u2022 \u2191/Z/X rotate \u2022 Space hard drop \u2022 C hold \u2022 P pause \u2022 R restart"})})]}),(0,D.jsxs)("div",{className:c,children:[(0,D.jsxs)("div",{className:o,children:[(0,D.jsx)("span",{children:"Level"}),(0,D.jsx)("strong",{children:ce})]}),(0,D.jsxs)("div",{className:o,children:[(0,D.jsx)("span",{children:"Score"}),(0,D.jsx)("strong",{children:ue})]}),(0,D.jsxs)("div",{className:o,children:[(0,D.jsx)("span",{children:"Lines"}),(0,D.jsxs)("strong",{children:[he,"/",Ae]})]}),(0,D.jsxs)("div",{className:h,children:[(0,D.jsx)("div",{className:d,style:{width:fe/z(ce,Te)*100+"%"}}),(0,D.jsxs)("div",{className:u,children:[fe,"s"]})]}),(0,D.jsxs)("div",{className:_,"data-rage":we?"1":"0",children:[(0,D.jsx)("div",{className:f,children:Ee}),(0,D.jsx)("div",{className:m,children:$e})]}),Te&&(0,D.jsx)("div",{className:x,children:ke?"2x Active!":"Bonus Stage"})]}),(0,D.jsxs)("div",{className:p,children:[(0,D.jsx)("div",{className:v,children:Pe.map(((e,s)=>(0,D.jsx)("div",{className:y,children:e.map(((e,t)=>(0,D.jsx)(Oe,{val:e},`${t}-${s}`)))},s)))}),(0,D.jsxs)("aside",{className:k,children:[(0,D.jsxs)("div",{className:S,children:[(0,D.jsx)("div",{className:w,children:"Next"}),(0,D.jsx)("div",{className:B,children:Ce.map(((e,s)=>(0,D.jsx)("div",{className:I,children:J[e].shapes[0].map(((s,t)=>(0,D.jsx)("div",{className:L,children:s.map(((s,t)=>(0,D.jsx)("div",{className:`${C} ${s?E:P}`,style:s?{backgroundColor:J[e].color}:{}},t)))},t)))},s)))})]}),(0,D.jsxs)("div",{className:S,children:[(0,D.jsx)("div",{className:w,children:"Hold"}),(0,D.jsx)("div",{className:R,children:ae?J[ae.key].shapes[0].map(((e,s)=>(0,D.jsx)("div",{className:L,children:e.map(((e,s)=>(0,D.jsx)("div",{className:`${C} ${e?E:P}`,style:e?{backgroundColor:J[ae.key].color}:{}},s)))},s))):(0,D.jsx)("div",{className:$,children:"\u2014"})})]}),(0,D.jsxs)("div",{className:S,children:[(0,D.jsx)("div",{className:w,children:"Boss"}),(0,D.jsxs)("div",{className:b,children:[(0,D.jsx)("div",{children:(0,D.jsx)("strong",{children:Ee})}),(0,D.jsx)("div",{className:M,children:$e}),(0,D.jsxs)("div",{className:A,children:[(0,D.jsx)("span",{children:"Rage"}),(0,D.jsx)("span",{children:we?"ON":"off"})]}),(0,D.jsxs)("div",{className:A,children:[(0,D.jsx)("span",{children:"Stage"}),(0,D.jsx)("span",{children:Te?"Bonus":"Normal"})]})]})]}),ve&&(0,D.jsx)("div",{className:O,children:"\u23f3 Time's up! Press R to retry"}),je&&(0,D.jsxs)("div",{className:F,children:["\ud83c\udfc5 You cleared ",50," bosses! Medal unlocked!"]})]})]})]})}}}]);
//# sourceMappingURL=2679.918fd9f9.chunk.js.map