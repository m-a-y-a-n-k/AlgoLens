"use strict";(self.webpackChunkAlgoLens=self.webpackChunkAlgoLens||[]).push([[8974],{8974:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(1413),a=n(2791);const s="TrafficSimulation_container__bY5x8",o="TrafficSimulation_button__MtNoA",l="TrafficSimulation_road__vHzh9",c="TrafficSimulation_car__dZt0y";var i=n(184);const u=(e,t,n)=>({id:e,lane:Math.floor(Math.random()*t),pos:0,speed:Math.floor(Math.random()*(n+1)),color:"hsl(".concat(360*Math.random(),", 70%, 50%)")});function d(e){let{lanes:t=3,roadLength:n=60,carCount:d=8,vmax:h=5,p:f=.2,interval:p=500}=e;const m=(0,a.useRef)(null),[v,g]=(0,a.useState)({width:0,height:0}),[_,x]=(0,a.useState)(((e,t,n)=>{const r=[];for(let a=0;a<t;a++)r.push(u(a,e,n));return r})(t,d,h)),[M,w]=(0,a.useState)(!1),S=(0,a.useRef)(null),b=(0,a.useRef)(d),k=()=>{if(!m.current)return;const e=m.current.getBoundingClientRect();g({width:e.width,height:e.height})};(0,a.useLayoutEffect)((()=>(k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k))),[]);const C=()=>{x((e=>{let a=e.map((e=>(0,r.Z)({},e)));for(let r=0;r<t;r++){const e=a.filter((e=>e.lane===r)).sort(((e,t)=>e.pos-t.pos));for(let t=0;t<e.length;t++){const r=e[t];r.speed<h&&r.speed++;const a=e[t+1];let s=a?a.pos-r.pos-1:n;r.speed>s&&(r.speed=s),Math.random()<f&&r.speed>0&&r.speed--,r.pos+=r.speed}}const s=a.filter((e=>e.pos<n)),o=a.length-s.length;for(let n=0;n<o;n++)s.push(u(b.current++,t,h));return s}))};(0,a.useEffect)((()=>(M?S.current=setInterval(C,p):clearInterval(S.current),()=>clearInterval(S.current))),[M,p]);const L=Math.max(0,v.width-40),j=n>1?L/(n-1):0,N=t>1?Math.max(0,v.height-25)/(t-1):0;return(0,i.jsxs)("div",{className:s,children:[(0,i.jsx)("h3",{children:"Traffic Simulation"}),(0,i.jsx)("div",{className:l,ref:m,children:_.map((e=>{const t=Math.round(e.pos*j),n=Math.round(e.lane*N);return(0,i.jsx)("div",{className:c,style:{backgroundColor:e.color,transform:"translate(".concat(t,"px, ").concat(n,"px)")},children:"\ud83d\ude97"},e.id)}))}),(0,i.jsx)("button",{onClick:()=>w((e=>!e)),className:o,children:M?"Stop":"Start"})]})}}}]);
//# sourceMappingURL=8974.9e0b4805.chunk.js.map