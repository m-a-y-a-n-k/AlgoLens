{"version":3,"file":"static/js/2035.4521fedd.chunk.js","mappings":"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","sources":["routing/site/physics/components/DoublePendulum/DoublePendulum.jsx","routing/site/physics/components/DoublePendulum/index.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  max-width: 1100px;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 16px;\r\n\r\n  @media (min-width: 980px) {\r\n    grid-template-columns: 1fr 340px;\r\n    align-items: start;\r\n  }\r\n`\r\n\r\nconst CanvasCard = styled.div`\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 16px;\r\n  background: linear-gradient(\r\n    180deg,\r\n    rgba(255, 255, 255, 0.06),\r\n    rgba(255, 255, 255, 0.02)\r\n  );\r\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.45);\r\n  overflow: hidden;\r\n`\r\n\r\nconst CanvasWrap = styled.div`\r\n  width: 100%;\r\n  aspect-ratio: 16 / 10;\r\n  position: relative;\r\n`\r\n\r\nconst Canvas = styled.canvas`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: block;\r\n`\r\n\r\nconst HUD = styled.div`\r\n  position: absolute;\r\n  top: 12px;\r\n  left: 12px;\r\n  right: 12px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 10px;\r\n  pointer-events: none;\r\n`\r\n\r\nconst Pill = styled.div`\r\n  pointer-events: none;\r\n  padding: 8px 10px;\r\n  border-radius: 999px;\r\n  background: rgba(0, 0, 0, 0.55);\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  color: rgba(255, 255, 255, 0.92);\r\n  font-size: 12px;\r\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,\r\n    \"Liberation Mono\", \"Courier New\", monospace;\r\n  backdrop-filter: blur(8px);\r\n`\r\n\r\nconst ControlsCard = styled.div`\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 16px;\r\n  background: rgba(0, 0, 0, 0.35);\r\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.35);\r\n  padding: 14px;\r\n`\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n`\r\n\r\nconst Button = styled.button`\r\n  padding: 10px 12px;\r\n  border-radius: 10px;\r\n  border: 1px solid rgba(255, 255, 255, 0.14);\r\n  background: ${(p) =>\r\n    p.primary\r\n      ? \"linear-gradient(180deg, #fbac61, #e98c2f)\"\r\n      : \"rgba(255, 255, 255, 0.06)\"};\r\n  color: ${(p) => (p.primary ? \"#111827\" : \"rgba(255, 255, 255, 0.9)\")};\r\n  font-weight: 700;\r\n  cursor: pointer;\r\n  transition: transform 0.15s ease, background 0.15s ease;\r\n  min-width: 110px;\r\n\r\n  &:hover {\r\n    transform: translateY(-1px);\r\n  }\r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n`\r\n\r\nconst ControlGroup = styled.div`\r\n  margin-top: 12px;\r\n  padding-top: 12px;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\r\n`\r\n\r\nconst Label = styled.label`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 10px;\r\n  color: rgba(255, 255, 255, 0.88);\r\n  font-size: 0.9rem;\r\n  margin-bottom: 6px;\r\n`\r\n\r\nconst Value = styled.span`\r\n  color: rgba(255, 255, 255, 0.68);\r\n  font-variant-numeric: tabular-nums;\r\n`\r\n\r\nconst Slider = styled.input`\r\n  width: 100%;\r\n`\r\n\r\nfunction clamp(n, a, b) {\r\n  return Math.max(a, Math.min(b, n))\r\n}\r\n\r\nfunction rk4Step(state, dt, derivs) {\r\n  const k1 = derivs(state)\r\n  const s2 = state.map((v, i) => v + (dt / 2) * k1[i])\r\n  const k2 = derivs(s2)\r\n  const s3 = state.map((v, i) => v + (dt / 2) * k2[i])\r\n  const k3 = derivs(s3)\r\n  const s4 = state.map((v, i) => v + dt * k3[i])\r\n  const k4 = derivs(s4)\r\n  return state.map(\r\n    (v, i) => v + (dt / 6) * (k1[i] + 2 * k2[i] + 2 * k3[i] + k4[i])\r\n  )\r\n}\r\n\r\nexport default function DoublePendulum() {\r\n  const canvasRef = useRef(null)\r\n  const wrapRef = useRef(null)\r\n  const rafRef = useRef(0)\r\n  const lastTRef = useRef(0)\r\n  const trailRef = useRef([])\r\n\r\n  const [running, setRunning] = useState(true)\r\n  const [showTrail, setShowTrail] = useState(true)\r\n\r\n  // Parameters (UI state)\r\n  const [m1, setM1] = useState(1.0)\r\n  const [m2, setM2] = useState(1.0)\r\n  const [l1, setL1] = useState(1.2)\r\n  const [l2, setL2] = useState(1.0)\r\n  const [g, setG] = useState(9.81)\r\n  const [damping, setDamping] = useState(0.01) // 0..0.08 (approx)\r\n  const [timeScale, setTimeScale] = useState(1.0)\r\n  const [trailLen, setTrailLen] = useState(600)\r\n\r\n  // Simulation state in a ref (avoid rerenders)\r\n  const simRef = useRef({\r\n    // [theta1, omega1, theta2, omega2]\r\n    state: [Math.PI / 2, 0, Math.PI / 2 + 0.2, 0],\r\n  })\r\n\r\n  const derivs = useMemo(() => {\r\n    return (s) => {\r\n      const theta1 = s[0]\r\n      const omega1 = s[1]\r\n      const theta2 = s[2]\r\n      const omega2 = s[3]\r\n\r\n      const delta = theta1 - theta2\r\n      const denom = 2 * m1 + m2 - m2 * Math.cos(2 * delta)\r\n\r\n      const dtheta1 = omega1\r\n      const dtheta2 = omega2\r\n\r\n      const domega1 =\r\n        (-g * (2 * m1 + m2) * Math.sin(theta1) -\r\n          m2 * g * Math.sin(theta1 - 2 * theta2) -\r\n          2 *\r\n            Math.sin(delta) *\r\n            m2 *\r\n            (omega2 * omega2 * l2 + omega1 * omega1 * l1 * Math.cos(delta))) /\r\n        (l1 * denom)\r\n\r\n      const domega2 =\r\n        (2 *\r\n          Math.sin(delta) *\r\n          (omega1 * omega1 * l1 * (m1 + m2) +\r\n            g * (m1 + m2) * Math.cos(theta1) +\r\n            omega2 * omega2 * l2 * m2 * Math.cos(delta))) /\r\n        (l2 * denom)\r\n\r\n      // simple linear damping (applied as acceleration)\r\n      return [\r\n        dtheta1,\r\n        domega1 - damping * omega1,\r\n        dtheta2,\r\n        domega2 - damping * omega2,\r\n      ]\r\n    }\r\n  }, [m1, m2, l1, l2, g, damping])\r\n\r\n  // Resize canvas to match container (crisp + fast)\r\n  useEffect(() => {\r\n    const wrap = wrapRef.current\r\n    const canvas = canvasRef.current\r\n    if (!wrap || !canvas) return\r\n\r\n    const ro = new ResizeObserver(() => {\r\n      const rect = wrap.getBoundingClientRect()\r\n      const dpr = clamp(window.devicePixelRatio || 1, 1, 2)\r\n      canvas.width = Math.max(1, Math.floor(rect.width * dpr))\r\n      canvas.height = Math.max(1, Math.floor(rect.height * dpr))\r\n      const ctx = canvas.getContext(\"2d\")\r\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0)\r\n    })\r\n    ro.observe(wrap)\r\n    return () => ro.disconnect()\r\n  }, [])\r\n\r\n  const reset = (randomize = false) => {\r\n    simRef.current.state = randomize\r\n      ? [\r\n          (Math.random() * 1.4 + 0.2) * Math.PI,\r\n          0,\r\n          (Math.random() * 1.4 + 0.2) * Math.PI,\r\n          0,\r\n        ]\r\n      : [Math.PI / 2, 0, Math.PI / 2 + 0.2, 0]\r\n    trailRef.current = []\r\n  }\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    if (!canvas) return\r\n    const ctx = canvas.getContext(\"2d\")\r\n\r\n    const draw = (t) => {\r\n      rafRef.current = requestAnimationFrame(draw)\r\n      const lastT = lastTRef.current || t\r\n      lastTRef.current = t\r\n      const dtMs = t - lastT\r\n      const dt = clamp(dtMs / 1000, 0, 0.033) * timeScale\r\n\r\n      const rect = canvas.getBoundingClientRect()\r\n      const w = rect.width\r\n      const h = rect.height\r\n\r\n      // background\r\n      ctx.clearRect(0, 0, w, h)\r\n      const bg = ctx.createLinearGradient(0, 0, 0, h)\r\n      bg.addColorStop(0, \"#020617\")\r\n      bg.addColorStop(1, \"#000000\")\r\n      ctx.fillStyle = bg\r\n      ctx.fillRect(0, 0, w, h)\r\n\r\n      // sim step\r\n      if (running) {\r\n        const subSteps = dt > 0 ? Math.ceil(dt / 0.008) : 1\r\n        const hdt = dt / subSteps\r\n        for (let i = 0; i < subSteps; i++) {\r\n          simRef.current.state = rk4Step(simRef.current.state, hdt, derivs)\r\n        }\r\n      }\r\n\r\n      const [theta1, , theta2] = simRef.current.state\r\n      const origin = { x: w / 2, y: h * 0.18 }\r\n      const scale = (Math.min(w, h) * 0.38) / (l1 + l2)\r\n\r\n      const x1 = origin.x + l1 * scale * Math.sin(theta1)\r\n      const y1 = origin.y + l1 * scale * Math.cos(theta1)\r\n      const x2 = x1 + l2 * scale * Math.sin(theta2)\r\n      const y2 = y1 + l2 * scale * Math.cos(theta2)\r\n\r\n      // trail\r\n      if (showTrail) {\r\n        const trail = trailRef.current\r\n        trail.push({ x: x2, y: y2 })\r\n        if (trail.length > trailLen) trail.splice(0, trail.length - trailLen)\r\n\r\n        ctx.save()\r\n        ctx.globalCompositeOperation = \"lighter\"\r\n        ctx.lineWidth = 2\r\n        ctx.beginPath()\r\n        for (let i = 0; i < trail.length; i++) {\r\n          const p = trail[i]\r\n          if (i === 0) ctx.moveTo(p.x, p.y)\r\n          else ctx.lineTo(p.x, p.y)\r\n        }\r\n        const grad = ctx.createLinearGradient(0, 0, w, h)\r\n        grad.addColorStop(0, \"rgba(59,130,246,0.0)\")\r\n        grad.addColorStop(0.5, \"rgba(59,130,246,0.35)\")\r\n        grad.addColorStop(1, \"rgba(251,172,97,0.55)\")\r\n        ctx.strokeStyle = grad\r\n        ctx.stroke()\r\n        ctx.restore()\r\n      }\r\n\r\n      // rods\r\n      ctx.lineWidth = 3\r\n      ctx.strokeStyle = \"rgba(255,255,255,0.75)\"\r\n      ctx.beginPath()\r\n      ctx.moveTo(origin.x, origin.y)\r\n      ctx.lineTo(x1, y1)\r\n      ctx.lineTo(x2, y2)\r\n      ctx.stroke()\r\n\r\n      // joints + bobs\r\n      const r1 = 8 + m1 * 4\r\n      const r2 = 8 + m2 * 4\r\n\r\n      // bob 1\r\n      ctx.fillStyle = \"#60a5fa\"\r\n      ctx.beginPath()\r\n      ctx.arc(x1, y1, r1, 0, Math.PI * 2)\r\n      ctx.fill()\r\n\r\n      // bob 2\r\n      ctx.fillStyle = \"#fbac61\"\r\n      ctx.beginPath()\r\n      ctx.arc(x2, y2, r2, 0, Math.PI * 2)\r\n      ctx.fill()\r\n\r\n      // origin\r\n      ctx.fillStyle = \"rgba(255,255,255,0.85)\"\r\n      ctx.beginPath()\r\n      ctx.arc(origin.x, origin.y, 4, 0, Math.PI * 2)\r\n      ctx.fill()\r\n    }\r\n\r\n    rafRef.current = requestAnimationFrame(draw)\r\n    return () => cancelAnimationFrame(rafRef.current)\r\n  }, [derivs, l1, l2, m1, m2, running, showTrail, timeScale, trailLen])\r\n\r\n  return (\r\n    <Container>\r\n      <CanvasCard>\r\n        <CanvasWrap ref={wrapRef}>\r\n          <Canvas ref={canvasRef} />\r\n          <HUD>\r\n            <Pill>{running ? \"RUNNING\" : \"PAUSED\"}</Pill>\r\n            <Pill>Drag not enabled • Use controls</Pill>\r\n          </HUD>\r\n        </CanvasWrap>\r\n      </CanvasCard>\r\n\r\n      <ControlsCard>\r\n        <Row>\r\n          <Button primary onClick={() => setRunning((v) => !v)}>\r\n            {running ? \"Pause\" : \"Play\"}\r\n          </Button>\r\n          <Button onClick={() => reset(false)}>Reset</Button>\r\n          <Button onClick={() => reset(true)}>Randomize</Button>\r\n        </Row>\r\n\r\n        <ControlGroup>\r\n          <Label>\r\n            Mass 1 <Value>{m1.toFixed(2)}</Value>\r\n          </Label>\r\n          <Slider\r\n            type=\"range\"\r\n            min=\"0.4\"\r\n            max=\"3.0\"\r\n            step=\"0.05\"\r\n            value={m1}\r\n            onChange={(e) => setM1(parseFloat(e.target.value))}\r\n          />\r\n          <Label>\r\n            Mass 2 <Value>{m2.toFixed(2)}</Value>\r\n          </Label>\r\n          <Slider\r\n            type=\"range\"\r\n            min=\"0.4\"\r\n            max=\"3.0\"\r\n            step=\"0.05\"\r\n            value={m2}\r\n            onChange={(e) => setM2(parseFloat(e.target.value))}\r\n          />\r\n        </ControlGroup>\r\n\r\n        <ControlGroup>\r\n          <Label>\r\n            Length 1 <Value>{l1.toFixed(2)} m</Value>\r\n          </Label>\r\n          <Slider\r\n            type=\"range\"\r\n            min=\"0.5\"\r\n            max=\"2.2\"\r\n            step=\"0.05\"\r\n            value={l1}\r\n            onChange={(e) => setL1(parseFloat(e.target.value))}\r\n          />\r\n          <Label>\r\n            Length 2 <Value>{l2.toFixed(2)} m</Value>\r\n          </Label>\r\n          <Slider\r\n            type=\"range\"\r\n            min=\"0.5\"\r\n            max=\"2.2\"\r\n            step=\"0.05\"\r\n            value={l2}\r\n            onChange={(e) => setL2(parseFloat(e.target.value))}\r\n          />\r\n        </ControlGroup>\r\n\r\n        <ControlGroup>\r\n          <Label>\r\n            Gravity <Value>{g.toFixed(2)} m/s²</Value>\r\n          </Label>\r\n          <Slider\r\n            type=\"range\"\r\n            min=\"0.0\"\r\n            max=\"20.0\"\r\n            step=\"0.1\"\r\n            value={g}\r\n            onChange={(e) => setG(parseFloat(e.target.value))}\r\n          />\r\n          <Label>\r\n            Damping <Value>{damping.toFixed(3)}</Value>\r\n          </Label>\r\n          <Slider\r\n            type=\"range\"\r\n            min=\"0.0\"\r\n            max=\"0.08\"\r\n            step=\"0.001\"\r\n            value={damping}\r\n            onChange={(e) => setDamping(parseFloat(e.target.value))}\r\n          />\r\n          <Label>\r\n            Speed <Value>{timeScale.toFixed(2)}×</Value>\r\n          </Label>\r\n          <Slider\r\n            type=\"range\"\r\n            min=\"0.2\"\r\n            max=\"3.0\"\r\n            step=\"0.05\"\r\n            value={timeScale}\r\n            onChange={(e) => setTimeScale(parseFloat(e.target.value))}\r\n          />\r\n        </ControlGroup>\r\n\r\n        <ControlGroup>\r\n          <Row>\r\n            <Button\r\n              onClick={() => setShowTrail((v) => !v)}\r\n              style={{ minWidth: 140 }}\r\n            >\r\n              Trail: {showTrail ? \"On\" : \"Off\"}\r\n            </Button>\r\n          </Row>\r\n          <Label>\r\n            Trail length <Value>{trailLen}</Value>\r\n          </Label>\r\n          <Slider\r\n            type=\"range\"\r\n            min=\"50\"\r\n            max=\"1400\"\r\n            step=\"10\"\r\n            value={trailLen}\r\n            onChange={(e) => setTrailLen(parseInt(e.target.value, 10))}\r\n          />\r\n        </ControlGroup>\r\n      </ControlsCard>\r\n    </Container>\r\n  )\r\n}\r\n","import React from \"react\"\r\nimport styled from \"styled-components\"\r\nimport DoublePendulum from \"./DoublePendulum\"\r\n\r\nconst MainContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px;\r\n  background: radial-gradient(\r\n    circle at 20% 10%,\r\n    #0b1020 0%,\r\n    #05060b 55%,\r\n    #000 100%\r\n  );\r\n  min-height: 100vh;\r\n  color: #eef2ff;\r\n`\r\n\r\nconst Heading = styled.h1`\r\n  font-size: clamp(1.6rem, 3vw, 2.4rem);\r\n  color: #fbac61;\r\n  margin: 0 0 14px 0;\r\n  text-align: center;\r\n  text-shadow: 0 0 14px rgba(251, 172, 97, 0.35);\r\n`\r\n\r\nconst Subheading = styled.p`\r\n  margin: 0 0 18px 0;\r\n  text-align: center;\r\n  color: rgba(255, 255, 255, 0.72);\r\n  max-width: 900px;\r\n  font-size: 0.95rem;\r\n`\r\n\r\nexport default function Main() {\r\n  return (\r\n    <MainContainer>\r\n      <Heading>Double Pendulum</Heading>\r\n      <Subheading>\r\n        A chaotic system: tiny changes in initial conditions can lead to wildly\r\n        different motion. Use the controls to tweak parameters and reset.\r\n      </Subheading>\r\n      <DoublePendulum />\r\n    </MainContainer>\r\n  )\r\n}\r\n"],"names":["Container","styled","CanvasCard","CanvasWrap","Canvas","HUD","Pill","ControlsCard","Row","Button","p","primary","ControlGroup","Label","Value","Slider","clamp","n","a","b","Math","max","min","rk4Step","state","dt","derivs","k1","k2","map","v","i","k3","k4","DoublePendulum","canvasRef","useRef","wrapRef","rafRef","lastTRef","trailRef","running","setRunning","useState","showTrail","setShowTrail","m1","setM1","m2","setM2","l1","setL1","l2","setL2","g","setG","damping","setDamping","timeScale","setTimeScale","trailLen","setTrailLen","simRef","PI","useMemo","s","theta1","omega1","theta2","omega2","delta","denom","cos","dtheta1","dtheta2","domega1","sin","domega2","useEffect","wrap","current","canvas","ro","ResizeObserver","rect","getBoundingClientRect","dpr","window","devicePixelRatio","width","floor","height","getContext","setTransform","observe","disconnect","reset","randomize","arguments","length","undefined","random","ctx","draw","t","requestAnimationFrame","lastT","w","h","clearRect","bg","createLinearGradient","addColorStop","fillStyle","fillRect","subSteps","ceil","hdt","origin","x","y","scale","x1","y1","x2","y2","trail","push","splice","save","globalCompositeOperation","lineWidth","beginPath","moveTo","lineTo","grad","strokeStyle","stroke","restore","r1","r2","arc","fill","cancelAnimationFrame","_jsxs","children","_jsx","ref","onClick","toFixed","type","step","value","onChange","e","parseFloat","target","style","minWidth","parseInt","MainContainer","Heading","Subheading","Main"],"sourceRoot":""}