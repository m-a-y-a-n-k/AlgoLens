{"version":3,"file":"static/js/2035.4521fedd.chunk.js","mappings":"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","sources":["routing/site/physics/components/DoublePendulum/DoublePendulum.jsx","routing/site/physics/components/DoublePendulum/index.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\"\nimport styled from \"styled-components\"\n\nconst Container = styled.div`\n  width: 100%;\n  max-width: 1100px;\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 16px;\n\n  @media (min-width: 980px) {\n    grid-template-columns: 1fr 340px;\n    align-items: start;\n  }\n`\n\nconst CanvasCard = styled.div`\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 16px;\n  background: linear-gradient(\n    180deg,\n    rgba(255, 255, 255, 0.06),\n    rgba(255, 255, 255, 0.02)\n  );\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.45);\n  overflow: hidden;\n`\n\nconst CanvasWrap = styled.div`\n  width: 100%;\n  aspect-ratio: 16 / 10;\n  position: relative;\n`\n\nconst Canvas = styled.canvas`\n  width: 100%;\n  height: 100%;\n  display: block;\n`\n\nconst HUD = styled.div`\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  right: 12px;\n  display: flex;\n  justify-content: space-between;\n  gap: 10px;\n  pointer-events: none;\n`\n\nconst Pill = styled.div`\n  pointer-events: none;\n  padding: 8px 10px;\n  border-radius: 999px;\n  background: rgba(0, 0, 0, 0.55);\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  color: rgba(255, 255, 255, 0.92);\n  font-size: 12px;\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,\n    \"Liberation Mono\", \"Courier New\", monospace;\n  backdrop-filter: blur(8px);\n`\n\nconst ControlsCard = styled.div`\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 16px;\n  background: rgba(0, 0, 0, 0.35);\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.35);\n  padding: 14px;\n`\n\nconst Row = styled.div`\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n`\n\nconst Button = styled.button`\n  padding: 10px 12px;\n  border-radius: 10px;\n  border: 1px solid rgba(255, 255, 255, 0.14);\n  background: ${(p) =>\n    p.primary\n      ? \"linear-gradient(180deg, #fbac61, #e98c2f)\"\n      : \"rgba(255, 255, 255, 0.06)\"};\n  color: ${(p) => (p.primary ? \"#111827\" : \"rgba(255, 255, 255, 0.9)\")};\n  font-weight: 700;\n  cursor: pointer;\n  transition: transform 0.15s ease, background 0.15s ease;\n  min-width: 110px;\n\n  &:hover {\n    transform: translateY(-1px);\n  }\n  &:active {\n    transform: translateY(0);\n  }\n`\n\nconst ControlGroup = styled.div`\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n`\n\nconst Label = styled.label`\n  display: flex;\n  justify-content: space-between;\n  gap: 10px;\n  color: rgba(255, 255, 255, 0.88);\n  font-size: 0.9rem;\n  margin-bottom: 6px;\n`\n\nconst Value = styled.span`\n  color: rgba(255, 255, 255, 0.68);\n  font-variant-numeric: tabular-nums;\n`\n\nconst Slider = styled.input`\n  width: 100%;\n`\n\nfunction clamp(n, a, b) {\n  return Math.max(a, Math.min(b, n))\n}\n\nfunction rk4Step(state, dt, derivs) {\n  const k1 = derivs(state)\n  const s2 = state.map((v, i) => v + (dt / 2) * k1[i])\n  const k2 = derivs(s2)\n  const s3 = state.map((v, i) => v + (dt / 2) * k2[i])\n  const k3 = derivs(s3)\n  const s4 = state.map((v, i) => v + dt * k3[i])\n  const k4 = derivs(s4)\n  return state.map(\n    (v, i) => v + (dt / 6) * (k1[i] + 2 * k2[i] + 2 * k3[i] + k4[i])\n  )\n}\n\nexport default function DoublePendulum() {\n  const canvasRef = useRef(null)\n  const wrapRef = useRef(null)\n  const rafRef = useRef(0)\n  const lastTRef = useRef(0)\n  const trailRef = useRef([])\n\n  const [running, setRunning] = useState(true)\n  const [showTrail, setShowTrail] = useState(true)\n\n  // Parameters (UI state)\n  const [m1, setM1] = useState(1.0)\n  const [m2, setM2] = useState(1.0)\n  const [l1, setL1] = useState(1.2)\n  const [l2, setL2] = useState(1.0)\n  const [g, setG] = useState(9.81)\n  const [damping, setDamping] = useState(0.01) // 0..0.08 (approx)\n  const [timeScale, setTimeScale] = useState(1.0)\n  const [trailLen, setTrailLen] = useState(600)\n\n  // Simulation state in a ref (avoid rerenders)\n  const simRef = useRef({\n    // [theta1, omega1, theta2, omega2]\n    state: [Math.PI / 2, 0, Math.PI / 2 + 0.2, 0],\n  })\n\n  const derivs = useMemo(() => {\n    return (s) => {\n      const theta1 = s[0]\n      const omega1 = s[1]\n      const theta2 = s[2]\n      const omega2 = s[3]\n\n      const delta = theta1 - theta2\n      const denom = 2 * m1 + m2 - m2 * Math.cos(2 * delta)\n\n      const dtheta1 = omega1\n      const dtheta2 = omega2\n\n      const domega1 =\n        (-g * (2 * m1 + m2) * Math.sin(theta1) -\n          m2 * g * Math.sin(theta1 - 2 * theta2) -\n          2 *\n            Math.sin(delta) *\n            m2 *\n            (omega2 * omega2 * l2 + omega1 * omega1 * l1 * Math.cos(delta))) /\n        (l1 * denom)\n\n      const domega2 =\n        (2 *\n          Math.sin(delta) *\n          (omega1 * omega1 * l1 * (m1 + m2) +\n            g * (m1 + m2) * Math.cos(theta1) +\n            omega2 * omega2 * l2 * m2 * Math.cos(delta))) /\n        (l2 * denom)\n\n      // simple linear damping (applied as acceleration)\n      return [\n        dtheta1,\n        domega1 - damping * omega1,\n        dtheta2,\n        domega2 - damping * omega2,\n      ]\n    }\n  }, [m1, m2, l1, l2, g, damping])\n\n  // Resize canvas to match container (crisp + fast)\n  useEffect(() => {\n    const wrap = wrapRef.current\n    const canvas = canvasRef.current\n    if (!wrap || !canvas) return\n\n    const ro = new ResizeObserver(() => {\n      const rect = wrap.getBoundingClientRect()\n      const dpr = clamp(window.devicePixelRatio || 1, 1, 2)\n      canvas.width = Math.max(1, Math.floor(rect.width * dpr))\n      canvas.height = Math.max(1, Math.floor(rect.height * dpr))\n      const ctx = canvas.getContext(\"2d\")\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0)\n    })\n    ro.observe(wrap)\n    return () => ro.disconnect()\n  }, [])\n\n  const reset = (randomize = false) => {\n    simRef.current.state = randomize\n      ? [\n          (Math.random() * 1.4 + 0.2) * Math.PI,\n          0,\n          (Math.random() * 1.4 + 0.2) * Math.PI,\n          0,\n        ]\n      : [Math.PI / 2, 0, Math.PI / 2 + 0.2, 0]\n    trailRef.current = []\n  }\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n\n    const draw = (t) => {\n      rafRef.current = requestAnimationFrame(draw)\n      const lastT = lastTRef.current || t\n      lastTRef.current = t\n      const dtMs = t - lastT\n      const dt = clamp(dtMs / 1000, 0, 0.033) * timeScale\n\n      const rect = canvas.getBoundingClientRect()\n      const w = rect.width\n      const h = rect.height\n\n      // background\n      ctx.clearRect(0, 0, w, h)\n      const bg = ctx.createLinearGradient(0, 0, 0, h)\n      bg.addColorStop(0, \"#020617\")\n      bg.addColorStop(1, \"#000000\")\n      ctx.fillStyle = bg\n      ctx.fillRect(0, 0, w, h)\n\n      // sim step\n      if (running) {\n        const subSteps = dt > 0 ? Math.ceil(dt / 0.008) : 1\n        const hdt = dt / subSteps\n        for (let i = 0; i < subSteps; i++) {\n          simRef.current.state = rk4Step(simRef.current.state, hdt, derivs)\n        }\n      }\n\n      const [theta1, , theta2] = simRef.current.state\n      const origin = { x: w / 2, y: h * 0.18 }\n      const scale = (Math.min(w, h) * 0.38) / (l1 + l2)\n\n      const x1 = origin.x + l1 * scale * Math.sin(theta1)\n      const y1 = origin.y + l1 * scale * Math.cos(theta1)\n      const x2 = x1 + l2 * scale * Math.sin(theta2)\n      const y2 = y1 + l2 * scale * Math.cos(theta2)\n\n      // trail\n      if (showTrail) {\n        const trail = trailRef.current\n        trail.push({ x: x2, y: y2 })\n        if (trail.length > trailLen) trail.splice(0, trail.length - trailLen)\n\n        ctx.save()\n        ctx.globalCompositeOperation = \"lighter\"\n        ctx.lineWidth = 2\n        ctx.beginPath()\n        for (let i = 0; i < trail.length; i++) {\n          const p = trail[i]\n          if (i === 0) ctx.moveTo(p.x, p.y)\n          else ctx.lineTo(p.x, p.y)\n        }\n        const grad = ctx.createLinearGradient(0, 0, w, h)\n        grad.addColorStop(0, \"rgba(59,130,246,0.0)\")\n        grad.addColorStop(0.5, \"rgba(59,130,246,0.35)\")\n        grad.addColorStop(1, \"rgba(251,172,97,0.55)\")\n        ctx.strokeStyle = grad\n        ctx.stroke()\n        ctx.restore()\n      }\n\n      // rods\n      ctx.lineWidth = 3\n      ctx.strokeStyle = \"rgba(255,255,255,0.75)\"\n      ctx.beginPath()\n      ctx.moveTo(origin.x, origin.y)\n      ctx.lineTo(x1, y1)\n      ctx.lineTo(x2, y2)\n      ctx.stroke()\n\n      // joints + bobs\n      const r1 = 8 + m1 * 4\n      const r2 = 8 + m2 * 4\n\n      // bob 1\n      ctx.fillStyle = \"#60a5fa\"\n      ctx.beginPath()\n      ctx.arc(x1, y1, r1, 0, Math.PI * 2)\n      ctx.fill()\n\n      // bob 2\n      ctx.fillStyle = \"#fbac61\"\n      ctx.beginPath()\n      ctx.arc(x2, y2, r2, 0, Math.PI * 2)\n      ctx.fill()\n\n      // origin\n      ctx.fillStyle = \"rgba(255,255,255,0.85)\"\n      ctx.beginPath()\n      ctx.arc(origin.x, origin.y, 4, 0, Math.PI * 2)\n      ctx.fill()\n    }\n\n    rafRef.current = requestAnimationFrame(draw)\n    return () => cancelAnimationFrame(rafRef.current)\n  }, [derivs, l1, l2, m1, m2, running, showTrail, timeScale, trailLen])\n\n  return (\n    <Container>\n      <CanvasCard>\n        <CanvasWrap ref={wrapRef}>\n          <Canvas ref={canvasRef} />\n          <HUD>\n            <Pill>{running ? \"RUNNING\" : \"PAUSED\"}</Pill>\n            <Pill>Drag not enabled • Use controls</Pill>\n          </HUD>\n        </CanvasWrap>\n      </CanvasCard>\n\n      <ControlsCard>\n        <Row>\n          <Button primary onClick={() => setRunning((v) => !v)}>\n            {running ? \"Pause\" : \"Play\"}\n          </Button>\n          <Button onClick={() => reset(false)}>Reset</Button>\n          <Button onClick={() => reset(true)}>Randomize</Button>\n        </Row>\n\n        <ControlGroup>\n          <Label>\n            Mass 1 <Value>{m1.toFixed(2)}</Value>\n          </Label>\n          <Slider\n            type=\"range\"\n            min=\"0.4\"\n            max=\"3.0\"\n            step=\"0.05\"\n            value={m1}\n            onChange={(e) => setM1(parseFloat(e.target.value))}\n          />\n          <Label>\n            Mass 2 <Value>{m2.toFixed(2)}</Value>\n          </Label>\n          <Slider\n            type=\"range\"\n            min=\"0.4\"\n            max=\"3.0\"\n            step=\"0.05\"\n            value={m2}\n            onChange={(e) => setM2(parseFloat(e.target.value))}\n          />\n        </ControlGroup>\n\n        <ControlGroup>\n          <Label>\n            Length 1 <Value>{l1.toFixed(2)} m</Value>\n          </Label>\n          <Slider\n            type=\"range\"\n            min=\"0.5\"\n            max=\"2.2\"\n            step=\"0.05\"\n            value={l1}\n            onChange={(e) => setL1(parseFloat(e.target.value))}\n          />\n          <Label>\n            Length 2 <Value>{l2.toFixed(2)} m</Value>\n          </Label>\n          <Slider\n            type=\"range\"\n            min=\"0.5\"\n            max=\"2.2\"\n            step=\"0.05\"\n            value={l2}\n            onChange={(e) => setL2(parseFloat(e.target.value))}\n          />\n        </ControlGroup>\n\n        <ControlGroup>\n          <Label>\n            Gravity <Value>{g.toFixed(2)} m/s²</Value>\n          </Label>\n          <Slider\n            type=\"range\"\n            min=\"0.0\"\n            max=\"20.0\"\n            step=\"0.1\"\n            value={g}\n            onChange={(e) => setG(parseFloat(e.target.value))}\n          />\n          <Label>\n            Damping <Value>{damping.toFixed(3)}</Value>\n          </Label>\n          <Slider\n            type=\"range\"\n            min=\"0.0\"\n            max=\"0.08\"\n            step=\"0.001\"\n            value={damping}\n            onChange={(e) => setDamping(parseFloat(e.target.value))}\n          />\n          <Label>\n            Speed <Value>{timeScale.toFixed(2)}×</Value>\n          </Label>\n          <Slider\n            type=\"range\"\n            min=\"0.2\"\n            max=\"3.0\"\n            step=\"0.05\"\n            value={timeScale}\n            onChange={(e) => setTimeScale(parseFloat(e.target.value))}\n          />\n        </ControlGroup>\n\n        <ControlGroup>\n          <Row>\n            <Button\n              onClick={() => setShowTrail((v) => !v)}\n              style={{ minWidth: 140 }}\n            >\n              Trail: {showTrail ? \"On\" : \"Off\"}\n            </Button>\n          </Row>\n          <Label>\n            Trail length <Value>{trailLen}</Value>\n          </Label>\n          <Slider\n            type=\"range\"\n            min=\"50\"\n            max=\"1400\"\n            step=\"10\"\n            value={trailLen}\n            onChange={(e) => setTrailLen(parseInt(e.target.value, 10))}\n          />\n        </ControlGroup>\n      </ControlsCard>\n    </Container>\n  )\n}\n","import React from \"react\"\nimport styled from \"styled-components\"\nimport DoublePendulum from \"./DoublePendulum\"\n\nconst MainContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  background: radial-gradient(\n    circle at 20% 10%,\n    #0b1020 0%,\n    #05060b 55%,\n    #000 100%\n  );\n  min-height: 100vh;\n  color: #eef2ff;\n`\n\nconst Heading = styled.h1`\n  font-size: clamp(1.6rem, 3vw, 2.4rem);\n  color: #fbac61;\n  margin: 0 0 14px 0;\n  text-align: center;\n  text-shadow: 0 0 14px rgba(251, 172, 97, 0.35);\n`\n\nconst Subheading = styled.p`\n  margin: 0 0 18px 0;\n  text-align: center;\n  color: rgba(255, 255, 255, 0.72);\n  max-width: 900px;\n  font-size: 0.95rem;\n`\n\nexport default function Main() {\n  return (\n    <MainContainer>\n      <Heading>Double Pendulum</Heading>\n      <Subheading>\n        A chaotic system: tiny changes in initial conditions can lead to wildly\n        different motion. Use the controls to tweak parameters and reset.\n      </Subheading>\n      <DoublePendulum />\n    </MainContainer>\n  )\n}\n"],"names":["Container","styled","CanvasCard","CanvasWrap","Canvas","HUD","Pill","ControlsCard","Row","Button","p","primary","ControlGroup","Label","Value","Slider","clamp","n","a","b","Math","max","min","rk4Step","state","dt","derivs","k1","k2","map","v","i","k3","k4","DoublePendulum","canvasRef","useRef","wrapRef","rafRef","lastTRef","trailRef","running","setRunning","useState","showTrail","setShowTrail","m1","setM1","m2","setM2","l1","setL1","l2","setL2","g","setG","damping","setDamping","timeScale","setTimeScale","trailLen","setTrailLen","simRef","PI","useMemo","s","theta1","omega1","theta2","omega2","delta","denom","cos","dtheta1","dtheta2","domega1","sin","domega2","useEffect","wrap","current","canvas","ro","ResizeObserver","rect","getBoundingClientRect","dpr","window","devicePixelRatio","width","floor","height","getContext","setTransform","observe","disconnect","reset","randomize","arguments","length","undefined","random","ctx","draw","t","requestAnimationFrame","lastT","w","h","clearRect","bg","createLinearGradient","addColorStop","fillStyle","fillRect","subSteps","ceil","hdt","origin","x","y","scale","x1","y1","x2","y2","trail","push","splice","save","globalCompositeOperation","lineWidth","beginPath","moveTo","lineTo","grad","strokeStyle","stroke","restore","r1","r2","arc","fill","cancelAnimationFrame","_jsxs","children","_jsx","ref","onClick","toFixed","type","step","value","onChange","e","parseFloat","target","style","minWidth","parseInt","MainContainer","Heading","Subheading","Main"],"sourceRoot":""}